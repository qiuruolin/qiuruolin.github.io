<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[echartsæºç è§£è¯»ã€Šå››ã€‹ï¼šechartsæºç ä¹‹Componentåˆ†æ]]></title>
    <url>%2F2019%2F05%2F23%2Fecharts-4%2F</url>
    <content type="text"><![CDATA[åœ¨æœ¬ç¯‡åšæ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ç»§ç»­Componentæºç è§£è¯»ï¼Œæˆ‘å°†ä¸»è¦ä»‹ç»å„Componentçš„æ¸²æŸ“è¿‡ç¨‹ä»¥åŠå…¶ä½¿ç”¨çš„zrender graphicã€‚å¸Œæœ›å’Œå°ä¼™ä¼´ä»¬ä¸€èµ·è¿›æ­¥å‘€ï¼ï¼åŠ æ²¹ï¼ï¼ å‰è¨€echartså¯¹Componentçš„å®šä¹‰å‘¢ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯é™¤Serieså¤–çš„å…¶ä»–é…ç½®é¡¹ï¼Œåœ¨è¿™ç¯‡åšæ–‡ä¸­æˆ‘ä»¬å°†æ¢è®¨datazoomï¼ˆåŒºåŸŸç¼©æ”¾ï¼‰ã€visualMapï¼ˆè§†å›¾æ˜ å°„ï¼‰ã€tooltipï¼ˆæç¤ºæ¡†ç»„ä»¶ï¼‰ã€toolboxï¼ˆå·¥å…·æ ï¼‰ã€brushï¼ˆåŒºåŸŸé€‰æ‹©ç»„ä»¶ï¼‰ã€timelineï¼ˆæ—¶é—´è½´ï¼‰ã€graphicï¼ˆåŸç”Ÿå›¾å½¢ç»„ä»¶ï¼‰ã€datasetï¼ˆæ•°æ®é›†ï¼‰ã€markerï¼ˆåŒ…æ‹¬markPointï¼ˆå›¾æ ‡æ ‡æ³¨ï¼‰ã€markLineï¼ˆå›¾è¡¨æ ‡çº¿ï¼‰ã€markAreaï¼ˆå›¾è¡¨æ ‡åŸŸï¼‰ï¼‰è¿™äº›Componentã€‚ ç”¨æˆ·é€šè¿‡ä¼ é€’optionå¯¹è±¡æ¥è®¾ç½®ç›¸åº”çš„Componentã€‚ åŒºåŸŸç¼©æ”¾ DataZoomdataZoomåˆ†ä¸ºinsideå’Œsliderä¸¤ç§ç±»å‹ å…¬å…±æ–‡ä»¶DataZoomModelDataZoomModelé€šè¿‡extendComponentModelæ‰©å±•è‡ªComponent Modelï¼Œé‡å†™äº†defaultOptionå±æ€§ä»¥åŠinitã€mergeOptionç­‰æ–¹æ³•ã€‚ DataZoomViewDataZoomViewé€šè¿‡extendæ‰©å±•è‡ªComponent Viewï¼Œé‡å†™äº†renderæ–¹æ³•å¹¶å®šä¹‰äº†getTargetCoordInfoæ–¹æ³•ã€‚ DataZoomActionDataZoomActionä¸­æ³¨å†Œäº†dataZoom action SliderSliderZoomModelSliderZoomModelé€šè¿‡extendæ‰©å±•è‡ªDataZoomModelï¼Œé‡å†™äº†defaultOptionå±æ€§ SliderZoomViewSliderZoomViewé€šè¿‡extendæ‰©å±•è‡ªDataZoomViewï¼Œé‡å†™äº†renderã€removeã€disposeç­‰æ–¹æ³•ï¼Œä¸»è¦å®ç°ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435render: function (dataZoomModel, ecModel, api, payload) &#123; // è°ƒç”¨DataZoomViewä¸­çš„renderæ–¹æ³• SliderZoomView.superApply(this, 'render', arguments); ... if (!payload || payload.type !== 'dataZoom' || payload.from !== this.uid) &#123; // ç»˜åˆ¶ this._buildView(); &#125; // æ›´æ–° this._updateView();&#125;_buildView: function () &#123; var thisGroup = this.group; thisGroup.removeAll(); this._resetLocation(); this._resetInterval(); var barGroup = this._displayables.barGroup = new graphic.Group(); // ç»˜åˆ¶èƒŒæ™¯ï¼Œé€šè¿‡graphic.Rectç»˜åˆ¶èƒŒæ™¯ï¼ŒåŒ…æ‹¬å¯è§†å±‚ä»¥åŠClick panel this._renderBackground(); // ç»˜åˆ¶handleï¼Œé€šè¿‡graphic.Rectç»˜åˆ¶é€‰æ‹©çš„åŒºåŸŸï¼Œå¹¶ç»‘å®šæ‹–æ‹½ç›¸å…³ä»¥åŠmouseoverã€mouseoutç­‰äº‹ä»¶å¤„ç†å™¨ // é€šè¿‡graphic.Rectç»˜åˆ¶Frame border // é€šè¿‡graphic.createIconåˆ›å»ºhandler å›¾æ ‡ï¼Œå¹¶ç»‘å®šæ‹–æ‹½ç›¸å…³ä»¥åŠmouseoverã€mouseoutç­‰äº‹ä»¶å¤„ç†å™¨ // é€šè¿‡graphic.Textç»˜åˆ¶handleä¸­çš„labelæ•°æ® this._renderHandle(); // é€šè¿‡graphic.PolylineåŠgraphic.Polygonç»˜åˆ¶å‡ºdatazoomä¸‹çš„æ•°æ®ç¼©ç•¥å›¾ this._renderDataShadow(); thisGroup.add(barGroup); this._positionGroup();&#125; InsideInsideZoomModelInsideZoomModelé€šè¿‡extendæ‰©å±•è‡ªDataZoomModelï¼Œé‡å†™äº†defaultOptionå±æ€§ã€‚ InsideZoomViewInsideZoomViewé€šè¿‡extendæ‰©å±•è‡ªDataZoomViewï¼Œé‡å†™äº†initã€renderã€disposeç­‰æ–¹æ³•ï¼Œä¸»è¦å®ç°ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819render: function (dataZoomModel, ecModel, api, payload) &#123; // è°ƒç”¨DataZoomViewä¸­çš„renderæ–¹æ³• InsideZoomView.superApply(this, 'render', arguments); this._range = dataZoomModel.getPercentRange(); // Reset controllers. zrUtil.each(this.getTargetCoordInfo(), function (coordInfoList, coordSysName) &#123; ... zrUtil.each(coordInfoList, function (coordInfo) &#123; var coordModel = coordInfo.model; var getRange = &#123;&#125;; // ç»‘å®španã€zoomã€scrollMoveäº‹ä»¶å¤„ç†å™¨ï¼ŒroamHandlersä¸­å®šä¹‰äº†ç›¸å…³ç±»å‹çš„äº‹ä»¶å¤„ç†å‡½æ•° zrUtil.each(['pan', 'zoom', 'scrollMove'], function (eventName) &#123; getRange[eventName] = bind(roamHandlers[eventName], this, coordInfo, coordSysName); &#125;, this); ... &#125;, this); &#125;, this);&#125; è§†å›¾æ˜ å°„ VisualMapVisualMapåˆ†ä¸ºcontinuousè¿ç»­å‹åŠpiecewiseåˆ†æ®µå‹ä¸¤ä¸ªç±»å‹ å…¬å…±æ–‡ä»¶VisualMapActionVisualMapActionä¸­æ³¨å†Œäº†selectDataRange action VisualMapModelVisualMapModelé€šè¿‡extendComponentModelæ–¹æ³•æ‰©å±•è‡ªComponent Modelï¼Œé‡å†™äº†defaultOptionå±æ€§ä»¥åŠinitã€optionUpdatedç­‰æ–¹æ³•ï¼Œå¹¶å®šä¹‰äº†resetVisualã€formatValueTextç­‰æ–¹æ³•ã€‚ VisualMapViewVisualMapViewé€šè¿‡extendComponentViewæ–¹æ³•æ‰©å±•è‡ªComponent Viewï¼Œé‡å†™äº†initã€renderç­‰æ–¹æ³•ï¼Œå®šä¹‰äº†renderBackgroundæ–¹æ³•ï¼Œä¸»è¦ä»£ç ä¸ºï¼š 1234567891011121314151617181920212223242526render: function (visualMapModel, ecModel, api, payload) &#123; ... // è°ƒç”¨å­ç±»doRenderæ–¹æ³• this.doRender.apply(this, arguments);&#125;renderBackground: function (group) &#123; var visualMapModel = this.visualMapModel; var padding = formatUtil.normalizeCssArray(visualMapModel.get('padding') || 0); var rect = group.getBoundingRect(); // é€šè¿‡graphic.Rectæ¸²æŸ“visualMapèƒŒæ™¯ group.add(new graphic.Rect(&#123; z2: -1, // Lay background rect on the lowest layer. silent: true, shape: &#123; x: rect.x - padding[3], y: rect.y - padding[0], width: rect.width + padding[3] + padding[1], height: rect.height + padding[0] + padding[2] &#125;, style: &#123; fill: visualMapModel.get('backgroundColor'), stroke: visualMapModel.get('borderColor'), lineWidth: visualMapModel.get('borderWidth') &#125; &#125;));&#125; ContinuousContinuousModelContinuousModelé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªVisualMapModelï¼Œé‡å†™äº†defaultOptionå±æ€§ä»¥åŠoptionUpdatedã€resetItemSizeç­‰æ–¹æ³•ï¼Œå¹¶å®šä¹‰äº†completeVisualOptionã€setSelectedã€getSelectedã€getValueStateç­‰æ–¹æ³•ã€‚ ContinuousViewContinuousViewé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªVisualMapViewï¼Œé‡å†™äº†initæ–¹æ³•å¹¶å®šä¹‰äº†doRenderæ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940doRender: function (visualMapModel, ecModel, api, payload) &#123; if (!payload || payload.type !== 'selectDataRange' || payload.from !== this.uid) &#123; this._buildView(); &#125;&#125;_buildView: function () &#123; this.group.removeAll(); var visualMapModel = this.visualMapModel; var thisGroup = this.group; this._orient = visualMapModel.get('orient'); this._useHandle = visualMapModel.get('calculable'); this._resetInterval(); // ç»˜åˆ¶visualMapæ˜ å°„ç»„ä»¶ // 1ï¼‰é€šè¿‡graphic.Polygonç»˜åˆ¶inRangeåŠoutOfRangeå½¢çŠ¶ï¼Œå¹¶ä¸ºinRangeå½¢çŠ¶ç»‘å®šdragç›¸å…³äº‹ä»¶å¤„ç†å™¨ // 2ï¼‰è‹¥userHandleä¸ºtrueï¼Œåˆ™é€šè¿‡graphic.Polygonç»˜åˆ¶handlerï¼Œgraphic.Textç»˜åˆ¶handler label // å¹¶ä¸ºhandlerç»‘å®šdragç›¸å…³æ—¶é—´å¤„ç†å™¨ // 3ï¼‰é€šè¿‡graphic.Polygonç»˜åˆ¶æŒ‡ç¤ºå™¨ï¼Œgraphic.Textç»˜åˆ¶æŒ‡ç¤ºå™¨ label this._renderBar(thisGroup); var dataRangeText = visualMapModel.get('text'); // é€šè¿‡graphic.Textæ¸²æŸ“visualMapé¦–ä¸å°¾å¤„çš„label this._renderEndsText(thisGroup, dataRangeText, 0); this._renderEndsText(thisGroup, dataRangeText, 1); this._updateView(true); // è°ƒç”¨VisualMapViewä¸­çš„renderBackgroundæ–¹æ³• this.renderBackground(thisGroup); // é€šè¿‡graphic.LinearGradientåˆ›å»ºçº¿æ€§æ¸å˜ this._updateView(); // ç»‘å®šmouseoveråŠmouseoutç›¸å…³çš„äº‹ä»¶å¤„ç†å™¨ // mouseoverï¼šshowIndicator // mouseoutï¼šhideIndicator this._enableHoverLinkToSeries(); this._enableHoverLinkFromSeries(); this.positionGroup(thisGroup);&#125; PiecewisePiecewiseModelPiecewiseModelé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªVisualMapModelï¼Œé‡å†™äº†defaultOptionå±æ€§ä»¥åŠoptionUpdatedç­‰æ–¹æ³•ï¼Œå¹¶å®šä¹‰äº†getPieceListã€getValueStateã€findTargetDataIndicesç­‰æ–¹æ³• PiecewiseViewPiecewiseViewé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªVisualMapViewï¼Œå®šä¹‰äº†doRenderæ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354doRender: function () &#123; ... // é€šè¿‡graphic.Textç»˜åˆ¶ endsText &amp;&amp; this._renderEndsText( thisGroup, endsText[0], itemSize, showLabel, itemAlign ); // viewPieceListæ•°æ®å¤„ç†çš„å®ç°åœ¨PiecewiseModelä¸­resetMethods // éå†viewPieceListè°ƒç”¨renderItemè¿›è¡Œç‰‡æ®µvisualçš„ç»˜åˆ¶ zrUtil.each(viewData.viewPieceList, renderItem, this); endsText &amp;&amp; this._renderEndsText( thisGroup, endsText[1], itemSize, showLabel, itemAlign ); layout.box( visualMapModel.get('orient'), thisGroup, visualMapModel.get('itemGap') ); // è°ƒç”¨VisualMapViewä¸­çš„renderBackgroundæ–¹æ³• this.renderBackground(thisGroup); this.positionGroup(thisGroup); function renderItem(item) &#123; var piece = item.piece; var itemGroup = new graphic.Group(); // ç»‘å®šonclickæ—¶çš„äº‹ä»¶å¤„ç†å™¨ itemGroup.onclick = zrUtil.bind(this._onItemClick, this, piece); // ç»‘å®šmouseoverã€mouseoutç›¸å…³çš„äº‹ä»¶å¤„ç†å™¨ this._enableHoverLink(itemGroup, item.indexInModelPieceList); var representValue = visualMapModel.getRepresentValue(piece); // é€šè¿‡createSymbolæ–¹æ³•åˆ›å»ºsymbol this._createItemSymbol( itemGroup, representValue, [0, 0, itemSize[0], itemSize[1]] ); if (showLabel) &#123; var visualState = this.visualMapModel.getValueState(representValue); // æ¸²æŸ“æ–‡æœ¬ itemGroup.add(new graphic.Text(&#123; style: &#123; x: itemAlign === 'right' ? -textGap : itemSize[0] + textGap, y: itemSize[1] / 2, text: piece.text, textVerticalAlign: 'middle', textAlign: itemAlign, textFont: textFont, textFill: textFill, opacity: visualState === 'outOfRange' ? 0.5 : 1 &#125; &#125;)); &#125; thisGroup.add(itemGroup); &#125;&#125; æç¤ºæ¡† TooltipTooltip.jsTooltip.jsä¸­æ³¨å†Œäº†showTipåŠhideTip actionï¼Œtriggerå¤„ç†å™¨è°ƒç”¨TooltipViewä¸­å®šä¹‰çš„manuallyShowTipåŠmanuallyHideTipæ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617echarts.registerAction( &#123; type: 'showTip', event: 'showTip', update: 'tooltip:manuallyShowTip' &#125;, function () &#123;&#125;);echarts.registerAction( &#123; type: 'hideTip', event: 'hideTip', update: 'tooltip:manuallyHideTip' &#125;, function () &#123;&#125;); TooltipModelTooltipModelé€šè¿‡extendComponentModelæ‰©å±•è‡ªComponent Modelï¼Œé‡å†™äº†defaultOptionå±æ€§ã€‚ TooltipViewTooltipViewé€šè¿‡extendComponentViewæ‰©å±•è‡ªComponent Viewï¼Œé‡å†™äº†initã€renderç­‰æ–¹æ³•ï¼Œå¹¶å®šä¹‰äº†manuallyShowTipã€manuallyHideTipç­‰æ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657init: function (ecModel, api) &#123; ... var tooltipModel = ecModel.getComponent('tooltip'); var renderMode = tooltipModel.get('renderMode'); this._renderMode = getTooltipRenderMode(renderMode); var tooltipContent; // è®¾ç½®TooltipContentå†…å®¹ // TooltipContent ä¸­ç»‘å®šäº†mouseenterã€mousemoveã€mouseleaveç­‰äº‹ä»¶å¤„ç†å™¨ï¼Œ // TooltipRichContent ä¸­ç»‘å®šäº†mouseoverã€mouseoutç­‰äº‹ä»¶å¤„ç†å™¨ // TooltipContent&amp;TooltipRichContent å®šä¹‰äº†setContentã€showã€hideã€updateã€getSizeç­‰æ–¹æ³• if (this._renderMode === 'html') &#123; tooltipContent = new TooltipContent(api.getDom(), api); this._newLine = '&lt;br/&gt;'; &#125; else &#123; tooltipContent = new TooltipRichContent(api); this._newLine = '\n'; &#125; this._tooltipContent = tooltipContent;&#125;render: function (tooltipModel, ecModel, api) &#123; ... var tooltipContent = this._tooltipContent; // è°ƒç”¨tooltipContentçš„updateæ–¹æ³• tooltipContent.update(); tooltipContent.setEnterable(tooltipModel.get('enterable')); // åˆå§‹åŒ–tooltipè§¦å‘ç›‘å¬å™¨ â€œtriggerOnâ€ this._initGlobalListener(); // è°ƒç”¨manuallyShowTipå±•ç¤ºtooltip // manuallyShowTipä¸­è°ƒç”¨äº†tryShowæ–¹æ³• this._keepShow();&#125;_tryShow: function (e, dispatchAction) &#123; ... if (dataByCoordSys &amp;&amp; dataByCoordSys.length) &#123; // å±•ç¤ºaxisçš„tooltipä¿¡æ¯ // è°ƒç”¨formatTooltipæ–¹æ³•æ¸²æŸ“Tooltipä¸­çš„å±•ç¤ºå†…å®¹ï¼ŒåŒ…æ‹¬åœ†ç‚¹å’Œæ•°æ®ä¿¡æ¯ this._showAxisTooltip(dataByCoordSys, e); &#125; else if (el &amp;&amp; el.dataIndex != null) &#123; // å±•ç¤ºseries tooltipä¿¡æ¯ // è°ƒç”¨formatTooltipæ–¹æ³•æ¸²æŸ“Tooltipä¸­çš„å±•ç¤ºå†…å®¹ï¼ŒåŒ…æ‹¬åœ†ç‚¹å’Œæ•°æ®ä¿¡æ¯ this._lastDataByCoordSys = null; this._showSeriesItemTooltip(e, el, dispatchAction); &#125; else if (el &amp;&amp; el.tooltip) &#123; // å±•ç¤ºComponentä¸‹çš„tooltipä¿¡æ¯ this._lastDataByCoordSys = null; this._showComponentItemTooltip(e, el, dispatchAction); &#125; else &#123; this._lastDataByCoordSys = null; this._hide(dispatchAction); &#125;&#125; å·¥å…·æ  ToolboxToolboxModelToolboxModelé€šè¿‡extendComponentModelæ–¹æ³•æ‰©å±•è‡ªComponent Modelï¼Œé‡å†™äº†defaultOptionå±æ€§ä»¥åŠoptionUpdatedæ–¹æ³•ï¼ˆmerge featureä¸‹çš„optionï¼‰ ToolboxViewToolboxViewé€šè¿‡extendComponentViewæ‰©å±•è‡ªComponent Viewï¼Œé‡å†™äº†renderã€removeä»¥åŠdisposeç­‰æ–¹æ³•ï¼Œå¹¶å®šä¹‰äº†updateViewæ–¹æ³•ï¼ˆè°ƒç”¨featureä¸‹çš„updateViewï¼‰ã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485render: function (toolboxModel, ecModel, api, payload) &#123; var group = this.group; group.removeAll(); if (!toolboxModel.get('show')) &#123; return; &#125; var itemSize = +toolboxModel.get('itemSize'); var featureOpts = toolboxModel.get('feature') || &#123;&#125;; var features = this._features || (this._features = &#123;&#125;); var featureNames = []; zrUtil.each(featureOpts, function (opt, name) &#123; featureNames.push(name); &#125;); (new DataDiffer(this._featureNames || [], featureNames)) .add(processFeature) .update(processFeature) .remove(zrUtil.curry(processFeature, null)) .execute(); this._featureNames = featureNames; function processFeature(newIndex, oldIndex) &#123; var featureName = featureNames[newIndex]; var oldName = featureNames[oldIndex]; var featureOpt = featureOpts[featureName]; var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel); var feature; if (featureName &amp;&amp; !oldName) &#123; // Create if (isUserFeatureName(featureName)) &#123; feature = &#123; model: featureModel, onclick: featureModel.option.onclick, featureName: featureName &#125;; &#125; else &#123; var Feature = featureManager.get(featureName); if (!Feature) &#123; return; &#125; feature = new Feature(featureModel, ecModel, api); &#125; features[featureName] = feature; &#125; else &#123; feature = features[oldName]; // If feature does not exsit. if (!feature) &#123; return; &#125; feature.model = featureModel; feature.ecModel = ecModel; feature.api = api; &#125; ... // é€šè¿‡graphic.createIconåˆ›å»ºå·¥å…·å›¾æ ‡ï¼Œç»‘å®šmouseoverã€mouseoutåŠclickäº‹ä»¶å¤„ç†å™¨ createIconPaths(featureModel, feature, featureName); featureModel.setIconStatus = function (iconName, status) &#123; var option = this.option; var iconPaths = this.iconPaths; option.iconStatus = option.iconStatus || &#123;&#125;; option.iconStatus[iconName] = status; // FIXME iconPaths[iconName] &amp;&amp; iconPaths[iconName].trigger(status); &#125;; if (feature.render) &#123; // è°ƒç”¨ç›¸åº”featureçš„renderæ–¹æ³• feature.render(featureModel, ecModel, api, payload); &#125; &#125; listComponentHelper.layout(group, toolboxModel, api); // æ¸²æŸ“èƒŒæ™¯ group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel)); // å¤„ç†icon titleçš„ä½ç½®ï¼Œé¿å…titleæº¢å‡ºå±å¹• group.eachChild(function (icon) &#123; ... &#125;);&#125; FeaturefeatureManagerä¸­å®šä¹‰äº†æ³¨å†Œä»¥åŠè·å–featureçš„æ–¹æ³•ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š 123456export function register(name, ctor) &#123; features[name] = ctor;&#125;export function get(name) &#123; return features[name];&#125; SaveAsImageSaveAsImageï¼ˆä¿å­˜ä¸ºå›¾ç‰‡ï¼‰å®šä¹‰äº†defaultOptionå±æ€§ä»¥åŠonclickäº‹ä»¶å¤„ç†å™¨ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849var proto = SaveAsImage.prototype;proto.onclick = function (ecModel, api) &#123; var model = this.model; var title = model.get('name') || ecModel.get('title.0.text') || 'echarts'; var $a = document.createElement('a'); var type = model.get('type', true) || 'png'; $a.download = title + '.' + type; $a.target = '_blank'; var url = api.getConnectedDataURL(&#123; type: type, backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff', excludeComponents: model.get('excludeComponents'), pixelRatio: model.get('pixelRatio') &#125;); $a.href = url; // Chrome and Firefox if (typeof MouseEvent === 'function' &amp;&amp; !env.browser.ie &amp;&amp; !env.browser.edge) &#123; var evt = new MouseEvent('click', &#123; view: window, bubbles: true, cancelable: false &#125;); $a.dispatchEvent(evt); &#125; // IEæµè§ˆå™¨ else &#123; if (window.navigator.msSaveOrOpenBlob) &#123; var bstr = atob(url.split(',')[1]); var n = bstr.length; var u8arr = new Uint8Array(n); while (n--) &#123; u8arr[n] = bstr.charCodeAt(n); &#125; var blob = new Blob([u8arr]); window.navigator.msSaveOrOpenBlob(blob, title + '.' + type); &#125; else &#123; var lang = model.get('lang'); var html = '' + '&lt;body style="margin:0;"&gt;' + '&lt;img src="' + url + '" style="max-width:100%;" title="' + ((lang &amp;&amp; lang[0]) || '') + '" /&gt;' + '&lt;/body&gt;'; var tab = window.open(); tab.document.write(html); &#125; &#125;&#125;; MagicTypeMagicTypeï¼ˆåŠ¨æ€ç±»å‹åˆ‡æ¢ï¼‰å®šä¹‰äº†defaultOptionå±æ€§ï¼Œä»¥åŠgetIconsã€onclickæ–¹æ³•ï¼Œå¹¶æ³¨å†Œäº†changeMagicType actionï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145var proto = MagicType.prototype;proto.getIcons = function () &#123; var model = this.model; var availableIcons = model.get('icon'); var icons = &#123;&#125;; zrUtil.each(model.get('type'), function (type) &#123; if (availableIcons[type]) &#123; icons[type] = availableIcons[type]; &#125; &#125;); return icons;&#125;;// series optionç”Ÿæˆå™¨var seriesOptGenreator = &#123; 'line': function (seriesType, seriesId, seriesModel, model) &#123; if (seriesType === 'bar') &#123; return zrUtil.merge(&#123; id: seriesId, type: 'line', // Preserve data related option data: seriesModel.get('data'), stack: seriesModel.get('stack'), markPoint: seriesModel.get('markPoint'), markLine: seriesModel.get('markLine') &#125;, model.get('option.line') || &#123;&#125;, true); &#125; &#125;, 'bar': function (seriesType, seriesId, seriesModel, model) &#123; if (seriesType === 'line') &#123; return zrUtil.merge(&#123; id: seriesId, type: 'bar', // Preserve data related option data: seriesModel.get('data'), stack: seriesModel.get('stack'), markPoint: seriesModel.get('markPoint'), markLine: seriesModel.get('markLine') &#125;, model.get('option.bar') || &#123;&#125;, true); &#125; &#125;, 'stack': function (seriesType, seriesId, seriesModel, model) &#123; if (seriesType === 'line' || seriesType === 'bar') &#123; return zrUtil.merge(&#123; id: seriesId, stack: '__ec_magicType_stack__' &#125;, model.get('option.stack') || &#123;&#125;, true); &#125; &#125;, 'tiled': function (seriesType, seriesId, seriesModel, model) &#123; if (seriesType === 'line' || seriesType === 'bar') &#123; return zrUtil.merge(&#123; id: seriesId, stack: '' &#125;, model.get('option.tiled') || &#123;&#125;, true); &#125; &#125;&#125;;var radioTypes = [ ['line', 'bar'], ['stack', 'tiled']];proto.onclick = function (ecModel, api, type) &#123; var model = this.model; var seriesIndex = model.get('seriesIndex.' + type); // Not supported magicType if (!seriesOptGenreator[type]) &#123; return; &#125; var newOption = &#123; series: [] &#125;; // ç”Ÿæˆæ–°ç±»å‹çš„series var generateNewSeriesTypes = function (seriesModel) &#123; var seriesType = seriesModel.subType; var seriesId = seriesModel.id; var newSeriesOpt = seriesOptGenreator[type]( seriesType, seriesId, seriesModel, model ); if (newSeriesOpt) &#123; // PENDING If merge original option? zrUtil.defaults(newSeriesOpt, seriesModel.option); newOption.series.push(newSeriesOpt); &#125; // Modify boundaryGap var coordSys = seriesModel.coordinateSystem; if (coordSys &amp;&amp; coordSys.type === 'cartesian2d' &amp;&amp; (type === 'line' || type === 'bar')) &#123; var categoryAxis = coordSys.getAxesByScale('ordinal')[0]; if (categoryAxis) &#123; var axisDim = categoryAxis.dim; var axisType = axisDim + 'Axis'; var axisModel = ecModel.queryComponents(&#123; mainType: axisType, index: seriesModel.get(name + 'Index'), id: seriesModel.get(name + 'Id') &#125;)[0]; var axisIndex = axisModel.componentIndex; newOption[axisType] = newOption[axisType] || []; for (var i = 0; i &lt;= axisIndex; i++) &#123; newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || &#123;&#125;; &#125; newOption[axisType][axisIndex].boundaryGap = type === 'bar'; &#125; &#125; &#125;; zrUtil.each(radioTypes, function (radio) &#123; if (zrUtil.indexOf(radio, type) &gt;= 0) &#123; zrUtil.each(radio, function (item) &#123; model.setIconStatus(item, 'normal'); &#125;); &#125; &#125;); // è®¾ç½®iconçš„çŠ¶æ€ model.setIconStatus(type, 'emphasis'); // ä¸ºæ¯ä¸ªseriesç”Ÿæˆæ–°option ecModel.eachComponent( &#123; mainType: 'series', query: seriesIndex == null ? null : &#123; seriesIndex: seriesIndex &#125; &#125;, generateNewSeriesTypes ); api.dispatchAction(&#123; type: 'changeMagicType', currentType: type, newOption: newOption &#125;);&#125;;echarts.registerAction(&#123; type: 'changeMagicType', event: 'magicTypeChanged', update: 'prepareAndUpdate'&#125;, function (payload, ecModel) &#123; // åˆå¹¶option ecModel.mergeOption(payload.newOption);&#125;); DataViewDataViewï¼ˆæ•°æ®è§†å›¾å·¥å…·ï¼‰å®šä¹‰äº†defaultOptionå±æ€§åŠonclickã€removeã€disposeæ–¹æ³•ï¼Œå¹¶æ³¨å†Œäº†changeDataView actionï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131DataView.prototype.onclick = function (ecModel, api) &#123; var container = api.getDom(); var model = this.model; if (this._dom) &#123; container.removeChild(this._dom); &#125; var root = document.createElement('div'); root.style.cssText = 'position:absolute;left:5px;top:5px;bottom:5px;right:5px;'; root.style.backgroundColor = model.get('backgroundColor') || '#fff'; // åˆ›å»ºelement var header = document.createElement('h4'); var lang = model.get('lang') || []; header.innerHTML = lang[0] || model.get('title'); header.style.cssText = 'margin: 10px 20px;'; header.style.color = model.get('textColor'); var viewMain = document.createElement('div'); var textarea = document.createElement('textarea'); viewMain.style.cssText = 'display:block;width:100%;overflow:auto;'; var optionToContent = model.get('optionToContent'); var contentToOption = model.get('contentToOption'); // è·å–æ•°æ® var result = getContentFromModel(ecModel); if (typeof optionToContent === 'function') &#123; var htmlOrDom = optionToContent(api.getOption()); if (typeof htmlOrDom === 'string') &#123; viewMain.innerHTML = htmlOrDom; &#125; else if (zrUtil.isDom(htmlOrDom)) &#123; viewMain.appendChild(htmlOrDom); &#125; &#125; else &#123; // é»˜è®¤ä½¿ç”¨textarea viewMain.appendChild(textarea); textarea.readOnly = model.get('readOnly'); textarea.style.cssText = 'width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;'; textarea.style.color = model.get('textColor'); textarea.style.borderColor = model.get('textareaBorderColor'); textarea.style.backgroundColor = model.get('textareaColor'); textarea.value = result.value; &#125; var blockMetaList = result.meta; // åˆ›å»ºæŒ‰é’®å®¹å™¨ var buttonContainer = document.createElement('div'); buttonContainer.style.cssText = 'position:absolute;bottom:0;left:0;right:0;'; var buttonStyle = 'float:right;margin-right:20px;border:none;' + 'cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px'; // åˆ›å»ºå…³é—­ä»¥åŠåˆ·æ–°æŒ‰é’® var closeButton = document.createElement('div'); var refreshButton = document.createElement('div'); buttonStyle += ';background-color:' + model.get('buttonColor'); buttonStyle += ';color:' + model.get('buttonTextColor'); var self = this; ... // æ·»åŠ clickäº‹ä»¶å¤„ç†å™¨ eventTool.addEventListener(closeButton, 'click', close); eventTool.addEventListener(refreshButton, 'click', function () &#123; var newOption; try &#123; if (typeof contentToOption === 'function') &#123; newOption = contentToOption(viewMain, api.getOption()); &#125; else &#123; newOption = parseContents(textarea.value, blockMetaList); &#125; &#125; catch (e) &#123; close(); throw new Error('Data view format error ' + e); &#125; if (newOption) &#123; api.dispatchAction(&#123; type: 'changeDataView', newOption: newOption &#125;); &#125; close(); &#125;); closeButton.innerHTML = lang[1]; refreshButton.innerHTML = lang[2]; refreshButton.style.cssText = buttonStyle; closeButton.style.cssText = buttonStyle; !model.get('readOnly') &amp;&amp; buttonContainer.appendChild(refreshButton); buttonContainer.appendChild(closeButton); // ä½¿ç”¨tabé”®è¿›è¡Œæ•°æ®åˆ†å‰² eventTool.addEventListener(textarea, 'keydown', function (e) &#123; if ((e.keyCode || e.which) === 9) &#123; var val = this.value; var start = this.selectionStart; var end = this.selectionEnd; // set textarea value to: text before caret + tab + text after caret this.value = val.substring(0, start) + ITEM_SPLITER + val.substring(end); // put caret at right position again this.selectionStart = this.selectionEnd = start + 1; // prevent the focus lose eventTool.stop(e); &#125; &#125;); root.appendChild(header); root.appendChild(viewMain); root.appendChild(buttonContainer); viewMain.style.height = (container.clientHeight - 80) + 'px'; container.appendChild(root); this._dom = root;&#125;;DataView.prototype.remove = function (ecModel, api) &#123; this._dom &amp;&amp; api.getDom().removeChild(this._dom);&#125;;DataView.prototype.dispose = function (ecModel, api) &#123; this.remove(ecModel, api);&#125;; DataZoomDataZoomï¼ˆæ•°æ®åŒºåŸŸç¼©æ”¾ï¼‰è®¾ç½®defaultOptionå±æ€§ï¼Œå®šä¹‰äº†renderã€onclickã€removeä»¥åŠdisposeç­‰æ–¹æ³•ã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930proto.render = function (featureModel, ecModel, api, payload) &#123; this.model = featureModel; this.ecModel = ecModel; this.api = api; // ä½¿ç”¨BrushTargetManagerç®¡ç†åŒºåŸŸé€‰æ‹© updateZoomBtnStatus(featureModel, ecModel, this, payload, api); // æ¸²æŸ“è¿˜åŸæŒ‰é’®çš„iconStatus updateBackBtnStatus(featureModel, ecModel);&#125;;proto.onclick = function (ecModel, api, type) &#123; handlers[type].call(this);&#125;;var handlers = &#123; zoom: function () &#123; var nextActive = !this._isZoomActive; this.api.dispatchAction(&#123; type: 'takeGlobalCursor', key: 'dataZoomSelect', dataZoomSelectActive: nextActive &#125;); &#125;, back: function () &#123; this._dispatchZoomAction(history.pop(this.ecModel)); &#125;&#125;; RestoreRestoreï¼ˆé…ç½®é¡¹è¿˜åŸï¼‰å®šä¹‰äº†defaultOptionå±æ€§ä»¥åŠonclickæ–¹æ³•ï¼Œå¹¶æ³¨å†Œäº†restore actionï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910var proto = Restore.prototype;proto.onclick = function (ecModel, api, type) &#123; history.clear(ecModel); api.dispatchAction(&#123; type: 'restore', from: this.uid &#125;);&#125;; Brushbrushï¼ˆé€‰æ¡†ç»„ä»¶çš„æ§åˆ¶æŒ‰é’®ï¼‰å®šä¹‰äº†defaultOptionå±æ€§ä»¥åŠonclickã€updateViewã€getIconsç­‰æ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930var proto = Brush.prototype;proto.onclick = function (ecModel, api, type) &#123; var brushType = this._brushType; var brushMode = this._brushMode; if (type === 'clear') &#123; api.dispatchAction(&#123; type: 'axisAreaSelect', intervals: [] &#125;); api.dispatchAction(&#123; type: 'brush', command: 'clear', areas: [] &#125;); &#125; else &#123; api.dispatchAction(&#123; type: 'takeGlobalCursor', key: 'brush', brushOption: &#123; brushType: type === 'keep' ? brushType : (brushType === type ? false : type), brushMode: type === 'keep' ? (brushMode === 'multiple' ? 'single' : 'multiple') : brushMode &#125; &#125;); &#125;&#125;; åŒºåŸŸé€‰æ‹©ç»„ä»¶ BrushBrushModelBrushModelé€šè¿‡extendComponentModelæ–¹æ³•æ‰©å±•è‡ªComponent Modelï¼Œé‡å†™äº†defaultOptionå±æ€§ä»¥åŠoptionUpdatedæ–¹æ³•ï¼Œå¹¶å®šä¹‰äº†setAreasã€setBrushOptionç­‰æ–¹æ³•ã€‚ BrushViewBrushViewé€šè¿‡extendComponentViewæ–¹æ³•æ‰©å±•è‡ªComponent Viewï¼Œé‡å†™äº†initã€renderã€disposeç­‰æ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456789101112init: function (ecModel, api) &#123; ... // ç»‘å®š_onBrushäº‹ä»¶ (this._brushController = new BrushController(api.getZr())) .on('brush', zrUtil.bind(this._onBrush, this)) .mount();&#125;,render: function (brushModel) &#123; this.model = brushModel; return updateController.apply(this, arguments);&#125;, BrushActionBrushActionæ³¨å†Œäº†brushã€brushSelectç­‰action Brush.jsBrush.jså³toolboxä¸­Brushçš„å†…å®¹ æ—¶é—´è½´ Timelineé»˜è®¤ä¸ºsliderç±»å‹ TimelineActionTimelineActionæ³¨å†Œäº†timelineChangeã€timelinePlayChangeç­‰action TimelineModelTimelineModelé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªComponent Modelï¼Œé‡å†™äº†defaultOptionå±æ€§ä»¥åŠinitæ–¹æ³•ï¼Œå¹¶å®šä¹‰äº†setCurrentIndexã€getCurrentIndexã€ setPlayStateã€getPlayStateç­‰æ–¹æ³• TimelineViewTimelineViewé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªComponent Modelã€‚ SliderTimelineModelSliderTimelineModelé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªTimelineModelï¼Œé‡å†™äº†defaultOptionå±æ€§ SliderTimelineViewSliderTimelineViewé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªTimelineViewï¼Œé‡å†™äº†initã€renderæ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839render: function (timelineModel, ecModel, api, payload) &#123; this.model = timelineModel; this.api = api; this.ecModel = ecModel; this.group.removeAll(); if (timelineModel.get('show', true)) &#123; // è·å–å¸ƒå±€ä¿¡æ¯ var layoutInfo = this._layout(timelineModel, api); // é€šè¿‡graphic.Groupåˆ›å»ºç»„ var mainGroup = this._createGroup('mainGroup'); var labelGroup = this._createGroup('labelGroup'); // æ–°å»ºnew TimelineAxiså¯¹è±¡å®ä¾‹ var axis = this._axis = this._createAxis(layoutInfo, timelineModel); timelineModel.formatTooltip = function (dataIndex) &#123; return encodeHTML(axis.scale.getLabel(dataIndex)); &#125;; // è°ƒç”¨_renderAxisLineï¼šé€šè¿‡graphic.Lineç»˜åˆ¶è½´çº¿ // è°ƒç”¨_renderAxisTickï¼šé€šè¿‡createSymbolåˆ›å»ºsymbol // è°ƒç”¨_renderControlï¼šé€šè¿‡new BoundingRectæ¥åˆ›å»ºcontrol btnï¼ŒåŒ…æ‹¬prevã€nextã€playåŠstop // è°ƒç”¨_renderCurrentPointerï¼šé€šè¿‡createSymbolåˆ›å»ºpointer symbol each( ['AxisLine', 'AxisTick', 'Control', 'CurrentPointer'], function (name) &#123; this['_render' + name](layoutInfo, mainGroup, axis, timelineModel); &#125;, this ); // é€šè¿‡graphic.Textæ¸²æŸ“axis label this._renderAxisLabel(layoutInfo, labelGroup, axis, timelineModel); this._position(layoutInfo, timelineModel); &#125; // è®¾ç½®å®šæ—¶å™¨ï¼Œå®ç°æ—¶é—´è½´è‡ªåŠ¨æ’­æ”¾æ•ˆæœ this._doPlayStop();&#125;, åŸç”Ÿå›¾å½¢ç»„ä»¶ Graphicgraphic.jsgraphic.jsæ–‡ä»¶ä¸­å®šä¹‰äº†GraphicModelä»¥åŠGraphicView GraphicModelGraphicModelé€šè¿‡extendComponentModelæ‰©å±•è‡ªComponent Modelï¼Œé‡å†™äº†defaultOptionå±æ€§ä»¥åŠmergeOptionã€optionUpdatedç­‰æ–¹æ³• GraphicViewGraphicViewé€šè¿‡extendComponentViewæ‰©å±•è‡ªComponent Viewï¼Œé‡å†™äº†initã€renderæ–¹æ³•ã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364render: function (graphicModel, ecModel, api) &#123; if (graphicModel !== this._lastGraphicModel) &#123; this._clear(); &#125; this._lastGraphicModel = graphicModel; this._updateElements(graphicModel); this._relocate(graphicModel, api);&#125;_updateElements: function (graphicModel) &#123; var elOptionsToUpdate = graphicModel.useElOptionsToUpdate(); if (!elOptionsToUpdate) &#123; return; &#125; var elMap = this._elMap; var rootGroup = this.group; // Top-down tranverse to assign graphic settings to each elements. zrUtil.each(elOptionsToUpdate, function (elOption) &#123; var $action = elOption.$action; var id = elOption.id; var existEl = elMap.get(id); var parentId = elOption.parentId; var targetElParent = parentId != null ? elMap.get(parentId) : rootGroup; var elOptionStyle = elOption.style; if (elOption.type === 'text' &amp;&amp; elOptionStyle) &#123; // In top/bottom mode, textVerticalAlign should not be used, which cause // inaccurately locating. if (elOption.hv &amp;&amp; elOption.hv[1]) &#123; elOptionStyle.textVerticalAlign = elOptionStyle.textBaseline = null; &#125; // Compatible with previous setting: both support fill and textFill, // stroke and textStroke. !elOptionStyle.hasOwnProperty('textFill') &amp;&amp; elOptionStyle.fill &amp;&amp; ( elOptionStyle.textFill = elOptionStyle.fill ); !elOptionStyle.hasOwnProperty('textStroke') &amp;&amp; elOptionStyle.stroke &amp;&amp; ( elOptionStyle.textStroke = elOptionStyle.stroke ); &#125; // Remove unnecessary props to avoid potential problems. var elOptionCleaned = getCleanedElOption(elOption); ... // createElï¼šæ ¹æ®graphicTypeåˆ›å»ºå…ƒç´  if (!$action || $action === 'merge') &#123; existEl ? existEl.attr(elOptionCleaned) : createEl(id, targetElParent, elOptionCleaned, elMap); &#125; else if ($action === 'replace') &#123; removeEl(existEl, elMap); createEl(id, targetElParent, elOptionCleaned, elMap); &#125; else if ($action === 'remove') &#123; removeEl(existEl, elMap); &#125; ... &#125;);&#125; æ•°æ®é›† Datasetdatasetdatasetä¸­å®šä¹‰äº†Model&amp;View Modelï¼š é€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªComponent Modelï¼Œé‡å†™äº†defaultOptionå±æ€§ä»¥åŠoptionUpdatedæ–¹æ³• Viewï¼š é€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªComponent View å›¾è¡¨æ ‡è¯† Markerå…¬å…±æ–‡ä»¶MarkerModelMarkerModelé€šè¿‡extendComponentModelæ–¹æ³•æ‰©å±•è‡ªComponent Modelï¼Œé‡å†™äº†initã€mergeOptionã€formatTooltipã€getDataåŠsetDataç­‰æ–¹æ³• MarkerViewMarkerViewé€šè¿‡extendComponentViewæ–¹æ³•æ‰©å±•è‡ªComponent Viewï¼Œé‡å†™äº†initã€renderç­‰æ–¹æ³•å¹¶å®šä¹‰äº†renderSeriesæ–¹æ³•ï¼ˆå­ç±»ä¸­é‡å†™ï¼‰ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617render: function (markerModel, ecModel, api) &#123; var markerGroupMap = this.markerGroupMap; markerGroupMap.each(function (item) &#123; item.__keep = false; &#125;); var markerModelKey = this.type + 'Model'; // è°ƒç”¨å­ç±»çš„renderSeriesæ–¹æ³• ecModel.eachSeries(function (seriesModel) &#123; var markerModel = seriesModel[markerModelKey]; markerModel &amp;&amp; this.renderSeries(seriesModel, markerModel, ecModel, api); &#125;, this); markerGroupMap.each(function (item) &#123; !item.__keep &amp;&amp; this.group.remove(item.group); &#125;, this);&#125; å›¾è¡¨æ ‡çº¿ MarkLineMarkLineModelMarkLineModelé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªMarkerModelï¼Œé‡å†™äº†defaultOptionå±æ€§ MarkLineViewMarkLineViewé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªMarkerViewï¼Œé‡å†™äº†renderSeriesæ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556renderSeries: function (seriesModel, mlModel, ecModel, api) &#123; var coordSys = seriesModel.coordinateSystem; var seriesId = seriesModel.id; var seriesData = seriesModel.getData(); var lineDrawMap = this.markerGroupMap; // åˆ›å»ºLineDrawå¯¹è±¡ï¼ˆç»˜åˆ¶lineï¼‰å®ä¾‹ var lineDraw = lineDrawMap.get(seriesId) || lineDrawMap.set(seriesId, new LineDraw()); this.group.add(lineDraw.group); // å¤„ç†dataæ•°æ®ï¼Œå¹¶è¿”å› var mlData = createList(coordSys, seriesModel, mlModel); var fromData = mlData.from; var toData = mlData.to; var lineData = mlData.line; mlModel.__from = fromData; mlModel.__to = toData; // Line data for tooltip and formatter mlModel.setData(lineData); var symbolType = mlModel.get('symbol'); var symbolSize = mlModel.get('symbolSize'); if (!zrUtil.isArray(symbolType)) &#123; symbolType = [symbolType, symbolType]; &#125; if (typeof symbolSize === 'number') &#123; symbolSize = [symbolSize, symbolSize]; &#125; ... // Update visual and layout of line lineData.each(function (idx) &#123; var lineColor = lineData.getItemModel(idx).get('lineStyle.color'); lineData.setItemVisual(idx, &#123; color: lineColor || fromData.getItemVisual(idx, 'color') &#125;); lineData.setItemLayout(idx, [ fromData.getItemLayout(idx), toData.getItemLayout(idx) ]); lineData.setItemVisual(idx, &#123; 'fromSymbolSize': fromData.getItemVisual(idx, 'symbolSize'), 'fromSymbol': fromData.getItemVisual(idx, 'symbol'), 'toSymbolSize': toData.getItemVisual(idx, 'symbolSize'), 'toSymbol': toData.getItemVisual(idx, 'symbol') &#125;); &#125;); // æ ¹æ®lineDataç»˜åˆ¶line lineDraw.updateData(lineData); ... lineDraw.__keep = true; lineDraw.group.silent = mlModel.get('silent') || seriesModel.get('silent');&#125; å›¾æ ‡æ ‡æ³¨ MarkPointMarkPointModelMarkPointModelé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªMarkerModelï¼Œé‡å†™äº†defaultOptionå±æ€§ MarkPointViewMarkPointViewé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªMarkerViewï¼Œé‡å†™äº†renderSeriesæ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142renderSeries: function (seriesModel, mpModel, ecModel, api) &#123; var coordSys = seriesModel.coordinateSystem; var seriesId = seriesModel.id; var seriesData = seriesModel.getData(); var symbolDrawMap = this.markerGroupMap; // åˆ›å»ºSymbolDrawå¯¹è±¡ï¼ˆç»˜åˆ¶Symbolï¼‰å®ä¾‹ var symbolDraw = symbolDrawMap.get(seriesId) || symbolDrawMap.set(seriesId, new SymbolDraw()); var mpData = createList(coordSys, seriesModel, mpModel); // FIXME mpModel.setData(mpData); updateMarkerLayout(mpModel.getData(), seriesModel, api); mpData.each(function (idx) &#123; var itemModel = mpData.getItemModel(idx); var symbolSize = itemModel.getShallow('symbolSize'); if (typeof symbolSize === 'function') &#123; // FIXME è¿™é‡Œä¸å…¼å®¹ ECharts 2.xï¼Œ2.x è²Œä¼¼å‚æ•°æ˜¯æ•´ä¸ªæ•°æ®ï¼Ÿ symbolSize = symbolSize( mpModel.getRawValue(idx), mpModel.getDataParams(idx) ); &#125; mpData.setItemVisual(idx, &#123; symbolSize: symbolSize, color: itemModel.get('itemStyle.color') || seriesData.getVisual('color'), symbol: itemModel.getShallow('symbol') &#125;); &#125;); // mpDataç»˜åˆ¶Symbol symbolDraw.updateData(mpData); this.group.add(symbolDraw.group); ... symbolDraw.__keep = true; symbolDraw.group.silent = mpModel.get('silent') || seriesModel.get('silent');&#125; å›¾è¡¨æ ‡åŸŸ MarkAreaMarkAreaModelMarkAreaModelé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªMarkerModelï¼Œé‡å†™äº†defaultOptionå±æ€§ MarkAreaViewMarkAreaViewé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªMarkerViewï¼Œé‡å†™äº†renderSeriesæ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182renderSeries: function (seriesModel, maModel, ecModel, api) &#123; var coordSys = seriesModel.coordinateSystem; var seriesId = seriesModel.id; var seriesData = seriesModel.getData(); var areaGroupMap = this.markerGroupMap; // åˆ›å»ºgroup var polygonGroup = areaGroupMap.get(seriesId) || areaGroupMap.set(seriesId, &#123;group: new graphic.Group()&#125;); this.group.add(polygonGroup.group); polygonGroup.__keep = true; // å¤„ç†æ•°æ® var areaData = createList(coordSys, seriesModel, maModel); ... areaData.diff(polygonGroup.__data) .add(function (idx) &#123; // é€šè¿‡graphic.Polygonåˆ›å»ºå…ƒç´  var polygon = new graphic.Polygon(&#123; shape: &#123; points: areaData.getItemLayout(idx) &#125; &#125;); areaData.setItemGraphicEl(idx, polygon); polygonGroup.group.add(polygon); &#125;) .update(function (newIdx, oldIdx) &#123; // æ›´æ–° var polygon = polygonGroup.__data.getItemGraphicEl(oldIdx); graphic.updateProps(polygon, &#123; shape: &#123; points: areaData.getItemLayout(newIdx) &#125; &#125;, maModel, newIdx); polygonGroup.group.add(polygon); areaData.setItemGraphicEl(newIdx, polygon); &#125;) .remove(function (idx) &#123; var polygon = polygonGroup.__data.getItemGraphicEl(idx); polygonGroup.group.remove(polygon); &#125;) .execute(); areaData.eachItemGraphicEl(function (polygon, idx) &#123; // è®¾ç½®æ ·å¼ var itemModel = areaData.getItemModel(idx); var labelModel = itemModel.getModel('label'); var labelHoverModel = itemModel.getModel('emphasis.label'); var color = areaData.getItemVisual(idx, 'color'); polygon.useStyle( zrUtil.defaults( itemModel.getModel('itemStyle').getItemStyle(), &#123; fill: colorUtil.modifyAlpha(color, 0.4), stroke: color &#125; ) ); polygon.hoverStyle = itemModel.getModel('emphasis.itemStyle').getItemStyle(); graphic.setLabelStyle( polygon.style, polygon.hoverStyle, labelModel, labelHoverModel, &#123; labelFetcher: maModel, labelDataIndex: idx, defaultText: areaData.getName(idx) || '', isRectText: true, autoColor: color &#125; ); graphic.setHoverStyle(polygon, &#123;&#125;); polygon.dataModel = maModel; &#125;); polygonGroup.__data = areaData; polygonGroup.group.silent = maModel.get('silent') || seriesModel.get('silent');&#125; æ€»ç»“è¿™ç¯‡åšæ–‡ç®€å•ä»‹ç»äº†DataZoomã€VisualMapã€Tooltipã€Toolboxã€Brushã€Timelineã€Graphicä»¥åŠMarkerç­‰ç»„ä»¶çš„æ¸²æŸ“ç»†èŠ‚ï¼Œåˆ°è¿™é‡Œæˆ‘ä»¬å¯¹äºEchartsç»„ä»¶çš„æ¸²æŸ“åˆ†æå·²ç»å‘Šä¸€æ®µè½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†è¿›å…¥Serieså³å›¾è¡¨çš„æ¸²æŸ“è¿‡ç¨‹åˆ†æé˜¶æ®µã€‚ å¸Œæœ›èƒ½å¤Ÿè·Ÿå°ä¼™ä¼´ä»¬ä¸€èµ·è¿›æ­¥å‘€ï¼ç»§ç»­åŠ æ²¹ï¼ï¼]]></content>
      <categories>
        <category>echarts</category>
      </categories>
      <tags>
        <tag>echartsæºç è§£è¯»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[echartsæºç è§£è¯»ã€Šä¸‰ã€‹ï¼šechartsæºç ä¹‹Componentåˆ†æ]]></title>
    <url>%2F2019%2F05%2F22%2Fecharts-3%2F</url>
    <content type="text"><![CDATA[åˆ†æå®Œechartsç®€å•çš„ç»“æ„ä¹‹åï¼Œæˆ‘ä»¬å°±è¿›å…¥åˆ°äº†Componentæºç è§£è¯»ï¼Œåœ¨è¿™ç¯‡åšæ–‡ä¸­ï¼Œæˆ‘å°†ä¸»è¦ä»‹ç»å„Componentçš„æ¸²æŸ“è¿‡ç¨‹ä»¥åŠå…¶ä½¿ç”¨çš„zrender graphicã€‚å¸Œæœ›å’Œå°ä¼™ä¼´ä»¬ä¸€èµ·è¿›æ­¥å‘€ï¼ï¼åŠ æ²¹ï¼ï¼ å‰è¨€echartså¯¹Componentçš„å®šä¹‰å‘¢ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯é™¤Serieså¤–çš„å…¶ä»–é…ç½®é¡¹ï¼Œåœ¨è¿™ç¯‡åšæ–‡ä¸­æˆ‘ä»¬å°†æ¢è®¨titleï¼ˆå›¾æ ‡æ ‡é¢˜ï¼‰ã€legendï¼ˆå›¾ä¾‹ç»„ä»¶ï¼‰ã€AxisPointerï¼ˆåæ ‡è½´æŒ‡ç¤ºå™¨ï¼‰ã€åæ ‡ç³»ä»¥åŠåæ ‡è½´è¿™äº›Componentã€‚ ç”¨æˆ·é€šè¿‡ä¼ é€’optionå¯¹è±¡æ¥è®¾ç½®ç›¸åº”çš„Componentã€‚ åœ¨è¿™éƒ¨åˆ†ä¸­echartsé‡‡ç”¨äº†Modelä»¥åŠViewçš„æ¶æ„æ¥ç®¡ç†Componentï¼š Modelï¼šmodel/Component.js ç®¡ç†Componentæ•°æ® Viewï¼šview/Component.js è´Ÿè´£æ¸²æŸ“Componentè§†å›¾ Modelå±‚model/Component.jsã€‚Componentæ‰©å±•è‡ªModelï¼ˆModelæ˜¯Echartsä¸­æœ€åŸºæœ¬çš„å…ƒç´ ï¼Œå…¶å®šä¹‰äº†mergeOptionç­‰æ–¹æ³•ï¼Œæ··åˆäº†LineStyleã€AraeStyleã€ItemStyleä»¥åŠTextStyleï¼‰ï¼Œé‡å†™äº†initåŠmergeOptionç­‰æ–¹æ³•ï¼Œå®šä¹‰äº†mergeDefaultAndThemeã€getDefaultOptionç­‰æ–¹æ³•ä»¥åŠdefaultOptionï¼ˆComponenté»˜è®¤é…ç½®ï¼‰ã€componentIndexç­‰å±æ€§ã€‚ Viewå±‚view/Component.jsã€‚Componentä¸­å®šä¹‰äº†groupç­‰å±æ€§ä»¥åŠinitã€renderã€disposeç­‰æ–¹æ³•ã€‚ å¿«é€Ÿæ‰©å±•åœ¨echartsä¸­å®šä¹‰äº†extendComponentModelä»¥åŠextendComponentViewæ–¹æ³•ï¼Œå¯ä»¥è®©Componentå¯¹Modelä»¥åŠViewè¿›è¡Œå¿«é€Ÿæ‰©å±• 1234567export function extendComponentModel(opts) &#123; return ComponentModel.extend(opts);&#125;export function extendComponentView(opts) &#123; return ComponentView.extend(opts);&#125; Titletitleæ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨echartså›¾è¡¨æ—¶è®¾ç½®çš„æ ‡é¢˜ç»„ä»¶ï¼Œç®€å•çš„ğŸŒ°ï¼š 1234title: &#123; left: 'center', text: 'ä¾‹å­Title',&#125; titleæ–‡ä»¶ä¸­Modeléƒ¨åˆ†é€šè¿‡extendComponentModelæ–¹æ³•æ‰©å±•è‡ªComponent Modelï¼Œé‡å†™äº†defaultOptionå±æ€§ï¼Œç”¨äºè®¾ç½®titleçš„é»˜è®¤optionã€‚ Viewéƒ¨åˆ†é€šè¿‡extendComponentViewæ–¹æ³•æ‰©å±•Component Viewï¼Œé‡å†™äº†renderæ–¹æ³•å¯¹titleè¿›è¡Œæ¸²æŸ“ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990render: function (titleModel, ecModel, api) &#123; ... // é€šè¿‡zrenderçš„Textå›¾å½¢æ–°å»ºæ–‡æœ¬å…ƒç´  var textEl = new graphic.Text(&#123; style: graphic.setTextStyle(&#123;&#125;, textStyleModel, &#123; text: titleModel.get('text'), textFill: textStyleModel.getTextColor() &#125;, &#123;disableBox: true&#125;), z2: 10 &#125;); var textRect = textEl.getBoundingRect(); var subText = titleModel.get('subtext'); // åˆ›å»ºsubTextå…ƒç´  var subTextEl = new graphic.Text(&#123; style: graphic.setTextStyle(&#123;&#125;, subtextStyleModel, &#123; text: subText, textFill: subtextStyleModel.getTextColor(), y: textRect.height + titleModel.get('itemGap'), textVerticalAlign: 'top' &#125;, &#123;disableBox: true&#125;), z2: 10 &#125;); ... group.add(textEl); subText &amp;&amp; group.add(subTextEl); // If no subText, but add subTextEl, there will be an empty line. ... // è®¾å®štitleçš„ä½ç½® if (!textAlign) &#123; // Align left if title is on the left. center and right is same textAlign = titleModel.get('left') || titleModel.get('right'); if (textAlign === 'middle') &#123; textAlign = 'center'; &#125; // Adjust layout by text align if (textAlign === 'right') &#123; layoutRect.x += layoutRect.width; &#125; else if (textAlign === 'center') &#123; layoutRect.x += layoutRect.width / 2; &#125; &#125; if (!textBaseline) &#123; textBaseline = titleModel.get('top') || titleModel.get('bottom'); if (textBaseline === 'center') &#123; textBaseline = 'middle'; &#125; if (textBaseline === 'bottom') &#123; layoutRect.y += layoutRect.height; &#125; else if (textBaseline === 'middle') &#123; layoutRect.y += layoutRect.height / 2; &#125; textBaseline = textBaseline || 'top'; &#125; group.attr('position', [layoutRect.x, layoutRect.y]); var alignStyle = &#123; textAlign: textAlign, textVerticalAlign: textBaseline &#125;; // è®¾ç½®æ–‡æœ¬æ ·å¼ textEl.setStyle(alignStyle); subTextEl.setStyle(alignStyle); // æ¸²æŸ“èƒŒæ™¯ // Get groupRect again because textAlign has been changed groupRect = group.getBoundingRect(); var padding = layoutRect.margin; var style = titleModel.getItemStyle(['color', 'opacity']); style.fill = titleModel.get('backgroundColor'); var rect = new graphic.Rect(&#123; shape: &#123; x: groupRect.x - padding[3], y: groupRect.y - padding[0], width: groupRect.width + padding[1] + padding[3], height: groupRect.height + padding[0] + padding[2], r: titleModel.get('borderRadius') &#125;, style: style, silent: true &#125;); graphic.subPixelOptimizeRect(rect); group.add(rect);&#125; titleæ–‡æœ¬æ¸²æŸ“ä¸»è¦æ˜¯é€šè¿‡zrender graphicä¸­çš„Textè¿›è¡Œæ¸²æŸ“çš„ï¼Œé€šè¿‡zrender Styleä¸­å®šä¹‰çš„setStyleæ–¹æ³•å¯¹å…ƒç´ è¿›è¡Œæ ·å¼è®¾å®šã€‚ Legendlegendä¸ºechartsçš„å›¾ä¾‹ç»„ä»¶ï¼Œç®€å•çš„ğŸŒ°ï¼š 123legend: &#123; data:['æ”¯å‡º','æ”¶å…¥']&#125;, å±•ç¤ºæ•ˆæœå›¾å¦‚ï¼š legendåˆ†ä¸ºä¸¤ç§ï¼šplainï¼ˆå¹³é¢ï¼‰å’Œscrollï¼ˆå¯æ»šåŠ¨ï¼‰ï¼Œæ¥ä¸‹æ¥æˆ‘å°†åˆ†åˆ«è®²è§£ä¸¤ç§ç±»å‹çš„legendæ˜¯å¦‚ä½•ä½œç”¨çš„ã€‚ Plainlegend.plainä¸ºå¹³é¢çš„legendå›¾ä¾‹ç»„ä»¶ï¼Œä¸»è¦åŒ…æ‹¬LegendActionã€LegendModelã€LegendViewæ–‡ä»¶ã€‚ LegendActionlegendActionæ–‡ä»¶ä¸­æ³¨å†Œäº†legendå¯¹å¤–APIï¼š legendToggleSelectã€legendSelectä»¥åŠlegendUnSelectï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314echarts.registerAction( 'legendToggleSelect', 'legendselectchanged', zrUtil.curry(legendSelectActionHandler, 'toggleSelected'));echarts.registerAction( 'legendSelect', 'legendselected', zrUtil.curry(legendSelectActionHandler, 'select'));echarts.registerAction( 'legendUnSelect', 'legendunselected', zrUtil.curry(legendSelectActionHandler, 'unSelect')); LegendFilterlegendFilteræ–‡ä»¶ä¸­å®ç°äº†æ•°æ®è¿‡æ»¤ï¼Œä¹Ÿå°±æ˜¯å½“legendçš„isSelectedæ–¹æ³•è¿”å›ä¸ºfalseæ—¶ï¼Œåˆ™ä¸legend nameç›¸åŒçš„seriesçš„æ•°æ®åˆ™ä¸æ˜¾ç¤ºï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617export default function (ecModel) &#123; var legendModels = ecModel.findComponents(&#123; mainType: 'legend' &#125;); if (legendModels &amp;&amp; legendModels.length) &#123; ecModel.filterSeries(function (series) &#123; // If in any legend component the status is not selected. // Because in legend series is assumed selected when it is not in the legend data. for (var i = 0; i &lt; legendModels.length; i++) &#123; if (!legendModels[i].isSelected(series.name)) &#123; return false; &#125; &#125; return true; &#125;); &#125;&#125; LegendModellegendModelé€šè¿‡extendComponentModelæ–¹æ³•æ‰©å±•è‡ªComponent Modelï¼Œé‡å†™äº†defaultOptionå±æ€§ï¼Œé‡å†™äº†initæ–¹æ³•ï¼Œå®šä¹‰äº†selectã€unSelectã€toggleSelectedä»¥åŠisSelectedç­‰æ–¹æ³•ã€‚ LegendViewlegendViewé€šè¿‡extendComponentViewæ–¹æ³•æ‰©å±•è‡ªComponent Viewï¼Œé‡å†™äº†initä»¥åŠrenderæ–¹æ³•å¯¹legendè¿›è¡Œæ¸²æŸ“ï¼Œä¸»è¦æ¸²æŸ“çš„ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162render: function (legendModel, ecModel, api) &#123; ... // renderInnerä¸­è°ƒç”¨äº†createItemæ–¹æ³•åˆ›å»ºLegend item // å¹¶ç»‘å®šäº†clickã€mouseoverã€mouseoutç­‰äº‹ä»¶ this.renderInner(itemAlign, legendModel, ecModel, api); ...&#125;;_createItem: function ( name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, selectMode) &#123; ... // ä½¿ç”¨util/symbolå¯¼å‡ºçš„createSymbolæ–¹æ³•ï¼Œåˆ›å»ºç›¸åº”Typeçš„Symbolå›¾å½¢ itemGroup.add(createSymbol( legendSymbolType, 0, 0, itemWidth, itemHeight, isSelected ? color : inactiveColor, // symbolKeepAspect default true for legend symbolKeepAspect == null ? true : symbolKeepAspect )); ... // æ¸²æŸ“legendæ–‡æœ¬ itemGroup.add(new graphic.Text(&#123; style: graphic.setTextStyle(&#123;&#125;, textStyleModel, &#123; text: content, x: textX, y: itemHeight / 2, textFill: isSelected ? textStyleModel.getTextColor() : inactiveColor, textAlign: textAlign, textVerticalAlign: 'middle' &#125;) &#125;)); // Add a invisible rect to increase the area of mouse hover // æ·»åŠ legendçš„tooltipæ•ˆæœ var hitRect = new graphic.Rect(&#123; shape: itemGroup.getBoundingRect(), invisible: true, tooltip: tooltipModel.get('show') ? zrUtil.extend(&#123; content: name, // Defaul formatter formatter: legendGlobalTooltipModel.get('formatter', true) || function () &#123; return name; &#125;, formatterParams: &#123; componentType: 'legend', legendIndex: legendModel.componentIndex, name: name, $vars: ['name'] &#125; &#125;, tooltipModel.option) : null &#125;); itemGroup.add(hitRect); ... this.getContentGroup().add(itemGroup); ... return itemGroup; &#125; Scrolllegend.scrollä¸ºå¯æ»šåŠ¨çš„legendå›¾ä¾‹ç»„ä»¶ï¼Œä¸»è¦åŒ…æ‹¬ScrollableLegendActionã€ScrollableLegendModelã€ScrollableLegendViewæ–‡ä»¶ã€‚ ScrollableLegendActionScrollableLegendActionæ–‡ä»¶ä¸­æ³¨å†Œäº†legendå¯¹å¤–APIï¼šlegendScrollï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213echarts.registerAction( 'legendScroll', 'legendscroll', function (payload, ecModel) &#123; var scrollDataIndex = payload.scrollDataIndex; scrollDataIndex != null &amp;&amp; ecModel.eachComponent( &#123;mainType: 'legend', subType: 'scroll', query: payload&#125;, function (legendModel) &#123; legendModel.setScrollDataIndex(scrollDataIndex); &#125; ); &#125;); ScrollableLegendModelScrollableLegendModelé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªLegendModeï¼Œé‡å†™äº†defaultOptionå±æ€§ï¼Œé‡å†™äº†initæ–¹æ³•ï¼Œå®šä¹‰äº†setScrollDataIndexä»¥åŠgetOrientç­‰æ–¹æ³•ã€‚ ScrollableLegendViewScrollableLegendViewé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªLegendViewï¼Œé‡å†™äº†initä»¥åŠrenderInneræ–¹æ³•å¯¹scrollable legendè¿›è¡Œæ¸²æŸ“ï¼Œä¸»è¦æ¸²æŸ“çš„ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455renderInner: function (itemAlign, legendModel, ecModel, api) &#123; var me = this; // Render content items. // è°ƒç”¨LegenViewä¸­renderInneræ¸²æŸ“åŸºæœ¬çš„legendè§†å›¾ ScrollableLegendView.superCall(this, 'renderInner', itemAlign, legendModel, ecModel, api); // åˆ›å»ºåˆ†é¡µå™¨ var controllerGroup = this._controllerGroup; // FIXME: support be 'auto' adapt to size number text length, // e.g., '3/12345' should not overlap with the control arrow button. var pageIconSize = legendModel.get('pageIconSize', true); if (!zrUtil.isArray(pageIconSize)) &#123; pageIconSize = [pageIconSize, pageIconSize]; &#125; createPageButton('pagePrev', 0); var pageTextStyleModel = legendModel.getModel('pageTextStyle'); controllerGroup.add(new graphic.Text(&#123; name: 'pageText', style: &#123; textFill: pageTextStyleModel.getTextColor(), font: pageTextStyleModel.getFont(), textVerticalAlign: 'middle', textAlign: 'center' &#125;, silent: true &#125;)); createPageButton('pageNext', 1); // åˆ›å»ºprev&amp;next button function createPageButton(name, iconIdx) &#123; var pageDataIndexName = name + 'DataIndex'; var icon = graphic.createIcon( legendModel.get('pageIcons', true)[legendModel.getOrient().name][iconIdx], &#123; // Buttons will be created in each render, so we do not need // to worry about avoiding using legendModel kept in scope. onclick: zrUtil.bind( me._pageGo, me, pageDataIndexName, legendModel, api ) &#125;, &#123; x: -pageIconSize[0] / 2, y: -pageIconSize[1] / 2, width: pageIconSize[0], height: pageIconSize[1] &#125; ); icon.name = name; controllerGroup.add(icon); &#125;&#125; AxisPointerAxisPointerä¸ºechartsä¸­çš„åæ ‡æŒ‡ç¤ºå™¨ï¼ŒåŒ…æ‹¬ç›´è§’åæ ‡ä»¥åŠæåæ ‡ç­‰ã€‚ AxisPointer.jsaxisPointer.jsæ–‡ä»¶ä¸­æ³¨å†Œäº†axisPointerå¯¹å¤–apiï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345echarts.registerAction(&#123; type: 'updateAxisPointer', event: 'updateAxisPointer', update: ':updateAxisPointer'&#125;, axisTrigger); å­˜å‚¨coordSysAxesInfoä¿¡æ¯ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456echarts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) &#123; // Build axisPointerModel, mergin tooltip.axisPointer model for each axis. // allAxesInfo should be updated when setOption performed. ecModel.getComponent('axisPointer').coordSysAxesInfo = axisPointerModelHelper.collect(ecModel, api);&#125;); AxisPointerModelAxisPointerModelé€šè¿‡extendComponentModelæ–¹æ³•æ‰©å±•è‡ªComponent Modelï¼Œé‡å†™äº†defaultOptionå±æ€§ã€‚ AxisPointerViewAxisPointerViewè¿‡extendComponentModelæ–¹æ³•æ‰©å±•è‡ªComponent Viewï¼Œé‡å†™äº†renderã€removeä»¥åŠdisposeæ–¹æ³•ã€‚ BaseAxisPointerBaseAxisPointerä¸ºCartesianAxisPointerã€PolarAxisPointerç­‰çš„åŸºç±»ï¼Œé‡å†™äº†renderä»¥åŠrenderHandlerç­‰æ–¹æ³•ã€‚renderHandlerä¸»è¦æ˜¯å®šä¹‰moveã€dragç­‰æƒ…å†µæ—¶è§†å›¾æ›´æ–°æ–¹æ³•ã€‚ renderä¸»è¦ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334353637render: function (axisModel, axisPointerModel, api, forceRender) &#123; ... var elOption = &#123;&#125;; // è°ƒç”¨å­ç±»çš„makeElOptionæ–¹æ³• this.makeElOption(elOption, value, axisModel, axisPointerModel, api); ... // åˆ›å»ºpointer this.createPointerEl(group, elOption, axisModel, axisPointerModel); // æ¸²æŸ“labelå…ƒç´  this.createLabelEl(group, elOption, axisModel, axisPointerModel); ... updateMandatoryProps(group, axisPointerModel, true); // æ¸²æŸ“handler this._renderHandle(value);&#125;createPointerEl: function (group, elOption, axisModel, axisPointerModel) &#123; var pointerOption = elOption.pointer; if (pointerOption) &#123; // é€šè¿‡graphicåˆ›å»º var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type]( clone(elOption.pointer) ); group.add(pointerEl); &#125;&#125;createLabelEl: function (group, elOption, axisModel, axisPointerModel) &#123; if (elOption.label) &#123; var labelEl = inner(group).labelEl = new graphic.Rect( clone(elOption.label) ); group.add(labelEl); updateLabelShowHide(labelEl, axisPointerModel); &#125;&#125; CartesianAxisPointerCartesianAxisPointerä½¿ç”¨extendæ–¹æ³•æ‰©å±•è‡ªBaseAxisPointerï¼Œé‡å†™äº†makeElOptionã€getHandleTransformä»¥åŠupdateHandleTransformæ–¹æ³•ã€‚makeElOptionä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152makeElOption: function (elOption, value, axisModel, axisPointerModel, api) &#123; var axis = axisModel.axis; var grid = axis.grid; var axisPointerType = axisPointerModel.get('type'); var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent(); var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true)); if (axisPointerType &amp;&amp; axisPointerType !== 'none') &#123; var elStyle = viewHelper.buildElStyle(axisPointerModel); var pointerOption = pointerShapeBuilder[axisPointerType]( axis, pixelValue, otherExtent, elStyle ); pointerOption.style = elStyle; elOption.graphicKey = pointerOption.type; elOption.pointer = pointerOption; &#125; var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel); viewHelper.buildCartesianSingleLabelElOption( value, elOption, layoutInfo, axisModel, axisPointerModel, api );&#125;var pointerShapeBuilder = &#123; line: function (axis, pixelValue, otherExtent, elStyle) &#123; var targetShape = viewHelper.makeLineShape( [pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis) ); graphic.subPixelOptimizeLine(&#123; shape: targetShape, style: elStyle &#125;); return &#123; type: 'Line', shape: targetShape &#125;; &#125;, shadow: function (axis, pixelValue, otherExtent, elStyle) &#123; var bandWidth = Math.max(1, axis.getBandWidth()); var span = otherExtent[1] - otherExtent[0]; return &#123; type: 'Rect', shape: viewHelper.makeRectShape( [pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis) ) &#125;; &#125;&#125;; SingleAxisPointerSingleAxisPointeråŒCartesianAxisPointerã€‚ PolarAxisPointerPolarAxisPointerä½¿ç”¨extendæ‰©å±•è‡ªBaseAxisPointerï¼Œé‡å†™äº†makeElOptionæ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576makeElOption: function (elOption, value, axisModel, axisPointerModel, api) &#123; var axis = axisModel.axis; if (axis.dim === 'angle') &#123; this.animationThreshold = Math.PI / 18; &#125; var polar = axis.polar; var otherAxis = polar.getOtherAxis(axis); var otherExtent = otherAxis.getExtent(); var coordValue; coordValue = axis['dataTo' + formatUtil.capitalFirst(axis.dim)](value); var axisPointerType = axisPointerModel.get('type'); if (axisPointerType &amp;&amp; axisPointerType !== 'none') &#123; var elStyle = viewHelper.buildElStyle(axisPointerModel); var pointerOption = pointerShapeBuilder[axisPointerType]( axis, polar, coordValue, otherExtent, elStyle ); pointerOption.style = elStyle; elOption.graphicKey = pointerOption.type; elOption.pointer = pointerOption; &#125; var labelMargin = axisPointerModel.get('label.margin'); var labelPos = getLabelPosition(value, axisModel, axisPointerModel, polar, labelMargin); viewHelper.buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos);&#125;var pointerShapeBuilder = &#123; line: function (axis, polar, coordValue, otherExtent, elStyle) &#123; return axis.dim === 'angle' ? &#123; type: 'Line', shape: viewHelper.makeLineShape( polar.coordToPoint([otherExtent[0], coordValue]), polar.coordToPoint([otherExtent[1], coordValue]) ) &#125; : &#123; type: 'Circle', shape: &#123; cx: polar.cx, cy: polar.cy, r: coordValue &#125; &#125;; &#125;, shadow: function (axis, polar, coordValue, otherExtent, elStyle) &#123; var bandWidth = Math.max(1, axis.getBandWidth()); var radian = Math.PI / 180; return axis.dim === 'angle' ? &#123; type: 'Sector', shape: viewHelper.makeSectorShape( polar.cx, polar.cy, otherExtent[0], otherExtent[1], // In ECharts y is negative if angle is positive (-coordValue - bandWidth / 2) * radian, (-coordValue + bandWidth / 2) * radian ) &#125; : &#123; type: 'Sector', shape: viewHelper.makeSectorShape( polar.cx, polar.cy, coordValue - bandWidth / 2, coordValue + bandWidth / 2, 0, Math.PI * 2 ) &#125;; &#125;&#125;; åæ ‡è½´å…¬å…±æ–‡ä»¶åœ¨ç›´è§’åæ ‡ç³»ä»¥åŠæåæ ‡ç³»ç­‰åæ ‡è½´ç»„ä»¶ä¸­ï¼Œå­˜åœ¨ç€å¤šä¸ªå…¬å…±æ–‡ä»¶ã€‚ AxisViewAxisViewé€šè¿‡extendComponentViewæ–¹æ³•æ‰©å±•è‡ªComponent Modelï¼Œé‡å†™äº†renderã€removeä»¥åŠdisposeæ–¹æ³•ï¼Œå®šä¹‰äº†updateAxisPointeræ–¹æ³•ã€‚ AxisBuilderAxisBuilderä¸­å®šä¹‰äº†axisLineã€axisTickLabelä»¥åŠaxisNameçš„æ¸²æŸ“æ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125var builders = &#123; axisLine: function () &#123; ... this.group.add(new graphic.Line(graphic.subPixelOptimizeLine(&#123; // Id for animation anid: 'line', shape: &#123; x1: pt1[0], y1: pt1[1], x2: pt2[0], y2: pt2[1] &#125;, style: lineStyle, strokeContainThreshold: opt.strokeContainThreshold || 5, silent: true, z2: 1 &#125;))); var arrows = axisModel.get('axisLine.symbol'); var arrowSize = axisModel.get('axisLine.symbolSize'); var arrowOffset = axisModel.get('axisLine.symbolOffset') || 0; if (typeof arrowOffset === 'number') &#123; arrowOffset = [arrowOffset, arrowOffset]; &#125; if (arrows != null) &#123; ... each([&#123; rotate: opt.rotation + Math.PI / 2, offset: arrowOffset[0], r: 0 &#125;, &#123; rotate: opt.rotation - Math.PI / 2, offset: arrowOffset[1], r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1])) &#125;], function (point, index) &#123; // åˆ›å»ºarrow symbole if (arrows[index] !== 'none' &amp;&amp; arrows[index] != null) &#123; var symbol = createSymbol( arrows[index], -symbolWidth / 2, -symbolHeight / 2, symbolWidth, symbolHeight, lineStyle.stroke, true ); // Calculate arrow position with offset var r = point.r + point.offset; var pos = [ pt1[0] + r * Math.cos(opt.rotation), pt1[1] - r * Math.sin(opt.rotation) ]; symbol.attr(&#123; rotation: point.rotate, position: pos, silent: true, z2: 11 &#125;); this.group.add(symbol); &#125; &#125;, this); &#125; &#125;, axisTickLabel: function () &#123; var axisModel = this.axisModel; var opt = this.opt; // é€šè¿‡graphic.Lineä»¥åŠgraphic.Textåˆ†åˆ«å¯¹tickåŠlabelè¿›è¡Œæ¸²æŸ“ var tickEls = buildAxisTick(this, axisModel, opt); var labelEls = buildAxisLabel(this, axisModel, opt); fixMinMaxLabelShow(axisModel, labelEls, tickEls); &#125;, axisName: function () &#123; ... var textEl = new graphic.Text(&#123; // Id for animation anid: 'name', __fullText: name, __truncatedText: truncatedText, position: pos, rotation: labelLayout.rotation, silent: isSilent(axisModel), z2: 1, tooltip: (tooltipOpt &amp;&amp; tooltipOpt.show) ? extend(&#123; content: name, formatter: function () &#123; return name; &#125;, formatterParams: formatterParams &#125;, tooltipOpt) : null &#125;); graphic.setTextStyle(textEl.style, textStyleModel, &#123; text: truncatedText, textFont: textFont, textFill: textStyleModel.getTextColor() || axisModel.get('axisLine.lineStyle.color'), textAlign: labelLayout.textAlign, textVerticalAlign: labelLayout.textVerticalAlign &#125;); ... // FIXME this._dumbGroup.add(textEl); textEl.updateTransform(); this.group.add(textEl); textEl.decomposeTransform(); &#125;&#125;; AxisModelCreatorAxisModelCreatorä¸ºç”ŸæˆAxisModelçš„æ–¹æ³•ï¼Œå…¶åœ¨AxisModelçš„åŸºç¡€ä¸Šæ‰©å±•äº†getCategoriesã€getOrdinalMetaã€mergeDefaultAndThemeç­‰æ–¹æ³•ï¼Œé‡å†™äº†defaultOptionå±æ€§ï¼Œå¹¶é€šè¿‡ï¼š 1234ComponentModel.registerSubTypeDefaulter( axisName + 'Axis', zrUtil.curry(axisTypeDefaulter, axisName)); æ¥æ³¨å†Œç›¸åº”çš„Axiså­ç±»ï¼Œå¦‚xAxisã€yAxisã€radiusAxisä»¥åŠangleAxisç­‰ã€‚ ç›´è§’åæ ‡è½´ AxisAxisä¸ºç›´è§’åæ ‡ç³»Gridä¸­çš„åæ ‡è½´ï¼ŒåŒ…æ‹¬xAxisï¼ˆxè½´ï¼‰ä»¥åŠyAxisï¼ˆyè½´ï¼‰ã€‚ AxisModelAxisModelé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªComponent Modelï¼Œé‡å†™äº†initã€mergeOptionã€ï¼Œå¹¶ä½¿ç”¨AxisModelCreatoråˆ†åˆ«åˆ›å»ºé¢xAxisModelä»¥åŠyAxisModelï¼Œ CartesianAxisViewCartesianAxisViewé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªAxisViewï¼Œé‡å†™äº†renderæ–¹æ³•ï¼Œå®šä¹‰äº†splitLineä»¥åŠsplitAreaæ–¹æ³•ï¼Œå¹¶æ‰©å±•äº†xAxisä»¥åŠyAxis Viewã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364var CartesianAxisView = AxisView.extend(&#123; type: 'cartesianAxis', axisPointerClass: 'CartesianAxisPointer', render: function (axisModel, ecModel, api, payload) &#123; ... // ç»“åˆAxisBuilder var axisBuilder = new AxisBuilder(axisModel, layout); zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder); ... CartesianAxisView.superCall(this, 'render', axisModel, ecModel, api, payload); &#125;, ... _splitLine: function (axisModel, gridModel) &#123; ... // Simple optimization // Batching the lines if color are the same for (var i = 0; i &lt; ticksCoords.length; i++) &#123; ... this._axisGroup.add(new graphic.Line(graphic.subPixelOptimizeLine(&#123; anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null, shape: &#123; x1: p1[0], y1: p1[1], x2: p2[0], y2: p2[1] &#125;, style: zrUtil.defaults(&#123; stroke: lineColors[colorIndex] &#125;, lineStyle), silent: true &#125;))); &#125; &#125;, _splitArea: function (axisModel, gridModel) &#123; ... for (var i = 1; i &lt; ticksCoords.length; i++) &#123; ... this._axisGroup.add(new graphic.Rect(&#123; anid: tickValue != null ? 'area_' + tickValue : null, shape: &#123; x: x, y: y, width: width, height: height &#125;, style: zrUtil.defaults(&#123; fill: areaColors[colorIndex] &#125;, areaStyle), silent: true &#125;)); colorIndex = (colorIndex + 1) % areaColorsLen; &#125; this._splitAreaColors = newSplitAreaColors; &#125;&#125;);CartesianAxisView.extend(&#123; type: 'xAxis'&#125;);CartesianAxisView.extend(&#123; type: 'yAxis'&#125;); æåæ ‡è½´ AngleAxis&amp;RadiusAxisæ¯ä¸€ä¸ªæåæ ‡éƒ½æ‹¥æœ‰ä¸€ä¸ªè§’åº¦è½´AngleAxiså’Œä¸€ä¸ªåŠå¾„è½´RadiusAxisã€‚ å…¬å…±æ–‡ä»¶AxisModelAxisModelé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªComponent Modelï¼Œå®šä¹‰äº†getCoordSysModelæ–¹æ³•ï¼Œå¹¶æ ¹æ®ä¸åŒoptionåˆ›å»ºäº†angleå’Œradius Modelï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12axisModelCreator('angle', PolarAxisModel, getAxisType, polarAxisDefaultExtendedOption.angle);axisModelCreator('radius', PolarAxisModel, getAxisType, polarAxisDefaultExtendedOption.radius); è§’åº¦è½´ AngleAxisAngleAxisä¸ºæåæ ‡Polarä¸­çš„è§’åº¦è½´ï¼Œ AngleAxisViewAngleAxisViewé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªAxisViewï¼Œé‡å†™äº†renderæ–¹æ³•ï¼Œå¹¶å®šä¹‰äº†axisLineã€axisTickã€axisLabelã€splitLineä»¥åŠsplitAreaç­‰æ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123render: function (angleAxisModel, ecModel) &#123; ... var angleAxis = angleAxisModel.axis; var polar = angleAxis.polar; var radiusExtent = polar.getRadiusAxis().getExtent(); var ticksAngles = angleAxis.getTicksCoords(); var labels = zrUtil.map(angleAxis.getViewLabels(), function (labelItem) &#123; var labelItem = zrUtil.clone(labelItem); labelItem.coord = angleAxis.dataToCoord(labelItem.tickValue); return labelItem; &#125;); ...&#125;,_axisLine: function (angleAxisModel, polar, ticksAngles, radiusExtent) &#123; var lineStyleModel = angleAxisModel.getModel('axisLine.lineStyle'); var circle = new graphic.Circle(&#123; shape: &#123; cx: polar.cx, cy: polar.cy, r: radiusExtent[getRadiusIdx(polar)] &#125;, style: lineStyleModel.getLineStyle(), z2: 1, silent: true &#125;); circle.style.fill = null; this.group.add(circle); &#125;, _axisTick: function (angleAxisModel, polar, ticksAngles, radiusExtent) &#123; var tickModel = angleAxisModel.getModel('axisTick'); var tickLen = (tickModel.get('inside') ? -1 : 1) * tickModel.get('length'); var radius = radiusExtent[getRadiusIdx(polar)]; var lines = zrUtil.map(ticksAngles, function (tickAngleItem) &#123; return new graphic.Line(&#123; shape: getAxisLineShape(polar, [radius, radius + tickLen], tickAngleItem.coord) &#125;); &#125;); this.group.add(graphic.mergePath( lines, &#123; style: zrUtil.defaults( tickModel.getModel('lineStyle').getLineStyle(), &#123; stroke: angleAxisModel.get('axisLine.lineStyle.color') &#125; ) &#125; )); &#125;, _axisLabel: function (angleAxisModel, polar, ticksAngles, radiusExtent, labels) &#123; ... // Use length of ticksAngles because it may remove the last tick to avoid overlapping zrUtil.each(labels, function (labelItem, idx) &#123; ... var textEl = new graphic.Text(&#123;silent: true&#125;); this.group.add(textEl); graphic.setTextStyle(textEl.style, labelModel, &#123; x: p[0], y: p[1], textFill: labelModel.getTextColor() || angleAxisModel.get('axisLine.lineStyle.color'), text: labelItem.formattedLabel, textAlign: labelTextAlign, textVerticalAlign: labelTextVerticalAlign &#125;); &#125;, this); &#125;, _splitLine: function (angleAxisModel, polar, ticksAngles, radiusExtent) &#123; ... for (var i = 0; i &lt; ticksAngles.length; i++) &#123; var colorIndex = (lineCount++) % lineColors.length; splitLines[colorIndex] = splitLines[colorIndex] || []; splitLines[colorIndex].push(new graphic.Line(&#123; shape: getAxisLineShape(polar, radiusExtent, ticksAngles[i].coord) &#125;)); &#125; // Simple optimization // Batching the lines if color are the same for (var i = 0; i &lt; splitLines.length; i++) &#123; this.group.add(graphic.mergePath(splitLines[i], &#123; style: zrUtil.defaults(&#123; stroke: lineColors[i % lineColors.length] &#125;, lineStyleModel.getLineStyle()), silent: true, z: angleAxisModel.get('z') &#125;)); &#125; &#125;, _splitArea: function (angleAxisModel, polar, ticksAngles, radiusExtent) &#123; ... for (var i = 1; i &lt; ticksAngles.length; i++) &#123; var colorIndex = (lineCount++) % areaColors.length; splitAreas[colorIndex] = splitAreas[colorIndex] || []; splitAreas[colorIndex].push(new graphic.Sector(&#123; shape: &#123; cx: polar.cx, cy: polar.cy, r0: r0, r: r1, startAngle: prevAngle, endAngle: -ticksAngles[i].coord * RADIAN, clockwise: clockwise &#125;, silent: true &#125;)); prevAngle = -ticksAngles[i].coord * RADIAN; &#125; // Simple optimization // Batching the lines if color are the same for (var i = 0; i &lt; splitAreas.length; i++) &#123; this.group.add(graphic.mergePath(splitAreas[i], &#123; style: zrUtil.defaults(&#123; fill: areaColors[i % areaColors.length] &#125;, areaStyleModel.getAreaStyle()), silent: true &#125;)); &#125; &#125; åŠå¾„è½´ RadiusAxisRadiusAxisä¸ºæåæ ‡Polarä¸­çš„åŠå¾„è½´ã€‚ RadiusAxisViewRadiusAxisViewé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªAxisViewï¼Œé‡å†™äº†renderæ–¹æ³•ï¼Œå¹¶å®šä¹‰äº†splitLineã€splitAreaæ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758_splitLine: function (radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords) &#123; ... for (var i = 0; i &lt; ticksCoords.length; i++) &#123; var colorIndex = (lineCount++) % lineColors.length; splitLines[colorIndex] = splitLines[colorIndex] || []; splitLines[colorIndex].push(new graphic.Circle(&#123; shape: &#123; cx: polar.cx, cy: polar.cy, r: ticksCoords[i].coord &#125;, silent: true &#125;)); &#125; // Simple optimization // Batching the lines if color are the same for (var i = 0; i &lt; splitLines.length; i++) &#123; this.group.add(graphic.mergePath(splitLines[i], &#123; style: zrUtil.defaults(&#123; stroke: lineColors[i % lineColors.length], fill: null &#125;, lineStyleModel.getLineStyle()), silent: true &#125;)); &#125;&#125;,_splitArea: function (radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords) &#123; ... for (var i = 1; i &lt; ticksCoords.length; i++) &#123; var colorIndex = (lineCount++) % areaColors.length; splitAreas[colorIndex] = splitAreas[colorIndex] || []; splitAreas[colorIndex].push(new graphic.Sector(&#123; shape: &#123; cx: polar.cx, cy: polar.cy, r0: prevRadius, r: ticksCoords[i].coord, startAngle: 0, endAngle: Math.PI * 2 &#125;, silent: true &#125;)); prevRadius = ticksCoords[i].coord; &#125; // Simple optimization // Batching the lines if color are the same for (var i = 0; i &lt; splitAreas.length; i++) &#123; this.group.add(graphic.mergePath(splitAreas[i], &#123; style: zrUtil.defaults(&#123; fill: areaColors[i % areaColors.length] &#125;, areaStyleModel.getAreaStyle()), silent: true &#125;)); &#125; &#125; é›·è¾¾åæ ‡è½´RadarViewRadarViewé€šè¿‡extendComponentViewæ–¹æ³•æ‰©å±•è‡ªComponent Viewï¼Œé‡å†™äº†renderæ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110render: function (radarModel, ecModel, api) &#123; var group = this.group; group.removeAll(); this._buildAxes(radarModel); this._buildSplitLineAndArea(radarModel);&#125;,_buildAxes: function (radarModel) &#123; var radar = radarModel.coordinateSystem; var indicatorAxes = radar.getIndicatorAxes(); var axisBuilders = zrUtil.map(indicatorAxes, function (indicatorAxis) &#123; var axisBuilder = new AxisBuilder(indicatorAxis.model, &#123; position: [radar.cx, radar.cy], rotation: indicatorAxis.angle, labelDirection: -1, tickDirection: -1, nameDirection: 1 &#125;); return axisBuilder; &#125;); zrUtil.each(axisBuilders, function (axisBuilder) &#123; zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder); this.group.add(axisBuilder.getGroup()); &#125;, this);&#125;,_buildSplitLineAndArea: function (radarModel) &#123; ... if (shape === 'circle') &#123; var ticksRadius = indicatorAxes[0].getTicksCoords(); var cx = radar.cx; var cy = radar.cy; for (var i = 0; i &lt; ticksRadius.length; i++) &#123; if (showSplitLine) &#123; var colorIndex = getColorIndex(splitLines, splitLineColors, i); splitLines[colorIndex].push(new graphic.Circle(&#123; shape: &#123; cx: cx, cy: cy, r: ticksRadius[i].coord &#125; &#125;)); &#125; if (showSplitArea &amp;&amp; i &lt; ticksRadius.length - 1) &#123; var colorIndex = getColorIndex(splitAreas, splitAreaColors, i); splitAreas[colorIndex].push(new graphic.Ring(&#123; shape: &#123; cx: cx, cy: cy, r0: ticksRadius[i].coord, r: ticksRadius[i + 1].coord &#125; &#125;)); &#125; &#125; &#125; // Polygon else &#123; ... for (var i = 0; i &lt;= realSplitNumber; i++) &#123; ... if (showSplitLine) &#123; var colorIndex = getColorIndex(splitLines, splitLineColors, i); splitLines[colorIndex].push(new graphic.Polyline(&#123; shape: &#123; points: points &#125; &#125;)); &#125; if (showSplitArea &amp;&amp; prevPoints) &#123; var colorIndex = getColorIndex(splitAreas, splitAreaColors, i - 1); splitAreas[colorIndex].push(new graphic.Polygon(&#123; shape: &#123; points: points.concat(prevPoints) &#125; &#125;)); &#125; prevPoints = points.slice().reverse(); &#125; &#125; var lineStyle = lineStyleModel.getLineStyle(); var areaStyle = areaStyleModel.getAreaStyle(); // Add splitArea before splitLine zrUtil.each(splitAreas, function (splitAreas, idx) &#123; this.group.add(graphic.mergePath( splitAreas, &#123; style: zrUtil.defaults(&#123; stroke: 'none', fill: splitAreaColors[idx % splitAreaColors.length] &#125;, areaStyle), silent: true &#125; )); &#125;, this); zrUtil.each(splitLines, function (splitLines, idx) &#123; this.group.add(graphic.mergePath( splitLines, &#123; style: zrUtil.defaults(&#123; fill: 'none', stroke: splitLineColors[idx % splitLineColors.length] &#125;, lineStyle), silent: true &#125; )); &#125;, this);&#125; RadarModelRadarModelé€šè¿‡extendComponentModelæ‰©å±•è‡ªComponent Modelï¼Œé‡å†™äº†defaultOptionå±æ€§ä»¥åŠoptionUpdatedæ–¹æ³•ã€‚ å¹³è¡Œåæ ‡è½´ ParallelAxisParallelModelParallelModelä½¿ç”¨extendæ–¹æ³•æ‰©å±•è‡ªComponent Modelï¼Œé‡å†™äº†defaultOptionå±æ€§ï¼Œå¹¶é‡å†™äº†initã€mergeOptionç­‰æ–¹æ³•ã€‚ ParallelAxisActionparallelAxisActionä¸­æ³¨å†Œäº†axisAreaSelectedä»¥åŠparallelAxisExpand APIï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122var actionInfo = &#123; type: 'axisAreaSelect', event: 'axisAreaSelected'&#125;;echarts.registerAction(actionInfo, function (payload, ecModel) &#123; ecModel.eachComponent( &#123;mainType: 'parallelAxis', query: payload&#125;, function (parallelAxisModel) &#123; parallelAxisModel.axis.model.setActiveIntervals(payload.intervals); &#125; );&#125;);echarts.registerAction('parallelAxisExpand', function (payload, ecModel) &#123; ecModel.eachComponent( &#123;mainType: 'parallel', query: payload&#125;, function (parallelModel) &#123; parallelModel.setAxisExpand(payload); &#125; );&#125;); ParallelAxisViewParallelAxisViewä½¿ç”¨extendComponentViewæ–¹æ³•æ‰©å±•è‡ªComponent Viewï¼Œé‡å†™äº†renderç­‰æ–¹æ³•ã€‚æ¸²æŸ“ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546render: function (axisModel, ecModel, api, payload) &#123; ... var axisBuilder = new AxisBuilder(axisModel, builderOpt); zrUtil.each(elementList, axisBuilder.add, axisBuilder); this._axisGroup.add(axisBuilder.getGroup()); this._refreshBrushController( builderOpt, areaSelectStyle, axisModel, coordSysModel, areaWidth, api ); ... &#125;, _refreshBrushController: function ( builderOpt, areaSelectStyle, axisModel, coordSysModel, areaWidth, api) &#123; ... var rect = graphic.BoundingRect.create(&#123; x: extent[0], y: -areaWidth / 2, width: extentLen, height: areaWidth &#125;); rect.x -= extra; rect.width += 2 * extra; // _brushControllerä¸ºå¹³è¡Œåæ ‡è½´ä¸Šçš„æ§åˆ¶å™¨ this._brushController .mount(&#123; enableGlobalPan: true, rotation: builderOpt.rotation, position: builderOpt.position &#125;) .setPanels([&#123; panelId: 'pl', clipPath: brushHelper.makeRectPanelClipPath(rect), isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, coordSysModel), getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect, 0) &#125;]) .enableBrush(&#123; brushType: 'lineX', brushStyle: areaSelectStyle, removeOnClick: true &#125;) .updateCovers(getCoverInfoList(axisModel));&#125;, å•è½´ SingleAxisSingleCreatorSingleCreatoræ–‡ä»¶ä¸»è¦ä¸ºåˆ›å»ºå•è½´çš„é€»è¾‘ä»£ç ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526function create(ecModel, api) &#123; var singles = []; ecModel.eachComponent('singleAxis', function (axisModel, idx) &#123; var single = new Single(axisModel, ecModel, api); single.name = 'single_' + idx; single.resize(axisModel, api); axisModel.coordinateSystem = single; singles.push(single); &#125;); ecModel.eachSeries(function (seriesModel) &#123; if (seriesModel.get('coordinateSystem') === 'singleAxis') &#123; var singleAxisModel = ecModel.queryComponents(&#123; mainType: 'singleAxis', index: seriesModel.get('singleAxisIndex'), id: seriesModel.get('singleAxisId') &#125;)[0]; seriesModel.coordinateSystem = singleAxisModel &amp;&amp; singleAxisModel.coordinateSystem; &#125; &#125;); return singles;&#125; AxisModelaxisModelæ‰©å±•è‡ªComponent Modelï¼Œé‡å†™äº†defaultOptionå±æ€§ SingleAxisViewSingleAxisViewä½¿ç”¨extendæ–¹æ³•æ‰©å±•è‡ªAxisViewï¼Œé‡å†™äº†renderæ–¹æ³•ï¼Œå¹¶å®šä¹‰äº†splitLineæ–¹æ³•ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051render: function (axisModel, ecModel, api, payload) &#123; ... var layout = singleAxisHelper.layout(axisModel); var axisBuilder = new AxisBuilder(axisModel, layout); zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder); ... SingleAxisView.superCall(this, 'render', axisModel, ecModel, api, payload); &#125;, _splitLine: function (axisModel) &#123; var axis = axisModel.axis; ... var ticksCoords = axis.getTicksCoords(&#123; tickModel: splitLineModel &#125;); var p1 = []; var p2 = []; for (var i = 0; i &lt; ticksCoords.length; ++i) &#123; var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord); if (isHorizontal) &#123; p1[0] = tickCoord; p1[1] = gridRect.y; p2[0] = tickCoord; p2[1] = gridRect.y + gridRect.height; &#125; else &#123; p1[0] = gridRect.x; p1[1] = tickCoord; p2[0] = gridRect.x + gridRect.width; p2[1] = tickCoord; &#125; var colorIndex = (lineCount++) % lineColors.length; splitLines[colorIndex] = splitLines[colorIndex] || []; splitLines[colorIndex].push(new graphic.Line( graphic.subPixelOptimizeLine(&#123; shape: &#123; x1: p1[0], y1: p1[1], x2: p2[0], y2: p2[1] &#125;, style: &#123; lineWidth: lineWidth &#125;, silent: true &#125;))); &#125; ... &#125; åæ ‡ç³»åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†ç›´è§’åæ ‡è½´ã€æåæ ‡è½´ä»¥åŠé›·è¾¾åæ ‡è½´ï¼Œæˆ‘ä»¬å°†åœ¨è¿™èŠ‚è§£è¯»åæ ‡è½´æ˜¯å¦‚ä½•åœ¨åæ ‡ç³»ä¸­å±•ç¤ºçš„ã€‚ å…¬å…±æ–‡ä»¶AxisAxiså¯¹è±¡ä¸­å®šä¹‰äº†scaleã€dimç­‰å±æ€§ä»¥åŠcontainã€containDataã€getExtentã€getTicksCoordsã€getViewLabelsç­‰æ–¹æ³•ã€‚ Grid ç›´è§’åæ ‡ç³»Gridä¸ºechartsä¸­çš„ç›´è§’åæ ‡ç³»ç»„ä»¶ã€‚ gridSimplegridSimpleé€šè¿‡extendComponentViewæ‰©å±•è‡ªComponent Viewï¼Œé‡å†™äº†renderæ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213render: function (gridModel, ecModel) &#123; this.group.removeAll(); if (gridModel.get('show')) &#123; this.group.add(new graphic.Rect(&#123; shape: gridModel.coordinateSystem.getRect(), style: zrUtil.defaults(&#123; fill: gridModel.get('backgroundColor') &#125;, gridModel.getItemStyle()), silent: true, z2: -1 &#125;)); &#125;&#125; Gridcoord/cartesian/Grid.jsï¼Œå®ç°ç›´è§’åæ ‡ç³»çš„æ¸²æŸ“ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758function Grid(gridModel, ecModel, api) &#123; ... this._initCartesian(gridModel, ecModel, api); ...&#125;gridProto._initCartesian = function (gridModel, ecModel, api) &#123; var axisPositionUsed = &#123; left: false, right: false, top: false, bottom: false &#125;; var axesMap = &#123; x: &#123;&#125;, y: &#123;&#125; &#125;; var axesCount = &#123; x: 0, y: 0 &#125;; /// Create axis // åˆ›å»ºxåŠyåæ ‡è½´ ecModel.eachComponent('xAxis', createAxisCreator('x'), this); ecModel.eachComponent('yAxis', createAxisCreator('y'), this); ... /// Create cartesian2d // åˆ›å»º each(axesMap.x, function (xAxis, xAxisIndex) &#123; each(axesMap.y, function (yAxis, yAxisIndex) &#123; var key = 'x' + xAxisIndex + 'y' + yAxisIndex; var cartesian = new Cartesian2D(key); cartesian.grid = this; cartesian.model = gridModel; this._coordsMap[key] = cartesian; this._coordsList.push(cartesian); cartesian.addAxis(xAxis); cartesian.addAxis(yAxis); &#125;, this); &#125;, this); function createAxisCreator(axisType) &#123; return function (axisModel, idx) &#123; ... // åˆ›å»ºåæ ‡è½´ var axis = new Axis2D( axisType, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition ); ... &#125;; &#125;&#125;; Polar æåæ ‡ç³»Polarä¸ºechartsä¸­çš„æåæ ‡ç³»ç»„ä»¶ï¼Œæ¯ä¸€ä¸ªæåæ ‡éƒ½æ‹¥æœ‰ä¸€ä¸ªè§’åº¦è½´å’Œä¸€ä¸ªåŠå¾„è½´ã€‚ PolarPolarå®šä¹‰äº†angleAxisï¼ˆnew RadiusAxis()ï¼‰ã€radiusAxisï¼ˆnew AngleAxis()ï¼‰ç­‰å±æ€§ä»¥åŠcontainPointã€containDataã€getAxisã€getAngleAxisã€getRadiusAxisç­‰æ–¹æ³•ã€‚ PolarCreatorPolarCreatorç”¨äºåˆ›å»ºæåæ ‡ç³»ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728create: function (ecModel, api) &#123; var polarList = []; ecModel.eachComponent('polar', function (polarModel, idx) &#123; var polar = new Polar(idx); // Inject resize and update method polar.update = updatePolarScale; var radiusAxis = polar.getRadiusAxis(); var angleAxis = polar.getAngleAxis(); var radiusAxisModel = polarModel.findAxisModel('radiusAxis'); var angleAxisModel = polarModel.findAxisModel('angleAxis'); // è®¾ç½®è§’åº¦è½´å’ŒåŠå¾„è½´ setAxis(radiusAxis, radiusAxisModel); setAxis(angleAxis, angleAxisModel); resizePolar(polar, polarModel, api); polarList.push(polar); polarModel.coordinateSystem = polar; polar.model = polarModel; &#125;); ... return polarList;&#125; Radar é›·è¾¾åæ ‡ç³»Radarä¸ºechartsä¸­çš„é›·è¾¾åæ ‡ç³»ç»„ä»¶ã€‚ ###Radar Radaræ–‡ä»¶ä½äºcoord/radarç›®å½•ä¸‹ï¼Œå®šä¹‰äº†getIndicatorAxesã€coordToPointã€dataToPointç­‰æ–¹æ³•ï¼Œå¹¶æ³¨å†Œäº†é›·è¾¾åæ ‡ä¿¡æ¯ï¼Œä¸»è¦ä»£ç ä¸ºï¼š 12345678910111213141516171819202122232425262728293031function Radar(radarModel, ecModel, api) &#123; ... this._indicatorAxes = zrUtil.map(radarModel.getIndicatorModels(), function (indicatorModel, idx) &#123; var dim = 'indicator_' + idx; // åˆ›å»ºé›·è¾¾åæ ‡è½´ var indicatorAxis = new IndicatorAxis(dim, new IntervalScale()); indicatorAxis.name = indicatorModel.get('name'); // Inject model and axis indicatorAxis.model = indicatorModel; indicatorModel.axis = indicatorAxis; this.dimensions.push(dim); return indicatorAxis; &#125;, this); ...&#125;Radar.create = function (ecModel, api) &#123; var radarList = []; ecModel.eachComponent('radar', function (radarModel) &#123; var radar = new Radar(radarModel, ecModel, api); radarList.push(radar); radarModel.coordinateSystem = radar; &#125;); ecModel.eachSeriesByType('radar', function (radarSeries) &#123; if (radarSeries.get('coordinateSystem') === 'radar') &#123; // Inject coordinate system radarSeries.coordinateSystem = radarList[radarSeries.get('radarIndex') || 0]; &#125; &#125;); return radarList;&#125;;CoordinateSystem.register('radar', Radar); Parallel å¹³è¡Œåæ ‡ç³»Parallelä¸ºechartsä¸­çš„å¹³è¡Œåæ ‡ç³»ç»„ä»¶ã€‚ ParallelParallelå®šä¹‰äº†rectã€dimensionsç­‰å±æ€§ä»¥åŠinitã€containPointã€getRectã€getAxisã€axisCoordToPointç­‰æ–¹æ³•ã€‚ ParallelCreatorParallelCreatorç”¨äºåˆ›å»ºå¹³è¡Œåæ ‡ç³»ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031function create(ecModel, api) &#123; var coordSysList = []; ecModel.eachComponent('parallel', function (parallelModel, idx) &#123; var coordSys = new Parallel(parallelModel, ecModel, api); coordSys.name = 'parallel_' + idx; coordSys.resize(parallelModel, api); parallelModel.coordinateSystem = coordSys; coordSys.model = parallelModel; coordSysList.push(coordSys); &#125;); // Inject the coordinateSystems into seriesModel ecModel.eachSeries(function (seriesModel) &#123; if (seriesModel.get('coordinateSystem') === 'parallel') &#123; var parallelModel = ecModel.queryComponents(&#123; mainType: 'parallel', index: seriesModel.get('parallelIndex'), id: seriesModel.get('parallelId') &#125;)[0]; seriesModel.coordinateSystem = parallelModel.coordinateSystem; &#125; &#125;); return coordSysList;&#125;CoordinateSystem.register('parallel', &#123;create: create&#125;); geo åœ°ç†åæ ‡ç³»geo.jsgeo.jsä¸­æ³¨å†Œäº†geoToggleSelectã€geoSelectã€geoUnSelectç­‰action GeoModeGeoModelé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªComponent Modelï¼Œé‡å†™äº†defaultOptionå±æ€§ä»¥åŠinitã€optionUpdatedæ–¹æ³•ï¼Œå¹¶å®šä¹‰äº†getRegionModelã€getFormattedLabelã€setZoomä»¥åŠsetCenteræ–¹æ³•ã€‚ geoCreatorgeoCreatorç”¨äºåˆ›å»ºGeo åœ°ç†åæ ‡ç³» GeoViewGeoViewé€šè¿‡extendComponentViewæ‰©å±•è‡ªCompnent Viewï¼Œé‡å†™äº†initã€renderä»¥åŠdisposeæ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415init: function (ecModel, api) &#123; var mapDraw = new MapDraw(api, true); this._mapDraw = mapDraw; this.group.add(mapDraw.group);&#125;,render: function (geoModel, ecModel, api, payload) &#123; ... var mapDraw = this._mapDraw; if (geoModel.get('show')) &#123; mapDraw.draw(geoModel, ecModel, api, this, payload); &#125; ...&#125;, MapDrawMapDrawï¼Œ ä¸»è¦ç»˜åˆ¶ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283draw: function (mapOrGeoModel, ecModel, api, fromView, payload) &#123; ... // æ¸²æŸ“èƒŒæ™¯ this._updateBackground(geo); ... zrUtil.each(geo.regions, function (region) &#123; var regionGroup = nameMap.get(region.name) || nameMap.set(region.name, new graphic.Group()); var compoundPath = new graphic.CompoundPath(&#123; shape: &#123; paths: [] &#125; &#125;); regionGroup.add(compoundPath); ... zrUtil.each(region.geometries, function (geometry) &#123; // ä»…æ”¯æŒpolygon if (geometry.type !== 'polygon') &#123; return; &#125; compoundPath.shape.paths.push(new graphic.Polygon(&#123; shape: &#123; points: geometry.exterior &#125; &#125;)); for (var i = 0; i &lt; (geometry.interiors ? geometry.interiors.length : 0); i++) &#123; compoundPath.shape.paths.push(new graphic.Polygon(&#123; shape: &#123; points: geometry.interiors[i] &#125; &#125;)); &#125; &#125;); compoundPath.setStyle(itemStyle); compoundPath.style.strokeNoScale = true; compoundPath.culling = true; // Label ... if ( (isGeo || isDataNaN &amp;&amp; (showLabel || hoverShowLabel)) || (itemLayout &amp;&amp; itemLayout.showLabel) ) &#123; ... var textEl = new graphic.Text(&#123; position: region.center.slice(), scale: [1 / scale[0], 1 / scale[1]], z2: 10, silent: true &#125;); graphic.setLabelStyle( textEl.style, textEl.hoverStyle = &#123;&#125;, labelModel, hoverLabelModel, &#123; labelFetcher: labelFetcher, labelDataIndex: query, defaultText: region.name, useInsideStyle: false &#125;, &#123; textAlign: 'center', textVerticalAlign: 'middle' &#125; ); regionGroup.add(textEl); &#125; ... var groupRegions = regionGroup.__regions || (regionGroup.__regions = []); groupRegions.push(region); ... regionsGroup.add(regionGroup); &#125;); // ç»‘å®španã€zoomç­‰äº‹ä»¶å¤„ç†å™¨ this._updateController(mapOrGeoModel, ecModel, api); updateMapSelectHandler(this, mapOrGeoModel, regionsGroup, api, fromView); updateMapSelected(mapOrGeoModel, regionsGroup);&#125; geoRoamgeoRoamä¸­æ³¨å†Œäº†geoRoam apiï¼Œtriggerä¸­è°ƒç”¨äº†geoModelçš„setCenteråŠsetZoomæ–¹æ³•æ¥æ›´æ–°è§†å›¾ã€‚ Calendar æ—¥å†åæ ‡ç³»calendar.jscalendar.jsåˆ›å»ºæ—¥å†åæ ‡ç³» CalendarModelCalendarModelé€šè¿‡extendæ–¹æ³•æ‰©å±•è‡ªComponent Modelï¼Œé‡å†™äº†defaultOptionå±æ€§ä»¥åŠinitã€mergeOptionæ–¹æ³•ã€‚ CalendarViewCalendarViewé€šè¿‡extendComponentViewæ‰©å±•è‡ªComponent Viewï¼Œé‡å†™äº†renderæ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617render: function (calendarModel, ecModel, api) &#123; var group = this.group; group.removeAll(); var coordSys = calendarModel.coordinateSystem; var rangeData = coordSys.getRangeInfo(); var orient = coordSys.getOrient(); // é€šè¿‡graphic.Rectæ¥ç»˜åˆ¶day rect this._renderDayRect(calendarModel, rangeData, group); // é€šè¿‡graphic.Polylineç»˜åˆ¶åˆ†å‰²çº¿ this._renderLines(calendarModel, rangeData, orient, group); // é€šè¿‡graphic.Textç»˜åˆ¶year label this._renderYearText(calendarModel, rangeData, orient, group); // é€šè¿‡graphic.Textç»˜åˆ¶month label this._renderMonthText(calendarModel, orient, group); // é€šè¿‡graphic.Textç»˜åˆ¶week label this._renderWeekText(calendarModel, rangeData, orient, group);&#125; é—®é¢˜åœ¨è§£è¯»çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¸¦ç€é—®é¢˜å»æ€è€ƒæºç çš„å®ç°ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æ¥è§£å†³echartsæ˜¯å¦‚ä½•æ¸²æŸ“å±•ç¤ºåæ ‡è½´ä¸Šçš„labelæ•°æ®è¿™ä¸ªé—®é¢˜ã€‚ å­˜å‚¨é¦–å…ˆè€ƒè™‘label dataçš„å­˜å‚¨è¿‡ç¨‹ï¼Œä»¥ç›´è§’åæ ‡ç³»ä¸ºğŸŒ°ï¼Œdataå­˜å‚¨çš„è°ƒç”¨é“¾å¦‚ä¸‹æ‰€ç¤ºï¼š echarts.setOption() Global.setOption() Global.mergeOption() Component.optionUpdated() ï¼ˆModelï¼‰ AxisModelCreator.optionUpdated()ï¼Œå°†OrdinalMeta.createByAxisModel()è¿”å›çš„æ•°æ®ä¿å­˜åœ¨this.__ordinalMetaä¸­ OrdinalMeta.createByAxisModel()ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456789101112OrdinalMeta.createByAxisModel = function (axisModel) &#123; var option = axisModel.option; var data = option.data; var categories = data &amp;&amp; map(data, getName); return new OrdinalMeta(&#123; categories: categories, needCollect: !categories, // deduplication is default in axis. deduplication: option.dedplication !== false &#125;);&#125;; Grid.jsä¸­é€šè¿‡ï¼š 123456var axis = new Axis2D( axisType, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition); åˆ›å»ºåæ ‡è½´ï¼ŒcreateScaleByModelæ–¹æ³•è·å–ä¿å­˜åœ¨this.__ordinalMetaå±æ€§ä¸­çš„æ•°æ®ï¼Œå¹¶è¿”å›OrdinalScaleå¯¹è±¡ï¼ŒcreateScaleByModelæ–¹æ³•ä¸»è¦ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314151617181920export function createScaleByModel(model, axisType) &#123; axisType = axisType || model.get('type'); if (axisType) &#123; switch (axisType) &#123; // Buildin scale case 'category': return new OrdinalScale( model.getOrdinalMeta ? model.getOrdinalMeta() : model.getCategories(), [Infinity, -Infinity] ); case 'value': return new IntervalScale(); // Extended scale, like time and log default: return (Scale.getClass(axisType) || IntervalScale).create(model); &#125; &#125;&#125; Gridåˆ›å»ºåæ ‡è½´æ—¶å°†è¿”å›çš„OrdinalScaleå¯¹è±¡æ•°æ®ä½œä¸ºscaleå±æ€§ä¿å­˜åœ¨axisä¸­ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678var Axis2D = function (dim, scale, coordExtent, axisType, position) &#123; Axis.call(this, dim, scale, coordExtent);&#125;var Axis = function (dim, scale, extent) &#123; ... this.scale = scale; ...&#125;; è·å–è·å– AxisBuilder axisTickLabel() AxisBuilder buildAxisLabel() labels = axis.getViewLabels() =&gt; coord/Axis.js getViewLabels() è°ƒç”¨createAxisLabels()ï¼Œè¿”å›result.labels axisTickLabelBuilder createAxisLabels() 123456export function createAxisLabels(axis) &#123; // Only ordinal scale support tick interval return axis.type === 'category' ? makeCategoryLabels(axis) : makeRealNumberLabels(axis);&#125; axisTickLabelBuilder makeCategoryLabels() 12345678function makeCategoryLabels(axis) &#123; var labelModel = axis.getLabelModel(); var result = makeCategoryLabelsActually(axis, labelModel); return (!labelModel.get('show') || axis.scale.isBlank()) ? &#123;labels: [], labelCategoryInterval: result.labelCategoryInterval&#125; : result;&#125; axisTickLabelBuilder makeCategoryLabelsActually() axisTickLabelBuilder makeLabelsByCustomizedCategoryInterval() 12345678910111213141516171819202122function makeLabelsByCustomizedCategoryInterval(axis, categoryInterval, onlyTick) &#123; // axis.scaleæ˜¯æˆ‘ä»¬ä¿å­˜çš„OrdinalScaleå¯¹è±¡æ•°æ® var ordinalScale = axis.scale; var labelFormatter = makeLabelFormatter(axis); var result = []; zrUtil.each(ordinalScale.getTicks(), function (tickValue) &#123; var rawLabel = ordinalScale.getLabel(tickValue); if (categoryInterval(tickValue, rawLabel)) &#123; result.push(onlyTick ? tickValue : &#123; formattedLabel: labelFormatter(tickValue), rawLabel: rawLabel, tickValue: tickValue &#125; ); &#125; &#125;); return result;&#125; æ¸²æŸ“AxisBuilderé€šè¿‡axis.getViewLabels()è·å–labelsæ•°æ®åé€šè¿‡graphic.Textè¿›è¡Œæ¸²æŸ“ï¼Œé€šè¿‡graphic.setStyleè®¾ç½®æ–‡æœ¬æ ·å¼ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637each(labels, function (labelItem, index) &#123; ... var textEl = new graphic.Text(&#123; // Id for animation anid: 'label_' + tickValue, position: pos, rotation: labelLayout.rotation, silent: silent, z2: 10 &#125;); graphic.setTextStyle(textEl.style, itemLabelModel, &#123; text: formattedLabel, textAlign: itemLabelModel.getShallow('align', true) || labelLayout.textAlign, textVerticalAlign: itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign, textFill: typeof textColor === 'function' ? textColor( axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index ) : textColor &#125;); ... labelEls.push(textEl); axisBuilder.group.add(textEl); textEl.decomposeTransform();&#125;); æ€»ç»“è¿™ç¯‡åšæ–‡å¾ˆå¤§ï¼Œç®€å•ä»‹ç»äº†titleã€legendã€axisPointerã€åæ ‡ç³»ä»¥åŠåæ ‡è½´ç­‰ç»„ä»¶çš„æ¸²æŸ“ç»†èŠ‚ï¼Œä¹Ÿæ¢è®¨äº†åæ ‡è½´ä¸Šlabel æ•°æ®çš„å­˜å‚¨ã€è·å–ä»¥åŠæ¸²æŸ“çš„è¿‡ç¨‹ã€‚ å¸Œæœ›èƒ½å¤Ÿè·Ÿå°ä¼™ä¼´ä»¬ä¸€èµ·è¿›æ­¥å‘€ï¼ç»§ç»­åŠ æ²¹ï¼ï¼]]></content>
      <categories>
        <category>echarts</category>
      </categories>
      <tags>
        <tag>echartsæºç è§£è¯»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[echartsæºç è§£è¯»ã€ŠäºŒã€‹ï¼šechartsæºç æ¦‚è¦åˆ†æ]]></title>
    <url>%2F2019%2F05%2F21%2Fecharts-2%2F</url>
    <content type="text"><![CDATA[ç»§è§£è¯»å®Œzrenderæºç ä¹‹åï¼Œæˆ‘ä»¬ä¾¿å¼€å§‹è¿›å…¥echartsæºç è§£è¯»ï¼Œechartsæ˜¯åœ¨zrenderåŸºç¡€ä¸Šè¿›è¡Œå¼€å‘çš„ï¼Œåœ¨è¿™ç¯‡åšæ–‡ä¸­ï¼Œæˆ‘å°†ä¼šåˆ†æåœ¨ä½¿ç”¨echartsæ—¶ï¼Œechartsçš„æ¸²æŸ“è¿‡ç¨‹ï¼Œæ¥ä¸‹æ¥ç³»åˆ—åšæ–‡ä¸­æˆ‘å°†ä»echartsçš„Componentä»¥åŠViewè¿›è¡Œè§£è¯»echartså¦‚ä½•å®ç°å›¾è¡¨ç»˜åˆ¶ã€‚ å¸Œæœ›èƒ½å¤Ÿä¸€èµ·åŠªåŠ›å­¦ä¹ å‘€ï¼ï¼åŠ æ²¹ï¼ï¼ å‰è¨€æˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•çš„echartsæŠ˜çº¿å›¾Demoï¼š 123456789101112131415const echartsInstance = echarts.init(document.getElementById("main"))const option = &#123; xAxis: &#123; type: 'category', data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'] &#125;, yAxis: &#123; type: 'value' &#125;, series: [&#123; data: [820, 932, 901, 934, 1290, 1330, 1320], type: 'line' &#125;]&#125;;echartsInstance.setOption(option) æ•ˆæœå›¾å¦‚ä¸‹ï¼š ä¸Šè¿°ä»£ç ï¼Œä½¿ç”¨echartså®ç°äº†ç®€å•çš„æŠ˜çº¿å›¾ï¼Œé‚£ä¹ˆechartsæ˜¯å¦‚ä½•æ ¹æ®ç”¨æˆ·è®¾å®šçš„optionè¿›è¡Œå›¾è¡¨ç»˜åˆ¶çš„å‘¢ï¼Ÿè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ä»Šå¤©éœ€è¦æ¢è®¨çš„é—®é¢˜ã€‚ Echartsè§£è¯»echarts.jsï¼Œå®šä¹‰äº†æˆ‘ä»¬ä½¿ç”¨echartsæ—¶ç›´æ¥è°ƒç”¨çš„initã€setOptionç­‰æ–¹æ³•ã€‚ åˆå§‹åŒ–echartså®ä¾‹åœ¨echarts.jsæ–‡ä»¶ä¸­é€šè¿‡export initæ–¹æ³•æä¾›ç”¨æˆ·åˆå§‹åŒ–echartså®ä¾‹çš„æ¥å£ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748export function init(dom, theme, opts) &#123; if (__DEV__) &#123; // Check version if ((zrender.version.replace('.', '') - 0) &lt; (dependencies.zrender.replace('.', '') - 0)) &#123; throw new Error( 'zrender/src ' + zrender.version + ' is too old for ECharts ' + version + '. Current version need ZRender ' + dependencies.zrender + '+' ); &#125; if (!dom) &#123; throw new Error('Initialize failed: invalid dom.'); &#125; &#125; // åˆ¤æ–­è¯¥DOMç»“æ„æ˜¯å¦å·²ç»å­˜åœ¨ç»‘å®šçš„echartså®ä¾‹ var existInstance = getInstanceByDom(dom); if (existInstance) &#123; if (__DEV__) &#123; console.warn('There is a chart instance already initialized on the dom.'); &#125; return existInstance; &#125; // éœ€è¦DOMç»“æ„è®¾å®šç‰¹å®šçš„widthä»¥åŠheightå€¼ if (__DEV__) &#123; if (zrUtil.isDom(dom) &amp;&amp; dom.nodeName.toUpperCase() !== 'CANVAS' &amp;&amp; ( (!dom.clientWidth &amp;&amp; (!opts || opts.width == null)) || (!dom.clientHeight &amp;&amp; (!opts || opts.height == null)) ) ) &#123; console.warn('Can\'t get dom width or height'); &#125; &#125; // æ–°å»ºEchartså®ä¾‹ var chart = new ECharts(dom, theme, opts); chart.id = 'ec_' + idBase++; instances[chart.id] = chart; modelUtil.setAttribute(dom, DOM_ATTRIBUTE_KEY, chart.id); enableConnect(chart); return chart;&#125; ##Echartså¯¹è±¡ Echartså¯¹è±¡å±æ€§åŒ…æ‹¬ï¼š this._zr(Zrenderå®ä¾‹) this._dom(DOM) this._theme(ä¸»é¢˜) this._chartsViews&amp;this._chartsMap(ä¿å­˜Viewæ•°æ®) this._componentsViews&amp;this._componentsMap(ä¿å­˜componentæ•°æ®) this._api(å¯¹å¤–APIæ•°æ®) this._model(è¯¥echartså®ä¾‹ä¿¡æ¯) â€¦ Echartså¯¹è±¡æ–¹æ³•åŒ…æ‹¬ï¼š getDom()ï¼šè·å–å½“å‰å®ä¾‹æ‰€æŒ‚è½½çš„DOMä¿¡æ¯ getZr()ï¼šè·å–zrenderå®ä¾‹ setOption()ï¼šè®¾ç½®echarts optionï¼ˆåç»­å°†ç€é‡è®²è§£ï¼‰ setTheme()ï¼šè®¾ç½®echartsä¸»é¢˜ getModel()ï¼šè·å–echartså®ä¾‹ getOption()ï¼šè·å–optionä¿¡æ¯ getWidth()ï¼šthis._zr.getWidth() =&gt; é€šè¿‡zrenderå®ä¾‹è¿”å›zrenderä¸­painterç”»å¸ƒçš„å¤§å° getHeight()ï¼šåŒgetWidth() getRenderedCanvas()ï¼šthis._zr.painter.getRenderedCanvas() =&gt; è·å–ç”»å¸ƒä¸­æ¸²æŸ“çš„canvaså…ƒç´  dispatchAction(): è§¦å‘actionï¼ˆåç»­å°†ç€é‡è®²è§£ï¼‰ dispose()ï¼šé”€æ¯echartså®ä¾‹ â€¦ setOptionsetOption()æ–¹æ³•ä¸ºç”¨æˆ·ä½¿ç”¨echartsæœ€ç›´æ¥çš„æ¥å£æ–¹æ³•ï¼Œç”¨æˆ·é€šè¿‡setOptionæ–¹æ³•èƒ½å¤Ÿå°†è®¾ç½®å¥½çš„optionç»‘å®šè‡³echartså›¾è¡¨ä¸­è¿›è¡Œæ˜¾ç¤ºï¼Œé‚£ä¹ˆechartså†…éƒ¨åˆæ˜¯å¦‚ä½•æ ¹æ®ç”¨æˆ·è®¾å®šçš„optionè¿›è¡Œå›¾è¡¨æ¸²æŸ“çš„å‘¢ï¼Ÿ é¦–å…ˆï¼Œæˆ‘ä»¬æ¥åˆ†æEchartsä¸­æœ€åŸºæœ¬çš„å…ƒç´ Modelã€OptionManagerä»¥åŠå…¨å±€Model OptionManagerOptionManagerä¸ºoptionç®¡ç†å™¨ï¼Œå¯¹optionè¿›è¡Œäº†ç®¡ç†ä¸å¤„ç†ï¼Œå®šä¹‰äº†setOptionã€mountOptionç­‰æ–¹æ³•ï¼ŒåŒ…æ‹¬å¯¹åŸç”Ÿoptionçš„å¤„ç†ï¼ŒåŸç”Ÿoptionæ ¼å¼å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930var option = &#123; baseOption: &#123; title: &#123;...&#125;, legend: &#123;...&#125;, series: [ &#123;data: [...]&#125;, &#123;data: [...]&#125;, ... ] &#125;, timeline: &#123;...&#125;, options: [ &#123;title: &#123;...&#125;, series: &#123;data: [...]&#125;&#125;, &#123;title: &#123;...&#125;, series: &#123;data: [...]&#125;&#125;, ... ], media: [ &#123; query: &#123;maxWidth: 320&#125;, option: &#123;series: &#123;x: 20&#125;, visualMap: &#123;show: false&#125;&#125; &#125;, &#123; query: &#123;minWidth: 320, maxWidth: 720&#125;, option: &#123;series: &#123;x: 500&#125;, visualMap: &#123;show: true&#125;&#125; &#125;, &#123; option: &#123;series: &#123;x: 1200&#125;, visualMap: &#123;show: true&#125;&#125; &#125; ]&#125;; ModelModelæ˜¯Echartsä¸­æœ€åŸºæœ¬çš„å…ƒç´ ï¼Œå…¶å®šä¹‰äº†mergeOptionç­‰æ–¹æ³•ï¼Œæ··åˆäº†LineStyleã€AraeStyleã€ItemStyleä»¥åŠTextStyleã€‚æ˜¯Componentï¼ˆåç»­ä»‹ç»ï¼‰ä»¥åŠGlobalModelç­‰å…ƒç´ çš„åŸºç±»ã€‚ GlobalModelGlobalModelæ‰©å±•è‡ªModelï¼ŒGlobalModelä¸­å®šä¹‰äº†initæ–¹æ³•ï¼Œè¦æ±‚åœ¨åˆå§‹åŒ–GloblaModelå¯¹è±¡å®ä¾‹æ—¶éœ€è¦ä¼ é€’OptionManagerå®ä¾‹ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°ï¼ŒGlobalModelä¸­å®šä¹‰äº†æŸ¥æ‰¾componentã€series(Views)ï¼Œç®¡ç†optionç­‰æ–¹æ³•ã€‚ setOption()ï¼šé€šè¿‡optionManager.setOption()å®ç° resetOption()ï¼šé€šè¿‡optionManager.mountOption()å®ç° é‡å†™mergeOption() getComponent()ï¼šé€šè¿‡componentçš„mainTypeè·å–component queryComponents()ï¼šé™¤mainTypeå¤–ï¼Œå°†idã€indexã€nameä¹Ÿä½œä¸ºæŸ¥è¯¢componentçš„æ¡ä»¶è¿›è¡Œcomponentçš„æ£€ç´¢ findComponents()ï¼šä¸queryComponentsç±»ä¼¼ï¼Œä½†echartsæºç ä¸­æœ‰æ³¨é‡Šæ­¤æ–¹æ³•æ›´æ–¹ä¾¿äºå†…éƒ¨ä½¿ç”¨ eachComponent()ï¼šéå†component getSeriesByName()ï¼šé€šè¿‡series nameè·å–series getSeriesByIndex()ï¼šé€šè¿‡seriesIndexè·å–series getSeriesByType()ï¼šé€šè¿‡series subTypeè·å–series getSeries()ï¼šè·å–seriesæ•°æ® eachSeries()ï¼šéå†series filterSeries()ï¼šæ ¹æ®æ¡ä»¶è¿‡æ»¤series setOptionè°ƒç”¨åechartsæ“ä½œæµç¨‹å›å½’setOptionæ–¹æ³•çš„è°ƒç”¨ï¼Œecharts.jsçš„setOptionæ–¹æ³•çš„ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637echartsProto.setOption = function (option, notMerge, lazyUpdate) &#123; if (__DEV__) &#123; assert(!this[IN_MAIN_PROCESS], '`setOption` should not be called during main process.'); &#125; var silent; if (isObject(notMerge)) &#123; lazyUpdate = notMerge.lazyUpdate; silent = notMerge.silent; notMerge = notMerge.notMerge; &#125; this[IN_MAIN_PROCESS] = true; if (!this._model || notMerge) &#123; var optionManager = new OptionManager(this._api); var theme = this._theme; // åˆå§‹åŒ–model var ecModel = this._model = new GlobalModel(null, null, theme, optionManager); ecModel.scheduler = this._scheduler; ecModel.init(null, null, theme, optionManager); &#125; // è°ƒç”¨GlobalModelä¸­çš„setOptionæ–¹æ³• this._model.setOption(option, optionPreprocessorFuncs); if (lazyUpdate) &#123; this[OPTION_UPDATED] = &#123;silent: silent&#125;; this[IN_MAIN_PROCESS] = false; &#125; else &#123; // å‡†å¤‡æ•°æ® prepare(this); // æ›´æ–°è§†å›¾ updateMethods.update.call(this); ... &#125;&#125;; åœ¨è°ƒç”¨globalModel.setOptionæ–¹æ³•ä¹‹åï¼Œechartsé€šè¿‡è°ƒç”¨ 1updateMethods.update.call(this); è¿›è¡Œè§†å›¾æ›´æ–°ã€‚ update()æ–¹æ³•ä¸­è°ƒç”¨äº†renderæ–¹æ³•è¿›è¡Œè§†å›¾æ¸²æŸ“ï¼Œrenderæ–¹æ³•ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617function render(ecIns, ecModel, api, payload) &#123; renderComponents(ecIns, ecModel, api, payload); each(ecIns._chartsViews, function (chart) &#123; chart.__alive = false; &#125;); renderSeries(ecIns, ecModel, api, payload); // Remove groups of unrendered charts each(ecIns._chartsViews, function (chart) &#123; if (!chart.__alive) &#123; chart.remove(ecModel, api); &#125; &#125;);&#125; renderæ–¹æ³•åˆ†ä¸ºrenderComponentsï¼ˆæ¸²æŸ“Componentï¼‰ä»¥åŠrenderSeriesï¼ˆæ¸²æŸ“seriesï¼‰ä¸¤å¤§éƒ¨åˆ†ï¼Œ renderComponentsæ–¹æ³•ä¸­é€šè¿‡eachéå†è°ƒç”¨componentä¸‹çš„renderæ–¹æ³• renderSeriesæ–¹æ³•åœ¨echarts3.0ä¸­ä¹Ÿæ˜¯é€šè¿‡eachéå†è°ƒç”¨seriesä¸‹çš„renderæ–¹æ³•ï¼Œåœ¨4.0ç‰ˆæœ¬ä¹‹åï¼Œä¾¿å°†æ§åˆ¶æ¸²æŸ“çš„é€»è¾‘äº¤ç»™äº†schedulerè°ƒåº¦å™¨è¿›è¡Œå¤„ç†ï¼Œé€šè¿‡è°ƒç”¨chartsä¸­çš„resetæ–¹æ³•è¿›è€Œè°ƒç”¨seriesä¸‹çš„renderæ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435function renderTaskReset(context) &#123; var seriesModel = context.model; var ecModel = context.ecModel; var api = context.api; var payload = context.payload; // ???! remove updateView updateVisual var progressiveRender = seriesModel.pipelineContext.progressiveRender; var view = context.view; var updateMethod = payload &amp;&amp; inner(payload).updateMethod; var methodName = progressiveRender ? 'incrementalPrepareRender' : (updateMethod &amp;&amp; view[updateMethod]) ? updateMethod // `appendData` is also supported when data amount // is less than progressive threshold. : 'render'; if (methodName !== 'render') &#123; view[methodName](seriesModel, ecModel, api, payload); &#125; return progressMethodMap[methodName];&#125;var progressMethodMap = &#123; ... render: &#123; forceFirstProgress: true, progress: function (params, context) &#123; context.view.render( context.model, context.ecModel, context.api, context.payload ); &#125; &#125;&#125;; dispatchActionæˆ‘ä»¬åœ¨ä½¿ç”¨echartsçš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šéœ€è¦ä½¿ç”¨echartså¯¹å¤–æä¾›çš„ä¸€äº›apiï¼Œå¦‚ï¼š 12345echartsInstance.dispatchAction(&#123; type: 'updateAxisPointer', x: 20, y: 30&#125;); é‚£ä¹ˆechartsæ˜¯æ€ä¹ˆå¯¹è¿™äº›apiè¿›è¡Œå¤„ç†çš„å‘¢ï¼Ÿ èƒ½å¤Ÿé€šè¿‡dispatchActionä½¿ç”¨çš„apiï¼Œé¦–å…ˆå¿…é¡»é€šè¿‡registerActionæ³¨å†Œapiï¼Œä¸¾updateAxisPointerçš„ğŸŒ°ï¼Œæ³¨å†ŒdataZoom apiçš„ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345echarts.registerAction(&#123; type: 'updateAxisPointer', event: 'updateAxisPointer', update: ':updateAxisPointer'&#125;, axisTrigger); registerActionä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324export function registerAction(actionInfo, eventName, action) &#123; // å‚æ•°å¤„ç†ï¼šå°†ä¼ é€’è¿‡æ¥çš„triggerä½œä¸ºactionè¿›è¡Œä¿å­˜ if (typeof eventName === 'function') &#123; action = eventName; eventName = ''; &#125; var actionType = isObject(actionInfo) ? actionInfo.type : ([actionInfo, actionInfo = &#123; event: eventName &#125;][0]); // Event name is all lowercase actionInfo.event = (actionInfo.event || actionType).toLowerCase(); eventName = actionInfo.event; // Validate action type and event name. assert(ACTION_REG.test(actionType) &amp;&amp; ACTION_REG.test(eventName)); // å°†actionä¿¡æ¯ä¿å­˜è‡³actions if (!actions[actionType]) &#123; actions[actionType] = &#123;action: action, actionInfo: actionInfo&#125;; &#125; eventActionMap[eventName] = actionType;&#125; è¿˜æ˜¯çœ‹updateAxisPointerè¿™ä¸ªğŸŒ°ï¼š 12345echartsInstance.dispatchAction(&#123; type: 'updateAxisPointer', x: 20, y: 30&#125;); dispatchActionçš„ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475echartsProto.dispatchAction = function (payload, opt) &#123; if (!isObject(opt)) &#123; opt = &#123;silent: !!opt&#125;; &#125; if (!actions[payload.type]) &#123; return; &#125; // Avoid dispatch action before setOption. Especially in `connect`. if (!this._model) &#123; return; &#125; // May dispatchAction in rendering procedure if (this[IN_MAIN_PROCESS]) &#123; this._pendingActions.push(payload); return; &#125; // è°ƒç”¨doDispatchAction doDispatchAction.call(this, payload, opt.silent); ...&#125;;function doDispatchAction(payload, silent) &#123; var payloadType = payload.type; var escapeConnect = payload.escapeConnect; // æ ¹æ®paoloadä¸­çš„typeä¿¡æ¯ï¼Œè·å–actionså¯¹åº”çš„actionæ•°æ® var actionWrap = actions[payloadType]; var actionInfo = actionWrap.actionInfo; var cptType = (actionInfo.update || 'update').split(':'); var updateMethod = cptType.pop(); cptType = cptType[0] != null &amp;&amp; parseClassType(cptType[0]); this[IN_MAIN_PROCESS] = true; var payloads = [payload]; var batched = false; // Batch action if (payload.batch) &#123; batched = true; payloads = zrUtil.map(payload.batch, function (item) &#123; item = zrUtil.defaults(zrUtil.extend(&#123;&#125;, item), payload); item.batch = null; return item; &#125;); &#125; var eventObjBatch = []; var eventObj; var isHighDown = payloadType === 'highlight' || payloadType === 'downplay'; each(payloads, function (batchItem) &#123; // Action can specify the event by return it. // è§¦å‘action trigger eventObj = actionWrap.action(batchItem, this._model, this._api); // Emit event outside eventObj = eventObj || zrUtil.extend(&#123;&#125;, batchItem); // Convert type to eventType eventObj.type = actionInfo.event || eventObj.type; eventObjBatch.push(eventObj); // light update does not perform data process, layout and visual. if (isHighDown) &#123; // method, payload, mainType, subType updateDirectly(this, updateMethod, batchItem, 'series'); &#125; else if (cptType) &#123; updateDirectly(this, updateMethod, batchItem, cptType.main, cptType.sub); &#125; &#125;, this); ...&#125; æ€»ç»“åšæ–‡åˆ°è¿™é‡Œå°±å·®ä¸å¤šç»“æŸäº†ï¼Œåœ¨æ­¤åšæ–‡ä¸­ï¼Œæˆ‘å¯¹echartsæ¸²æŸ“è§†å›¾çš„è¿‡ç¨‹è¿›è¡Œäº†ç®€å•çš„åˆ†æï¼Œå¹¶å¯¹setOptionä»¥åŠdispatchActionæ–¹æ³•çš„å®ç°è¿‡ç¨‹è¿›è¡Œäº†å¤§è‡´çš„åˆ†æã€‚ æ¥ä¸‹æ¥çš„æ–‡ç« å°†ä¼šæ·±å…¥Componentä»¥åŠSeriesä¸­ï¼Œè§£è¯»echartsæ˜¯å¦‚ä½•ä½¿ç”¨zrender graphicæ¸²æŸ“å›¾è¡¨çš„ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°å¤§å®¶ï½ä¸€èµ·åŠ æ²¹ï¼ï¼]]></content>
      <categories>
        <category>echarts</category>
      </categories>
      <tags>
        <tag>echartsæºç è§£è¯»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[echartsæºç è§£è¯»ã€Šä¸€ã€‹ï¼šzrenderæºç æ¦‚è¦åˆ†æ]]></title>
    <url>%2F2019%2F05%2F20%2Fecharts-1%2F</url>
    <content type="text"><![CDATA[2019å¹´é¦–æ¬¡å‘åšï¼Œä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰å‡ºå»è¿‡520å‘¢ï¼Ÿï¼Ÿæˆ‘åæ­£æ˜¯è„šä¼¤äº†ï¼å“­ ä»Šå¤©7æœˆä»½æˆ‘å°†å…¥èŒè…¾è®¯ï¼Œæˆ‘çš„å·¥ä½œå¯¼å¸ˆäº3æœˆä»½è®©æˆ‘å­¦ä¹ å¯è§†åŒ–ï¼Œå‰æ®µæ—¶é—´ä¸€ç›´åœ¨å¿™æ¯•è®¾ï¼Œä¹Ÿå°±è€½æä¸‹æ¥äº†ã€‚ åœ¨echartsæºç è§£è¯»ç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘å°†ä¼šè®°å½•æˆ‘å­¦ä¹ echartsæºç æ—¶çš„è¿‡ç¨‹ï¼Œå¹¶å¯¹echartsçš„åŸºæœ¬å®ç°è¿›è¡Œå¤§è‡´çš„è§£è¯»ï¼Œå†™åšå®¢æ˜¯ä¸ºäº†èƒ½å¤Ÿè®©è‡ªå·±å¯¹echartsæœ‰æ›´å¥½çš„äº†è§£ï¼Œä¹Ÿå¸Œæœ›èƒ½å¤Ÿé€šè¿‡åšå®¢å¸®åŠ©åˆ°éœ€è¦å­¦ä¹ è§£è¯»echartsæºç çš„å°ä¼™ä¼´ä»¬ï¼Œä¸€èµ·åŠ æ²¹å§ï¼ï¼ï¼ å‰è¨€ç”±äºechartsæ˜¯åŸºäºzrenderè¿›è¡Œå®ç°çš„ï¼Œæ‰€ä»¥è¦è§£è¯»echartsæºç ï¼Œé¦–å…ˆè¦å¯¹zrenderæœ‰å¤§è‡´çš„äº†è§£ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å¯¹zrenderçš„æ•´ä½“ç»“æ„è¿›è¡Œå¤§è‡´çš„è§£è¯»ã€‚ ä»‹ç»zrenderæ˜¯canvasçš„ä¸€ä¸ªç±»åº“ï¼Œä¹Ÿå°±æ˜¯è¯´zrenderæ˜¯åŸºäºcanvaså®ç°çš„ï¼Œcanvas APIå¯ä»¥å‚è€ƒï¼šW3CSchool Canvas å‚è€ƒæ‰‹å†Œ åœ¨åç»­çš„è§£è¯»ä¸­ï¼Œæˆ‘ä»¬ä¼šä»‹ç»zrenderä½¿ç”¨canvas api çš„ä½ç½®åŠç”¨é€”ã€‚ ç›®å½•ä»‹ç»æ–‡ä»¶å¤¹ï¼š animation åŠ¨ç”»æœ‰å…³ï¼› contain åŒ…å«åˆ¤æ–­ï¼› container Group.js å…ƒç´ ç»„çš„æ¦‚å¿µï¼› core æ ¸å¿ƒä»£ç ï¼ŒåŒ…å«ä¸€äº›å·¥å…·ï¼ˆutil.jsï¼‰ã€äº‹ä»¶ï¼ˆevent.jsï¼‰ã€å”¯ä¸€ID(guid.js)ã€çŸ©é˜µè¿ç®—æœ‰å…³ï¼ˆmatrix.jsï¼‰ç­‰ï¼› dom HandleProxy.js domäº‹ä»¶æœ‰å…³ï¼› graphic å›¾å½¢æœ‰å…³ï¼Œshapeæ–‡ä»¶å¤¹ä¸‹å°±æ˜¯å„ä¸ªå›¾å½¢çš„jsæ–‡ä»¶ï¼› mixin æ··å…¥æ¨¡å¼è¦æ··å…¥çš„å‡½æ•°; tool å·¥å…·å‡½æ•°ï¼ŒåŒ…æ‹¬é¢œè‰²å·¥å…·(color.js)ï¼Œpathå·¥å…·(path.js)å’Œè½¬æ¢å·¥å…·ï¼ˆtransformPath.jsï¼‰; vml IEä¸­çš„ç”»ç¬”ï¼Œvmlè§£é‡Š å…¨å±€çš„æ–‡ä»¶ï¼š config.js é…ç½®æ–‡ä»¶ Element.js å…ƒç´ æ–‡ä»¶ä½œä¸ºzrenderæœ€åŸºæœ¬çš„å…ƒç´  Handle.js Cå±‚ï¼Œæ§åˆ¶å±‚ Layer.js å›¾å±‚ç®¡ç† Painter.js Vå±‚ï¼Œè§†å›¾å±‚ Storage.js Må±‚ï¼Œæ•°æ®ç®¡ç†å±‚ zrender.js å…¥å£ zrenderæ•´ä½“æ¶æ„zrenderé‡‡ç”¨äº†MVCå°è£…ï¼ŒMä¸ºModelæ•°æ®å±‚ï¼ŒVä¸ºViewè§†å›¾å±‚ï¼ŒCä¸ºControlleræ§åˆ¶å±‚ï¼š Storage(M)ï¼šStorageä¸ºzrenderä¸­çš„Modelå±‚ï¼Œå®ƒä¸»è¦è¿›è¡Œå›¾å½¢æ•°æ®çš„å¢åˆ æ”¹æŸ¥(CRUD)æ“ä½œï¼› Painter(V)ï¼šPainterä¸ºzrenderä¸­çš„Viewå±‚ï¼Œå®ƒä¸»è¦å¯¹canvaså…ƒç´ çš„ç”Ÿå‘½å‘¨æœŸè¿›è¡Œç®¡ç†ï¼Œæ¸²æŸ“è§†å›¾ä»¥åŠæ§åˆ¶æ›´æ–°ç­‰ã€‚å®šä¹‰äº†addHoverã€setBackgroundColorç­‰æ–¹æ³•ï¼› Handler(C)ï¼šHandlerä¸ºzrenderä¸­çš„Controllerå±‚ï¼Œå®ƒä¸»è¦å®ç°äº‹ä»¶äº¤äº’å¤„ç†ï¼Œå®ç°å®Œæ•´domäº‹ä»¶çš„æ¨¡æ‹Ÿå°è£…ã€‚ å›¾å½¢å¤„äºgraphicæ–‡ä»¶å¤¹ä¸‹ï¼Œzrenderå®šä¹‰äº†ä¸€ç³»åˆ—å›¾å½¢ï¼Œä¾›å¤–ç•Œè°ƒç”¨ï¼ŒåŒ…æ‹¬åœ†å½¢ã€çŸ©å½¢ã€å¿ƒå½¢ã€æ‰‡å½¢ã€å¤šè¾¹å½¢ã€æŠ˜çº¿ç­‰ï¼Œechartsé€šè¿‡è°ƒç”¨zrenderå®šä¹‰å¥½çš„å›¾å½¢ï¼Œå¯ä»¥å¾ˆä¾¿æ·åœ°å®Œæˆå›¾è¡¨æ¸²æŸ“ã€‚ DisplayableDisplayable.jsä¸ºPathã€Textç­‰çš„åŸºç±»ï¼Œç»§æ‰¿è‡ªElementï¼Œå®šä¹‰äº†setStyleã€useStyleç­‰æ–¹æ³•ï¼Œ Textæ–‡æœ¬ï¼Œç»§æ‰¿è‡ªDisplayableï¼Œè°ƒç”¨äº†helper/text.jsä¸­çš„renderTextæ–¹æ³•è¿›è¡Œç»˜åˆ¶ã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345export function renderText(hostEl, ctx, text, style, rect, prevEl) &#123; style.rich ? renderRichText(hostEl, ctx, text, style, rect, prevEl) : renderPlainText(hostEl, ctx, text, style, rect, prevEl);&#125; æ–‡æœ¬åˆ†ä¸ºå¯Œæ–‡æœ¬ä»¥åŠæ™®é€šæ–‡æœ¬è¿›è¡Œåˆ†åˆ«æ¸²æŸ“ï¼Œå®ƒä»¬å‡é€šè¿‡è°ƒç”¨canvasçš„ctx.fillTextæˆ–ctx.strokeText ç­‰apiè¿›è¡Œæ–‡æœ¬æ¸²æŸ“ï¼Œå…·ä½“å®ç°å¯ä»¥æŸ¥çœ‹helper/text.jsæ–‡ä»¶ã€‚ Styleå›¾å½¢çš„æ ·å¼æ–‡ä»¶ï¼Œå®šä¹‰äº†åŸºæœ¬çš„æ ·å¼å±æ€§ï¼Œä»¥åŠæ ·å¼setã€cloneä»¥åŠåˆ¤æ–­ç­‰æ–¹æ³•ã€‚ Pathpathä¸ºå›¾å½¢çš„åŸºç±»ï¼Œç»§æ‰¿è‡ªDisplayableï¼Œå®šä¹‰äº†buildPathã€getBoundingRectã€setShapeç­‰æ–¹æ³•ï¼Œå…¶åŒ…å«this._styleå±æ€§å³ä¸ºStyleå¯¹è±¡å®ä¾‹ã€‚ Shapeshapeæ–‡ä»¶ä¸‹å­˜æ”¾ç€zrenderå®šä¹‰çš„å›¾å½¢æ–‡ä»¶ï¼Œæ‰©å±•è‡ªPathã€‚ Circleåœ†å½¢ï¼Œé€šè¿‡è°ƒç”¨Path.extendæ–¹æ³•è¿›è¡Œæ‰©å±•ï¼Œé‡å†™äº†buildPathæ–¹æ³•ï¼ŒbuildPathè°ƒç”¨äº†canvas apiï¼šctx.arcè¿›è¡Œåœ†å½¢çš„ç»˜åˆ¶ï¼Œä¸»è¦å®ç°ä»£ç å¦‚ä¸‹ï¼š 123456buildPath: function (ctx, shape, inBundle) &#123; if (inBundle) &#123; ctx.moveTo(shape.cx + shape.r, shape.cy); &#125; ctx.arc(shape.cx, shape.cy, shape.r, 0, Math.PI * 2, true);&#125; Arcå¼§å½¢ï¼Œé€šè¿‡è°ƒç”¨Path.extendæ–¹æ³•è¿›è¡Œæ‰©å±•ï¼Œé‡å†™äº†buildPathæ–¹æ³•ï¼ŒbuildPathè°ƒç”¨äº†canvas apiï¼šctx.arcè¿›è¡Œå¼§å½¢çš„ç»˜åˆ¶ï¼Œä¸»è¦å®ç°ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314buildPath: function (ctx, shape) &#123; var x = shape.cx; var y = shape.cy; var r = Math.max(shape.r, 0); var startAngle = shape.startAngle; var endAngle = shape.endAngle; var clockwise = shape.clockwise; var unitX = Math.cos(startAngle); var unitY = Math.sin(startAngle); ctx.moveTo(unitX * r + x, unitY * r + y); ctx.arc(x, y, r, startAngle, endAngle, !clockwise);&#125; Heartå¿ƒå½¢â¤ï¸ï¼Œé€šè¿‡è°ƒç”¨Path.extendæ–¹æ³•è¿›è¡Œæ‰©å±•ï¼Œé‡å†™äº†buildPathæ–¹æ³•ï¼ŒbuildPathè°ƒç”¨äº†canvas apiï¼šctx.bezierCurveToè¿›è¡Œå¼§å½¢çš„ç»˜åˆ¶ï¼Œä¸»è¦å®ç°ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617buildPath: function (ctx, shape) &#123; var x = shape.cx; var y = shape.cy; var a = shape.width; var b = shape.height; ctx.moveTo(x, y); ctx.bezierCurveTo( x + a / 2, y - b * 2 / 3, x + a * 2, y + b / 3, x, y + b ); ctx.bezierCurveTo( x - a * 2, y + b / 3, x - a / 2, y - b * 2 / 3, x, y );&#125; bezierCurveTo(æ§åˆ¶ç‚¹1xåæ ‡, æ§åˆ¶ç‚¹1yåæ ‡, æ§åˆ¶ç‚¹2xåæ ‡, æ§åˆ¶ç‚¹2yåæ ‡, ç»“æŸç‚¹xåæ ‡, ç»“æŸç‚¹yåæ ‡) ä¸‰æ¬¡è¢«å¡å°”æ›²çº¿ç»˜åˆ¶ï¼š P0ä¸ºå¼€å§‹ç‚¹ï¼ŒP1ä¸ºæ§åˆ¶ç‚¹1ï¼ŒP2ä¸ºæ§åˆ¶ç‚¹2ï¼ŒP3ä¸ºç»“æŸç‚¹ å– P0P1 ä¸­ç‚¹M å– P1P2 ä¸­ç‚¹Mâ€™ å– MMâ€™ ä¸­ç‚¹P åˆ™ P ä¸ºæ›²çº¿çš„å¿…ç»ç‚¹ å…·ä½“ç»˜åˆ¶å›¾å¦‚ä¸‹ï¼š åŒç†ï¼Œæˆ‘ä»¬å¯ä»¥ç»˜åˆ¶å‡ºå·¦åŠè¾¹å¿ƒå½¢ï¼š Dropletæ°´æ»´å½¢çŠ¶ğŸ’§ï¼Œé€šè¿‡è°ƒç”¨Path.extendæ–¹æ³•è¿›è¡Œæ‰©å±•ï¼Œé‡å†™äº†buildPathæ–¹æ³•ï¼ŒbuildPathè°ƒç”¨äº†canvas apiï¼šctx.bezierCurveToè¿›è¡Œå¼§å½¢çš„ç»˜åˆ¶ï¼Œè´å¡å°”æ›²çº¿çš„ç»˜åˆ¶è¿‡ç¨‹åŒå¿ƒå½¢ç»˜åˆ¶åŸç†ï¼Œä¸»è¦å®ç°ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425buildPath: function (ctx, shape) &#123; var x = shape.cx; var y = shape.cy; var a = shape.width; var b = shape.height; ctx.moveTo(x, y + a); ctx.bezierCurveTo( x + a, y + a, x + a * 3 / 2, y - a / 3, x, y - b ); ctx.bezierCurveTo( x - a * 3 / 2, y - a / 3, x - a, y + a, x, y + a ); ctx.closePath();&#125; Ellipseæ¤­åœ†ï¼Œé€šè¿‡è°ƒç”¨Path.extendæ–¹æ³•è¿›è¡Œæ‰©å±•ï¼Œé‡å†™äº†buildPathæ–¹æ³•ï¼ŒbuildPathè°ƒç”¨äº†canvas apiï¼šctx.bezierCurveToè¿›è¡Œå¼§å½¢çš„ç»˜åˆ¶ï¼Œè´å¡å°”æ›²çº¿çš„ç»˜åˆ¶è¿‡ç¨‹åŒå¿ƒå½¢ç»˜åˆ¶åŸç†ï¼Œä¸»è¦å®ç°ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516buildPath: function (ctx, shape) &#123; var k = 0.5522848; var x = shape.cx; var y = shape.cy; var a = shape.rx; var b = shape.ry; var ox = a * k; // æ°´å¹³æ§åˆ¶ç‚¹åç§»é‡ var oy = b * k; // å‚ç›´æ§åˆ¶ç‚¹åç§»é‡ // ä»æ¤­åœ†çš„å·¦ç«¯ç‚¹å¼€å§‹é¡ºæ—¶é’ˆç»˜åˆ¶å››æ¡ä¸‰æ¬¡è´å¡å°”æ›²çº¿ ctx.moveTo(x - a, y); ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b); ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y); ctx.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b); ctx.bezierCurveTo(x - ox, y + b, x - a, y + oy, x - a, y); ctx.closePath();&#125; Sectoræ‰‡å½¢ï¼Œé€šè¿‡è°ƒç”¨Path.extendæ–¹æ³•è¿›è¡Œæ‰©å±•ï¼Œé‡å†™äº†buildPathæ–¹æ³•ï¼ŒbuildPathè°ƒç”¨äº†canvas apiï¼šctx.arcä»¥åŠarc.lineToè¿›è¡Œåœ†å½¢çš„ç»˜åˆ¶ï¼Œä¸»è¦å®ç°ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829buildPath: function (ctx, shape) &#123; var x = shape.cx; var y = shape.cy; var r0 = Math.max(shape.r0 || 0, 0); var r = Math.max(shape.r, 0); var startAngle = shape.startAngle; var endAngle = shape.endAngle; var clockwise = shape.clockwise; var unitX = Math.cos(startAngle); var unitY = Math.sin(startAngle); ctx.moveTo(unitX * r0 + x, unitY * r0 + y); ctx.lineTo(unitX * r + x, unitY * r + y); ctx.arc(x, y, r, startAngle, endAngle, !clockwise); ctx.lineTo( Math.cos(endAngle) * r0 + x, Math.sin(endAngle) * r0 + y ); if (r0 !== 0) &#123; ctx.arc(x, y, r0, endAngle, startAngle, clockwise); &#125; ctx.closePath();&#125; zrenderè¿˜å®šä¹‰äº†RectçŸ©å½¢ã€Isogonæ­£å¤šè¾¹å½¢ã€Lineç›´çº¿ã€Polygonå¤šè¾¹å½¢ã€PolylineæŠ˜çº¿ã€Ringåœ†ç¯ã€Roseç«ç‘°çº¿ã€Star nè§’æ˜Ÿç­‰å›¾å½¢ï¼Œå…¶å®ç°è¿‡ç¨‹åŸºæœ¬ä¸ä¸Šè¿°å›¾å½¢ä¸Šç±»ä¼¼ï¼Œéƒ½æ˜¯åŸºäºcanvasçš„lineToã€arcã€bezierCurveToç­‰apiè¿›è¡Œç»˜åˆ¶çš„ï¼Œè¿™è¾¹å°±ä¸åšä¸€ä¸€ä»‹ç»äº†ã€‚ æ€»ç»“zrenderä¸­å°è£…äº†å¾ˆå¤šå·¥å…·ï¼Œåœ¨åç»­echartsæºç è§£è¯»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°echartsæ˜¯åŸºäºzrenderè¿›è¡Œå¼€å‘çš„ã€‚ å¸Œæœ›è¿™ç¯‡åšæ–‡èƒ½å¤Ÿå¸®åŠ©å¤§å®¶å¯¹zrenderåŠå…¶å®ç°çš„å›¾å½¢æœ‰å¤§è‡´çš„äº†è§£ï½]]></content>
      <categories>
        <category>echarts</category>
      </categories>
      <tags>
        <tag>echartsæºç è§£è¯»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[äº‘æœåŠ¡å™¨ä¹‹åå°è¿è¡Œ]]></title>
    <url>%2F2018%2F05%2F29%2Fnohup-sh%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨å°†é¡¹ç›®éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ä¸Šï¼Œæ‰€ä»¥ä¹Ÿå†™äº†å¥½å‡ ç¯‡åšå®¢ï¼Œå…³äºåœ¨éƒ¨ç½²é¡¹ç›®æ—¶é‡åˆ°çš„é—®é¢˜ï¼Œæ­¤æ¬¡æˆ‘ä¸»è¦æ˜¯è®°å½•å¦‚ä½•å°†é¡¹ç›®åœ¨åå°è¿è¡Œï¼Œä¸”ä¸ä¼šå› ä¸ºæ–­å¼€ä¸äº‘æœåŠ¡å™¨çš„è¿æ¥è€Œè¢«ç»ˆæ­¢ï¼Œå¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï½ å‰è¨€æ­¤ç¯‡åšå®¢æ˜¯å› ä¸ºæˆ‘åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº†&amp;ï¼Œè®©é¡¹ç›®åå°è¿è¡Œèƒ½å¤Ÿæ­£å¸¸è®¿é—®åï¼Œä¾¿ä½¿ç”¨logoutå‘½ä»¤æ–­å¼€äº†ä¸äº‘æœåŠ¡å™¨çš„è¿æ¥ï¼Œæ–­å¼€åå†æ¬¡è®¿é—®ï¼Œå´å‘ç°è®¿é—®å¤±è´¥äº†ï¼Œäºæ˜¯å†æ¬¡è¿æ¥äº‘æœåŠ¡å™¨ï¼Œé€šè¿‡jobsæŸ¥çœ‹åå°è¿›ç¨‹ï¼Œå‘ç°åˆšåˆšåœ¨åå°è¿è¡Œçš„é¡¹ç›®å·²ç»è¢«ç»ˆæ­¢äº†ã€‚ åå°è¿è¡Œè¿›ç¨‹å› ä¸ºæˆ‘æ˜¯è¿è¡Œexpressé¡¹ç›®(example)ï¼Œæ‰€ä»¥æˆ‘å…ˆè¿›å…¥exampleç›®å½•ï¼Œæ‰§è¡Œï¼š 1vim test.sh è¯¥å‘½ä»¤ä»¥ä½ åœ¨ç¼–è¾‘ç¯å¢ƒä¸­è¾“å…¥çš„å†…å®¹(npm start)ä½œä¸ºæ–‡ä»¶å†…å®¹ï¼Œåœ¨å½“å‰ç›®å½•ç”Ÿæˆtest.shæ–‡ä»¶ 1nohup ./test.sh &amp; é€šè¿‡nohupæ‰§è¡Œè¯¥shæ–‡ä»¶ï¼Œåˆ™æˆåŠŸå°†è¿›ç¨‹æ”¾ç½®åœ¨åå°è¿è¡Œäº†ï¼Œä½ å¯ä»¥çœ‹åˆ°åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆäº†åä¸ºnohup.outçš„æ–‡ä»¶ ç»ˆæ­¢è¿›ç¨‹é¦–å…ˆé€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹åå°è¿è¡Œçš„è¿›ç¨‹å· 1netstat -lnp | grep ç«¯å£å· åœ¨é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç»ˆæ­¢è¿›ç¨‹ 1kill -9 è¿›ç¨‹å· æ€»ç»“å¾ˆç®€å•ä½†å¾ˆå®ç”¨ï½å¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï½]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>nohup</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[äº‘æœåŠ¡å™¨ä¹‹ä»£ç†]]></title>
    <url>%2F2018%2F05%2F28%2Fserver-proxy%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©æƒ³ç€è¦æŠŠè‡ªå·±åšçš„é‚£ä¸ªDemoéƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šï¼Œå´å‘ç°åœ¨æœ¬åœ°å¯ä»¥æ­£å¸¸ä»£ç†çš„è¯·æ±‚ï¼Œåœ¨ç»è¿‡æ‰“åŒ…éƒ¨ç½²åï¼Œapiè¯·æ±‚ä»£ç†ä¼¼ä¹å·²ç»å¤±æ•ˆäº†ã€‚èŠ±äº†å¾ˆä¹…çš„æ—¶é—´åœ¨è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ€åç‰¹åˆ«æ„Ÿè°¢æŸä¿®ç»™äºˆçš„çµæ„Ÿä»¥åŠå­¦é•¿çš„è€å¿ƒè§£ç­”ï¼Œä¸ºäº†ä¾¿äºä»¥åæ›´æ–¹ä¾¿åœ°ä½¿ç”¨ï¼Œæˆ‘å°†ä¹‹è®°å½•ä¸‹æ¥ï¼Œä¹Ÿå¸Œæœ›èƒ½å¤Ÿå¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï½ å‰è¨€åœ¨äº‘æœåŠ¡å™¨ä¸Šï¼Œæˆ‘ä½¿ç”¨äº†nginxä½œä¸ºæˆ‘çš„webæœåŠ¡å™¨ï¼Œnginx ä½œä¸ºç›®å‰æœ€æµè¡Œçš„webæœåŠ¡å™¨ä¹‹ä¸€ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®ç°åå‘ä»£ç†ã€‚å½“åœ¨ä¸€å°ä¸»æœºä¸Šéƒ¨ç½²äº†å¤šä¸ªä¸åŒçš„webæœåŠ¡å™¨ï¼Œå¹¶ä¸”éœ€è¦èƒ½åœ¨80ç«¯å£åŒæ—¶è®¿é—®è¿™äº›webæœåŠ¡å™¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ nginx çš„åå‘ä»£ç†åŠŸèƒ½: ç”¨ nginx åœ¨80ç«¯å£ç›‘å¬æ‰€æœ‰è¯·æ±‚ï¼Œå¹¶ä¾æ®è½¬å‘è§„åˆ™(æ¯”è¾ƒå¸¸è§çš„æ˜¯ä»¥ URI æ¥è½¬å‘)è½¬å‘åˆ°å¯¹åº”çš„webæœåŠ¡å™¨ä¸Šã€‚åœ¨æˆ‘çš„é¡¹ç›®ä¸­ï¼Œæ˜¯å› ä¸ºæ‰€éœ€è¦è¯·æ±‚çš„APIä½äºæœåŠ¡å™¨ä¸Šçš„ä¸åŒç«¯å£ï¼Œä¸ºäº†å®ç°è·¨åŸŸè¯·æ±‚ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œä»£ç†ã€‚ ä»£ç†æˆ‘çš„æœåŠ¡å™¨åŸŸåä¸ºqq.qiuruolin.cn ä¸å¸¦URIçš„ä»£ç†é…ç½®12345678http &#123; server &#123; server_name qq.qiuruolin.cn; location /api/ &#123; proxy_pass http://qq.qiuruolin.cn:3000; &#125; &#125;&#125; ä»¥ä¸Šçš„é…ç½®ä¼š http://qq.qiuruolin.cn/api ä¸‹çš„è¯·æ±‚( GET å’Œ POST è¯·æ±‚éƒ½ä¼šè½¬å‘)è½¬å‘åˆ° http://qq.qiuruolin.cn:3000/ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä»¥ä¸Šçš„é…ç½®ä¸­ï¼Œhttp://qq.qiuruolin.cn:3000æ˜¯æ²¡æœ‰æŒ‡å®šURIçš„ã€‚ å¦‚æœä»£ç†æœåŠ¡å™¨åœ°å€ä¸­æ˜¯å¸¦æœ‰URIçš„ï¼Œæ­¤URIä¼šæ›¿æ¢æ‰ location æ‰€åŒ¹é…çš„URIéƒ¨åˆ†ã€‚ å¦‚æœä»£ç†æœåŠ¡å™¨åœ°å€ä¸­æ˜¯ä¸å¸¦æœ‰URIçš„ï¼Œåˆ™ä¼šç”¨å®Œæ•´çš„è¯·æ±‚URLæ¥è½¬å‘åˆ°ä»£ç†æœåŠ¡å™¨ã€‚ å¸¦URIçš„ä»£ç†é…ç½®12345678http &#123; server &#123; server_name qq.qiuruolin.cn; location /api/ &#123; proxy_pass http://qq.qiuruolin.cn:3000/uri/; &#125; &#125;&#125; ä¸¾ğŸŒ°ï¼š ä¸å¸¦URIhttp://qq.qiuruolin.cn/api/user/register-&gt; http://qq.qiuruolin.cn:3000/api/user/register å¸¦URIhttp://qq.qiuruolin.cn/api/user/register-&gt; http://qq.qiuruolin.cn:3000/uri/user/register æ€»ç»“è¿™æ¬¡åœ¨æœåŠ¡å™¨ä¸Šçš„ä»£ç†ï¼Œå¼€å§‹çš„æ—¶å€™çœŸçš„è®©æˆ‘æ„Ÿè§‰åˆ°å¾ˆæ··ä¹±ï¼Œä»¥æ­¤åšå®¢çºªå¿µæ›¾ç»æ··ä¹±çš„è‡ªå·±ï½å¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï½ç»§ç»­åŠªåŠ›ï¼ï¼ï¼]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>æœåŠ¡å™¨ä»£ç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linuxä¹‹MySQLæ•°æ®åº“å¸¸ç”¨æ“ä½œ]]></title>
    <url>%2F2018%2F05%2F28%2FLinux-mysql%2F</url>
    <content type="text"><![CDATA[å› ä¸ºæœ€è¿‘åœ¨ä½¿ç”¨äº‘æœåŠ¡å™¨éƒ¨ç½²é¡¹ç›®ï¼Œæ‰€ä»¥ä¹Ÿéš¾å…è¦åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨MySQLï¼Œæ‰€ä»¥å°±æƒ³æŠŠMySQLå¸¸ä½¿ç”¨è®°å½•ä¸‹æ¥ï¼Œä»¥ä¾¿æ—¥åæŸ¥çœ‹å¹¶ç†Ÿæ‚‰ï½ä¹Ÿå¸Œæœ›èƒ½å¤Ÿå¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï½ å‡†å¤‡é¦–å…ˆä½ éœ€è¦åœ¨äº‘æœåŠ¡å™¨ä¸Šä¸‹è½½å®‰è£…MySQLï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šå¤§ç‰›ä»¬éƒ½å†™äº†ç›¸å…³çš„åšå®¢ï¼Œè¿™é‡Œå°±ä¸å†é‡å¤å•¦ï½æ³¨æ„ï¼šMySQL ä¸­æ¯ä¸ªå‘½ä»¤åéƒ½è¦ä»¥åˆ†å·;ç»“å°¾ã€‚ æ˜¾ç¤ºæ•°æ®åº“show databases;1show databases; Mysql åˆšå®‰è£…å®Œæœ‰ä¸¤ä¸ªæ•°æ®åº“ï¼šmysql å’Œtestã€‚mysql åº“éå¸¸é‡è¦ï¼Œå®ƒé‡Œé¢æœ‰MySQL çš„ç³»ç»Ÿä¿¡æ¯ï¼Œæˆ‘ä»¬æ”¹å¯†ç å’Œæ–°å¢ç”¨æˆ·ï¼Œå®é™…ä¸Šå°±æ˜¯ç”¨è¿™ä¸ªåº“ä¸­çš„ç›¸å…³è¡¨è¿›è¡Œæ“ä½œã€‚ å»ºåº“ï¼šcreate database åº“å; ä¾‹å¦‚ï¼šåˆ›å»ºä¸€ä¸ªåå­—ä½nodeçš„åº“ 1create database node; å»ºè¡¨ï¼šcreate table è¡¨å (å­—æ®µè®¾å®šåˆ—è¡¨); ä¾‹å¦‚ï¼šåœ¨åˆšåˆ›å»ºçš„nodeåº“ä¸­å»ºç«‹è¡¨user, è¡¨ä¸­æœ‰uid(åºå·, è‡ªåŠ¨å¢é•¿), username(å§“å), password(å¯†ç ), email(é‚®ç®±)å››ä¸ªå­—æ®µ 12use node;create table user (uid int(4) auto_increment not null primary key, username varchar(255), password varchar(255), email varchar(255)); æ˜¾ç¤ºæ•°æ®åº“ä¸­çš„è¡¨show tables;12use node; //æ‰“å¼€åº“show tables; æ˜¾ç¤ºæ•°æ®è¡¨çš„ç»“æ„ï¼šdescribe è¡¨å;1describe user; å¢åŠ è®°å½•ä¾‹å¦‚ï¼šå¢åŠ å‡ æ¡ç›¸å…³è®°å½•ã€‚ 12insert into user(username, password, email) values('qiuqiu', 'qqq', 'qiw@qq.com');insert into user(username, password, email) values('hehe', '123456', 'wywu@qq.com'); æ˜¾ç¤ºè¡¨ä¸­çš„è®°å½•ï¼šå¯ä»¥ä½¿ç”¨select * from è¡¨å;æ¥æŸ¥çœ‹æˆ‘ä»¬è¡¨ä¸­çš„æ•°æ® 1select * from user; ä¿®æ”¹è®°å½•ä¾‹å¦‚ï¼šå°†qiuqiuçš„å¯†ç æ”¹ä¸º123 1update user set password='123' where username='qiuqiu'; åˆ é™¤è®°å½•ä¾‹å¦‚ï¼šåˆ é™¤qiuqiuçš„çºªå½•ã€‚ 1delete from user where username='qiuqiu'; åˆ åº“å’Œåˆ è¡¨drop database åº“å; drop table è¡¨å; å¢åŠ MySQL ç”¨æˆ·grant select on æ•°æ®åº“.* to ç”¨æˆ·å@ç™»å½•ä¸»æœº identified by â€œå¯†ç â€ ä¾‹1ã€å¢åŠ ä¸€ä¸ªç”¨æˆ·user_1å¯†ç ä¸º123ï¼Œè®©ä»–å¯ä»¥åœ¨ä»»ä½•ä¸»æœºä¸Šç™»å½•ï¼Œå¹¶å¯¹æ‰€æœ‰æ•°æ®åº“æœ‰æŸ¥è¯¢ã€æ’å…¥ã€ä¿®æ”¹ã€åˆ é™¤çš„æƒé™ã€‚é¦–å…ˆç”¨ä»¥rootç”¨æˆ·è¿å…¥MySQL ï¼Œç„¶åé”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š 1grant select, insert, update, delete on *.* to mailto:user_1@" " Identified by "123"; å¤‡ä»½ä¸æ¢å¤å¤‡ä»½ä¾‹å¦‚ï¼šå°†ä¸Šä¾‹åˆ›å»ºçš„nodeåº“å¤‡ä»½åˆ°æ–‡ä»¶back_nodeä¸­ 12# cd /home/data/mysql (è¿›å…¥åˆ°åº“ç›®å½•)# mysqldump -u root -p â€“opt node &gt; back_node æ¢å¤1# mysql -u root -p recover_node &lt; back_node æ€»ç»“ä¸ºäº†é˜²æ­¢è‡ªå·±ä»¥åå¿˜è®°ï¼Œæ‰€ä»¥æˆ‘åœ¨è¿™é‡Œè®°å½•äº†ä¸€äº›é€šè¿‡å‘½ä»¤è€Œè¿›è¡Œçš„ä¸€äº›å¸¸ç”¨çš„MySQLæ•°æ®åº“æ“ä½œï¼Œå†…å®¹å¾ˆç®€å•ï¼Œä¸»è¦æ˜¯ä¸ºäº†ä¾¿äºè‡ªå·±ä»¥åæŸ¥é˜…ï¼Œä¹Ÿå¸Œæœ›èƒ½å¤Ÿå¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï½]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Reactä¹‹ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ]]></title>
    <url>%2F2018%2F05%2F27%2Freact-life-circle%2F</url>
    <content type="text"><![CDATA[åœ¨å­¦ä¹ Reactæ—¶ï¼Œæœ‰æ—¶å€™é‡åˆ°æ•°æ®æ›´æ–°ï¼Œè€Œç•Œé¢å´ä¸èƒ½åŠæ—¶æ›´æ–°çš„é—®é¢˜ï¼ŒæŸ¥äº†å¾ˆå¤šèµ„æ–™ï¼Œå¤§éƒ¨åˆ†åŸå› æ˜¯å› ä¸ºå¯¹Reactç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ²¡æœ‰å¾ˆå¥½åœ°ç†è§£ï¼Œæ‰€ä»¥ç‰¹åœ°æƒ³æŠŠç”Ÿå‘½å‘¨æœŸæœ‰å…³çš„çŸ¥è¯†è®°å½•ä¸‹æ¥ï¼Œä¾¿äºè‡ªå·±ç†è§£å’Œå­¦ä¹ ï¼Œä¹Ÿå¸Œæœ›èƒ½å¤Ÿå¯¹å¤§å®¶æœ‰ä¸€äº›å¸®åŠ©ï½ å‰è¨€Reactç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€å¯åˆ†ä¸ºä¸‰ç§ï¼š Mounting: å·²æ’å…¥çœŸå®DOM Updating: æ­£åœ¨è¢«é‡æ–°æ¸²æŸ“ Unmounting: å·²ç§»å‡ºçœŸå®DOM ç»„ä»¶æŒ‚è½½çš„ç»å…¸å›¾ç‰‡ï¼š æ¥ä¸‹æ¥æˆ‘å°†ä¼šè¯¦ç»†è¯´æ˜ä¸€ä¸‹è¿™å‡ ä¸ªç”Ÿå‘½å‘¨æœŸçš„æ„ä¹‰ å®ä¾‹åŒ–é¦–æ¬¡è°ƒç”¨ç»„ä»¶æ—¶ï¼Œæœ‰ä»¥ä¸‹æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼ˆæ³¨æ„é¡ºåºï¼Œä»ä¸Šåˆ°ä¸‹å…ˆåæ‰§è¡Œï¼‰ï¼š getDefaultProps()ï¼šè¿™ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥è®¾ç½®ç»„ä»¶é»˜è®¤çš„propsï¼Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸåªä¼šè°ƒç”¨ä¸€æ¬¡ã€‚è¿™ä¸ªæ–¹æ³•åœ¨å¯¹è±¡è¢«åˆ›å»ºä¹‹å‰æ‰§è¡Œï¼Œå› æ­¤ä¸èƒ½åœ¨æ–¹æ³•å†…è°ƒç”¨this.propsã€‚ getInitialState()ï¼šè®¾ç½®stateåˆå§‹å€¼ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ä½ å·²ç»å¯ä»¥è®¿é—®åˆ°this.propsã€‚ componentWillMount()ï¼šè¯¥æ–¹æ³•ä¼šåœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“ä¹‹å‰è°ƒç”¨ï¼Œè¿™ä¸ªæ˜¯åœ¨renderæ–¹æ³•è°ƒç”¨å‰å¯ä¿®æ”¹stateçš„æœ€åä¸€æ¬¡æœºä¼šã€‚ render()ï¼šè°ƒç”¨render()æ–¹æ³•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥this.propså’Œthis.stateè¿”å›ä¸€ä¸ªå­å…ƒç´ ï¼Œå­å…ƒç´ å¯ä»¥æ˜¯DOMç»„ä»¶æˆ–è€…å…¶ä»–è‡ªå®šä¹‰å¤åˆæ§ä»¶çš„è™šæ‹Ÿå®ç° ï¼Œå¦‚æœä¸æƒ³æ¸²æŸ“å¯ä»¥è¿”å›nullæˆ–è€…falseã€‚render()æ–¹æ³•æ˜¯å¾ˆçº¯å‡€çš„ï¼Œè¿™å°±æ„å‘³ç€ä¸è¦åœ¨è¿™ä¸ªæ–¹æ³•é‡Œåˆå§‹åŒ–ç»„ä»¶çš„stateï¼Œæ¯æ¬¡æ‰§è¡Œæ—¶è¿”å›ç›¸åŒçš„å€¼ï¼Œä¸ä¼šè¯»å†™DOMæˆ–è€…ä¸æœåŠ¡å™¨äº¤äº’ã€‚ componentDidMount()ï¼šåœ¨é¦–æ¬¡çœŸå®çš„DOMæ¸²æŸ“åè°ƒç”¨ï¼ˆä»…æ­¤ä¸€æ¬¡ï¼‰ï¼Œåªåœ¨å®¢æˆ·ç«¯ã€‚ä¹‹åç»„ä»¶å·²ç»ç”Ÿæˆäº†å¯¹åº”çš„DOMç»“æ„ï¼Œå¯ä»¥é€šè¿‡this.getDOMNode()æ¥è¿›è¡Œè®¿é—®ã€‚ å¦‚æœä½ æƒ³å’Œå…¶ä»–JavaScriptæ¡†æ¶ä¸€èµ·ä½¿ç”¨ï¼Œå¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è°ƒç”¨setTimeout, setIntervalæˆ–è€…å‘é€AJAXè¯·æ±‚ç­‰æ“ä½œ(é˜²æ­¢å¼‚éƒ¨æ“ä½œé˜»å¡UI)ã€‚ å­˜åœ¨æœŸå®ä¾‹åŒ–åï¼Œå½“propsæˆ–è€…stateå‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¸‹é¢æ–¹æ³•ä¾æ¬¡è¢«è°ƒç”¨ï¼š componentWillReceiveProps()ï¼šåœ¨ç»„ä»¶æ¥æ”¶åˆ°ä¸€ä¸ªæ–°çš„ prop (æ›´æ–°å)æ—¶è¢«è°ƒç”¨ã€‚è¿™ä¸ªæ–¹æ³•åœ¨åˆå§‹åŒ–renderæ—¶ä¸ä¼šè¢«è°ƒç”¨ã€‚ shouldComponentUpdate()ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚åœ¨ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„propsæˆ–è€…stateæ—¶è¢«è°ƒç”¨ã€‚åœ¨åˆå§‹åŒ–æ—¶æˆ–è€…ä½¿ç”¨forceUpdateæ—¶ä¸è¢«è°ƒç”¨ã€‚ å¯ä»¥åœ¨ä½ ç¡®è®¤ä¸éœ€è¦æ›´æ–°ç»„ä»¶æ—¶ä½¿ç”¨ã€‚é»˜è®¤è¿”å›trueã€‚ componentWillUpdate()ï¼šåœ¨ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„propsæˆ–è€…stateä½†è¿˜æ²¡æœ‰renderæ—¶è¢«è°ƒç”¨ã€‚åœ¨åˆå§‹åŒ–æ—¶ä¸ä¼šè¢«è°ƒç”¨ã€‚ 123void componentWillUpdate( object nextProps, object nextState) åœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢ï¼Œä½ å°±ä¸èƒ½ä½¿ç”¨this.setStateæ¥ä¿®æ”¹çŠ¶æ€ã€‚è¿™ä¸ªå‡½æ•°è°ƒç”¨ä¹‹åï¼Œå°±ä¼šæŠŠnextPropså’ŒnextStateåˆ†åˆ«è®¾ç½®åˆ°this.propså’Œthis.stateä¸­ï¼Œç´§æ¥ç€è¿™ä¸ªå‡½æ•°ï¼Œå°±ä¼šè°ƒç”¨render()æ¥æ›´æ–°ç•Œé¢äº† render()ï¼šä¸å®ä¾‹åŒ–æœŸç›¸åŒ componentDidUpdate()ï¼šåœ¨ç»„ä»¶å®Œæˆæ›´æ–°åç«‹å³è°ƒç”¨ã€‚åœ¨åˆå§‹åŒ–æ—¶ä¸ä¼šè¢«è°ƒç”¨ã€‚ é”€æ¯æœŸé”€æ¯é˜¶æ®µï¼Œåªæœ‰ä¸€ä¸ªå‡½æ•°è¢«è°ƒç”¨ï¼š componentWillUnmount()ï¼šåœ¨ç»„ä»¶ä» DOM ä¸­ç§»é™¤çš„æ—¶å€™ç«‹åˆ»è¢«è°ƒç”¨ã€‚åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œå¯ä»¥åšä¸€äº›ç»„ä»¶ç›¸å…³çš„æ¸…ç†å·¥ä½œï¼Œä¾‹å¦‚å–æ¶ˆè®¡æ—¶å™¨ã€ç½‘ç»œè¯·æ±‚ç­‰ æ€»ç»“è¿™ç¯‡åšå®¢æŸ¥é˜…äº†å¾ˆå¤šç½‘ä¸Šå¤§ç‰›ä»¬çš„åšå®¢ï¼Œç»“åˆäº†èœé¸Ÿæ•™ç¨‹ä¸Šçš„æ–‡æ¡£ï¼Œå¸Œæœ›è‡ªå·±èƒ½å¤Ÿå¯¹Reactç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæœ‰æ›´å¥½åœ°ç†è§£ï¼Œå‰è·¯æ¼«æ¼«ï½ä¸€èµ·åŠ æ²¹å“¦ï½]]></content>
      <categories>
        <category>React.js</category>
      </categories>
      <tags>
        <tag>React.js ç”Ÿå‘½å‘¨æœŸ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŸºäºReactåŠExpressé¡¹ç›®çš„æ‰“åŒ…éƒ¨ç½²]]></title>
    <url>%2F2018%2F05%2F24%2Freact-express%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘ä¸ºäº†7æœˆä»½å®ä¹ æ›´åŠ é¡ºæ‰‹ï¼Œæ‰€ä»¥åœ¨å­¦ä¹ å…¬å¸æ¯”è¾ƒæµè¡Œçš„Reactï¼Œä¹‹å‰å¯¹Vueæœ‰è¿‡äº†è§£å¹¶åšè¿‡é¡¹ç›®ç»ƒæ‰‹ï¼Œæ‰€ä»¥å¯¹Reactçš„æ€æƒ³ä¹Ÿæ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ï¼Œä¸ºäº†è¿›ä¸€æ­¥æå‡è‡ªå·±ï¼Œä»¥åŠä¸ºåç»­å­¦ä¹ ä½¿ç”¨Nodeæ­å»ºæœåŠ¡å™¨ç«¯ï¼Œæˆ‘ç‰¹åœ°å»è…¾è®¯äº‘ä¸Šä¹°äº†è‡ªå·±çš„äº‘æœåŠ¡å™¨ï½è¿™ç¯‡åšå®¢ä¸»è¦æ˜¯ä»‹ç»ä¸€ä¸‹ï¼Œä¸€ä¸ªä½¿ç”¨Reactåšå‰ç«¯ï¼ŒExpressåšåç«¯çš„é¡¹ç›®å¦‚ä½•æ‰“åŒ…éƒ¨ç½²åœ¨äº‘æœåŠ¡å™¨ä¸Šï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï½ äº‘æœåŠ¡å™¨å‡†å¤‡é¦–å…ˆä½ éœ€è¦æœ‰ä¸ªå·²ç»å¤‡æ¡ˆè¿‡çš„åŸŸåï¼Œç„¶åéœ€è¦ä¹°ä¸ªäº‘æœåŠ¡å™¨ï¼Œå°†ä½ çš„åŸŸåè§£æåˆ°æœåŠ¡å™¨åœ°å€ï¼Œæˆ‘è§£æçš„åŸŸåä¸ºqq.qiuruolin.cnï¼Œå…·ä½“æ­¥éª¤å¤§å®¶å¯ä»¥Googleä¸€ä¸‹ï½å› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯Macï¼Œæ‰€ä»¥é¦–å…ˆæˆ‘åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨sshè¿æ¥äº‘æœåŠ¡å™¨ï¼Œé…ç½®nginxï¼Œå¹¶é€šè¿‡service nginx startå¯åŠ¨æœåŠ¡ï¼Œä¸‹è½½å®‰è£…gitï¼Œå› ä¸ºæˆ‘ä»¬åé¢éœ€è¦ä½¿ç”¨gitæ¥å…‹éš†expressåç«¯é¡¹ç›® Reactå‰ç«¯é¦–å…ˆä½¿ç”¨create-react-appåˆ›å»ºReacté¡¹ç›®ï¼Œä½¿ç”¨npm installå®‰è£…ä¾èµ–åŒ…ï¼Œé€šè¿‡npm startè¿è¡Œï¼ŒæˆåŠŸåå°±å¯ä»¥å¼€å§‹ç¼–å†™ä½ è‡ªå·±çš„é¡¹ç›®äº†å¯ä»¥åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ajaxå»è¯·æ±‚åç«¯æ•°æ®ï¼Œä½†æ˜¯è¦æ³¨æ„è§£å†³è·¨åŸŸé—®é¢˜ï¼šåœ¨package.jsonä¸­æ·»åŠ 12345"proxy": &#123; "/api": &#123; "target": "http://127.0.0.1: 3001" &#125;&#125;ï¼Œ http://127.0.0.1: 3000æ¢æˆä½ éœ€è¦ä»£ç†çš„åŸŸåï¼Œæœ€å¥½æ˜¯ä½¿ç”¨IPåœ°å€ï¼Œä¸Šé¢çš„é…ç½®å°±æ˜¯å°†æœ¬åœ°æ‰€æœ‰ä»¥/apiå¼€å¤´çš„è¯·æ±‚è½¬å‘åˆ°ä½ é…ç½®çš„åœ°å€ä¸Šåœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¯·æ±‚ä»£ç†åˆ°æˆ‘ä»¬äº‘æœåŠ¡å™¨çš„expressåç«¯ä¸Š å†™å®Œä»£ç ä¹‹åï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ‰“åŒ…éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ä¸Šçš„å·¥ä½œäº†é¦–å…ˆé€šè¿‡npm buildå¯¹é¡¹ç›®è¿›è¡Œæ‰“åŒ…ï¼Œç”Ÿæˆåä¸ºbuildçš„æ–‡ä»¶å¤¹å°†buildæ–‡ä»¶å¤¹é€šè¿‡scpå‘½ä»¤ä¸Šä¼ åˆ°äº‘æœåŠ¡å™¨ä¸Šæ³¨æ„ï¼šè¦ä¸Šä¼ è‡³æœåŠ¡å™¨çš„æ ¹ç›®å½•ä¸‹ï¼Œé»˜è®¤ä¸º/rootï¼ˆå¯ä»¥åœ¨/etc/nginx/nginx.confä¸­é…ç½®ï¼‰ä¸Šä¼ åé€šè¿‡service nginx restarté‡å¯ï¼Œè¿™æ—¶ä½ è¯•ç€å¯ä»¥è®¿é—®qq.qiuruolin.cn/build/index.htmlï¼Œè‹¥é¡µé¢å‡ºç°åˆ™è¡¨ç¤ºéƒ¨ç½²æˆåŠŸã€‚ Expressåç«¯é€šè¿‡expressæ¥æ–°åˆ›å»ºä¸€ä¸ªexpressé¡¹ç›®ï¼Œå‰ææ˜¯éœ€è¦ä½ å…¨å±€å®‰è£…expressï¼Œæ–°å»ºé¡¹ç›®ä¹‹åä½¿ç”¨npm installå®‰è£…ä¾èµ–åŒ…ï¼Œä½¿ç”¨npm startè¿è¡Œï¼Œå‡ºç°Expressæ¬¢è¿é¡µåˆ™è¯´æ˜é¡¹ç›®åˆ›å»ºæˆåŠŸäº†æ¥ç€ï¼Œä½ å¯ä»¥å…ˆç¼–å†™ä¸€ä¸ªç®€å•çš„è¯·æ±‚è¿›è¡Œæµ‹è¯•åˆ›å»ºä»“åº“é…ç½®gitï¼Œå¹¶å°†é¡¹ç›®pushåˆ°gitä¸Šè¿æ¥äº‘æœåŠ¡å™¨ï¼Œæˆ‘ä»¬ä½¿ç”¨gitå…‹éš†é¡¹ç›®ï¼Œå¹¶ä½¿ç”¨npm installå®‰è£…ä¾èµ–é …ï¼Œä½¿ç”¨npm startï¼Œè®¿é—®ä½ è§£æçš„åŸŸå:3000/ä½ çš„apiï¼Œè‹¥æˆåŠŸåˆ™ä½ çš„åç«¯é¡¹ç›®å°±åœ¨äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²æˆåŠŸäº†ä½ å¯ä»¥ä½¿ç”¨npm start &amp;å°†é¡¹ç›®æ”¾ç½®åå°è¿è¡Œï¼Œä½¿ç”¨jobsæŸ¥çœ‹è¿è¡Œçš„è¿›ç¨‹ï¼Œfgå’Œbgå°†è¿›ç¨‹åœ¨å‰åå°åˆ‡æ¢ æ€»ç»“åˆ°è¿™ä¸€æ­¥ï¼Œæ•´ä¸ªé¡¹ç›®åŸºæœ¬éƒ½é…ç½®å®Œäº†ï¼Œå…¶å®è¿™ä¸ªå¹¶ä¸æ˜¯èŠ±æ—¶é—´æœ€å¤šçš„åœ°æ–¹ï¼ŒèŠ±æ—¶é—´æ¢ç´¢çš„æ˜¯ï¼Œæˆ‘å¦‚ä½•å»æ„å»ºä¸€ä¸ªå®Œæ•´å‰åç«¯ä¿±å…¨çš„é¡¹ç›®ï¼Œå­¦ä¹ çš„è·¯ä¸Šä¼šé‡åˆ°å¾ˆå¤šè¿·èŒ«ï¼Œåªè¦ç§¯ææ¢ç´¢ï¼Œä¸æ°”é¦ï¼Œä¸æ”¾å¼ƒï¼Œä¸éª„èºï¼Œç›¸ä¿¡å¤§å®¶å¯ä»¥å˜å¾—æ›´å¥½ï¼å¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï½]]></content>
      <categories>
        <category>React.js</category>
      </categories>
      <tags>
        <tag>React.js Express</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®°è…¾è®¯çš„ä¸€æ¬¡å‰ç«¯é¢è¯•ç»å†ï¼ˆå…±å››é¢ï¼Œå·²æ‹¿å®ä¹ Offerï¼‰]]></title>
    <url>%2F2018%2F05%2F23%2Finterview-experiences%2F</url>
    <content type="text"><![CDATA[å› ä¸ºæˆ‘ä»¬ä¸“ä¸šè¦æ±‚å¤§å››ä¸€å­¦å¹´çš„å®ä¹ ï¼Œæ‰€ä»¥è¿™æ®µæ—¶é—´ä¹Ÿå°±è‡ªç„¶åœ¨åšæ˜¥æ‹›å†…æ¨çš„å„é¡¹å‡†å¤‡ï¼Œä»å¼€å§‹æ‰¾å®ä¹ åˆ°è·å¾—è…¾è®¯å®ä¹ Offerå¤§çº¦å†ç»äº†ä¸€ä¸ªå¤šæœˆçš„æ—¶é—´ï¼Œè¿™ä¸€ä¸ªå¤šæœˆæ¥å‹åŠ›å¾ˆå¤§ï¼Œä¹Ÿå¾ˆæ€•æ‰¾ä¸åˆ°å¥½çš„å®ä¹ ï¼Œæ‰€ä»¥è¿™ä¸ªæœˆä¹Ÿåˆ·äº†å¾ˆå¤šå¤§ä½¬çš„é¢ç»ï¼Œè·å¾—äº†å¾ˆå¤šå¸®åŠ©ï¼Œä¹Ÿå¢é•¿äº†å¾ˆå¤šå‰ç«¯çŸ¥è¯†ã€‚æ˜¯åœ¨æ¸…æ˜èŠ‚å‰ä¸€å¤©æ”¶åˆ°è…¾è®¯HRå°å“¥å“¥çš„Offerç”µè¯ï¼Œæ—¶éš”è¿™ä¹ˆä¹…æ‰æƒ³èµ·è¦æŠŠè…¾è®¯é¢è¯•çš„ä¸€äº›é—®é¢˜å†™æˆåšå®¢ï¼Œæˆ–è®¸ä¼šå¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚ å‰è¨€ä»å‡†å¤‡æ˜¥æ‹›ä»¥æ¥ï¼Œä¸€å…±é¢è¯•çš„å…¬å¸æœ‰ä¸‰å®¶ï¼šäº¬ä¸œã€è…¾è®¯å’ŒCVTEï¼Œäº¬ä¸œæƒ…å†µæ¯”è¾ƒç‰¹æ®Šåº”è¯¥ä¸ç®—æ˜¯æ­£å¼çš„æ˜¥æ‹›ï¼Œäº¬ä¸œé¢è¯•æ—¶é—®äº†å¾ˆå¤šæœ‰å…³CSSçš„çŸ¥è¯†ï¼Œæ¯”å¦‚marginå¡Œé™·ã€CSS3æ–°ç‰¹æ€§ã€èƒŒæ™¯é€æ˜çš„å®ç°æ–¹æ³•ã€æ¸…é™¤æµ®åŠ¨çš„æ–¹æ³•ä»¥åŠå‚ç›´å±…ä¸­çš„æ–¹æ³•ç­‰CVTEæ˜¯å”¯ä¸€ä¸€ä¸ªç°åœºé¢è¯•çš„ï¼Œå¾ˆå¤šé¢è¯•é¢˜ç›®éƒ½å¾ˆç±»ä¼¼ï¼Œå°è±¡æœ€æ·±çš„æ˜¯ä¸‰é“æ‰‹æ’•ä»£ç é¢˜ï¼Œ ç¬¬ä¸€é“æ˜¯å†™ä¸€ç¨‹åºéå†ä¸€ä¸ªDOMç»“æ„ï¼Œ ç¬¬äºŒé“æ˜¯ç®—æ³•é¢˜ï¼Œè¦æ±‚ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²â€I love dogâ€å˜æˆâ€dog love Iâ€ ç¬¬ä¸‰é“æ˜¯å®ç°æŸä¸ªç§æ …æ ¼å¸ƒå±€ ä¸€é¢ä¸€é¢å¤§æ¦‚é¢äº†ä¸€ä¸ªå¤šå°æ—¶ï¼Œé—®äº†å¾ˆå¤šåŸºç¡€çŸ¥è¯†ï¼Œæ¶‰åŠçš„æ–¹é¢ä¹Ÿå¾ˆå¹¿é¦–å…ˆä»‹ç»å®ä¹ ç»å†ï¼Œbalabalaè®²äº†ä¸€ä¸‹é¡¹ç›®ç»éªŒï¼Œç„¶åå¤§æ¦‚è¯´äº†ä¸€ä¸‹ä»€ä¹ˆæ—¶å€™å¼€å§‹å­¦ä¹ å‰ç«¯ï¼Œä»¥ä¸‹æ˜¯æˆ‘è®°å¾—çš„ä¸€äº›é—®é¢˜ï¼š 1. æ€ä¹ˆä½¿ç”¨dnsç¼“å­˜åšä¼˜åŒ–DNSçš„ä¼˜åŒ–ï¼Œ å½“ç„¶æ˜¯å°½å¯èƒ½å°‘çš„é€ æˆDNSæŸ¥è¯¢å¼€é”€ï¼Œå½“ç”¨æˆ·åœ¨æµè§ˆå™¨çš„åœ°å€æ ä¸­è¾“å…¥ç½‘å€æ—¶ï¼Œæµè§ˆå™¨ä¼šé¦–å…ˆé€šè¿‡è®¿é—®çš„åŸŸåæ¥å®šä½åˆ°IP (DNS) ä»è€Œæ‰¾åˆ°å»å“ªé‡Œè·å–èµ„æºï¼Œæµè§ˆå™¨ä¼šæŒ‰æµè§ˆå™¨ç¼“å­˜-&gt;ç³»ç»Ÿç¼“å­˜-&gt;è·¯ç”±å™¨ç¼“å­˜-&gt;ISP DNSç¼“å­˜-&gt;é€’å½’æœç´¢ä¾æ¬¡è¿›è¡ŒæŸ¥è¯¢ï¼ŒDNSä¼˜åŒ–å°±æ˜¯éœ€è¦æˆ‘ä»¬å°½å¯èƒ½å°‘çš„åŸŸåè§£æã€‚DNSé¢„å–å°±æ˜¯åœ¨æµè§ˆå™¨åŠ è½½ç½‘é¡µæ—¶ï¼Œ å¯¹ç½‘é¡µä¸­çš„æˆ–è€…çš„hrefå±æ€§ä¸­çš„åŸŸåè¿›è¡Œåå°çš„é¢„è§£æï¼Œ å¹¶ä¸”å°†è§£æç»“æœç¼“å­˜åœ¨æµè§ˆå™¨ç«¯ï¼Œ å½“ç”¨æˆ·åœ¨çœŸæ­£ç‚¹å‡»é“¾æ¥æ—¶ï¼Œ çœå»åœ¨å½“ä¸‹çš„DNSè§£ææ¶ˆè€—ï¼Œ æŠŠè¿™ä¸ªæ¶ˆè€—è¿‡ç¨‹è½¬å«åˆ°ç”¨æˆ·æ— æ³•æ„ŸçŸ¥çš„æµè§ˆè¿‡ç¨‹ä¸­å»ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•æ¥æ‰“å¼€DNSé¢„å–ï¼š å¯ä»¥é€šè¿‡ç”¨metaä¿¡æ¯æ¥å‘ŠçŸ¥æµè§ˆå™¨ï¼Œ å½“å‰é¡µé¢è¦åšDNSé¢„å–: å¯ä»¥ä½¿ç”¨linkæ ‡ç­¾æ¥å¼ºåˆ¶å¯¹DNSåšé¢„å–: 2. ES6äº†è§£å“ªäº›ï¼ŸES6ä¸­æœ‰å¾ˆå¤šçŸ¥è¯†ç‚¹ï¼Œæ¯”å¦‚Promiseã€Generatorã€ç®­å¤´å‡½æ•°ç­‰ï¼Œå»ºè®®å¤§å®¶å¤šç†Ÿæ‚‰ä¸€ä¸‹ 3. çŸ¥é“å“ªäº›æ•°ç»„æ–¹æ³•æœ€å¸¸ç”¨çš„æœ‰æ–¹æ³•æœ‰ï¼š join()â€”â€”å°†æ•°ç»„å…ƒç´ ç»„æˆä¸€ä¸ªå­—ç¬¦ä¸² push()å’Œpop()â€”â€”ç±»ä¼¼æ ˆçš„æ“ä½œ shift()å’Œunshift()â€”â€”åˆ é™¤æ•°ç»„ç¬¬ä¸€é¡¹ï¼æ·»åŠ å…ƒç´ è‡³æ•°ç»„ç¬¬ä¸€é¡¹ sort()â€”â€”å¯¹æ•°ç»„è¿›è¡Œæ’åº reverse()â€”â€”åè½¬æ•°ç»„é …çš„é¡ºåº concat() â€”â€”å°†å‚æ•°æ·»åŠ åˆ°åŸæ•°ç»„ä¸­ã€‚è¿™ä¸ªæ–¹æ³•ä¼šå…ˆåˆ›å»ºå½“å‰æ•°ç»„ä¸€ä¸ªå‰¯æœ¬ï¼Œç„¶åå°†æ¥æ”¶åˆ°çš„å‚æ•°æ·»åŠ åˆ°è¿™ä¸ªå‰¯æœ¬çš„æœ«å°¾ï¼Œæœ€åè¿”å›æ–°æ„å»ºçš„æ•°ç»„ã€‚åœ¨æ²¡æœ‰ç»™ concat()æ–¹æ³•ä¼ é€’å‚æ•°çš„æƒ…å†µä¸‹ï¼Œå®ƒåªæ˜¯å¤åˆ¶å½“å‰æ•°ç»„å¹¶è¿”å›å‰¯æœ¬ã€‚ slice()â€”â€”è¿”å›ä»åŸæ•°ç»„ä¸­æŒ‡å®šå¼€å§‹ä¸‹æ ‡åˆ°ç»“æŸä¸‹æ ‡ä¹‹é—´çš„é¡¹ç»„æˆçš„æ–°æ•°ç»„ã€‚ splice()â€”â€”å¾ˆå¼ºå¤§çš„æ•°ç»„æ–¹æ³•ï¼Œå®ƒæœ‰å¾ˆå¤šç§ç”¨æ³•ï¼Œå¯ä»¥å®ç°åˆ é™¤ã€æ’å…¥å’Œæ›¿æ¢ã€‚ indexOf()å’ŒlastIndexOf()â€”â€”ä»æ•°ç»„çš„å¼€å¤´ï¼ˆä½ç½® 0ï¼‰å¼€å§‹å‘åæŸ¥æ‰¾ï¼ä»æ•°ç»„çš„æœ«å°¾å¼€å§‹å‘å‰æŸ¥æ‰¾ã€‚ forEach()â€”â€”å¯¹æ•°ç»„è¿›è¡Œéå†å¾ªç¯ï¼Œå¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ã€‚ map()â€”â€”å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œè¿”å›æ¯æ¬¡å‡½æ•°è°ƒç”¨çš„ç»“æœç»„æˆçš„æ•°ç»„ã€‚ filter()â€”â€”â€œè¿‡æ»¤â€åŠŸèƒ½ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œè¿”å›æ»¡è¶³è¿‡æ»¤æ¡ä»¶ç»„æˆçš„æ•°ç»„ã€‚ every()â€”â€”åˆ¤æ–­æ•°ç»„ä¸­æ¯ä¸€é¡¹éƒ½æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œåªæœ‰æ‰€æœ‰é¡¹éƒ½æ»¡è¶³æ¡ä»¶ï¼Œæ‰ä¼šè¿”å›trueã€‚ some()â€”â€”åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„é¡¹ï¼Œåªè¦æœ‰ä¸€é¡¹æ»¡è¶³æ¡ä»¶ï¼Œå°±ä¼šè¿”å›trueã€‚ reduce()å’Œ reduceRight()â€”â€”ä»æ•°ç»„çš„ç¬¬ä¸€é¡¹å¼€å§‹ï¼Œé€ä¸ªéå†åˆ°æœ€åï¼ä»æ•°ç»„çš„æœ€åä¸€é¡¹å¼€å§‹ï¼Œå‘å‰éå†åˆ°ç¬¬ä¸€é¡¹ã€‚ä¸¤ä¸ªæ–¹æ³•éƒ½æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªåœ¨æ¯ä¸€é¡¹ä¸Šè°ƒç”¨çš„å‡½æ•°å’Œï¼ˆå¯é€‰çš„ï¼‰ä½œä¸ºå½’å¹¶åŸºç¡€çš„åˆå§‹å€¼ã€‚ 4. å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­— parseInt()å’ŒparseFloat()ï¼Œè¦æ³¨æ„æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºä½¿ç”¨çš„åŸºæ¨¡å¼ï¼ˆäºŒè¿›åˆ¶(2)ã€å…«è¿›åˆ¶(8)ã€åè¿›åˆ¶(10)ã€åå…­è¿›åˆ¶(16)ï¼‰ å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼šNumber(value) jså¼±ç±»å‹è½¬æ¢ï¼ˆä¸æ¨èï¼‰ï¼švar x = str-0; x = x*1; 5. cdnç¼“å­˜çš„åŸç† æ¨èçœ‹CDNæŠ€æœ¯è¯¦è§£è¿™ç¯‡åšå®¢ï¼Œåšä¸»å¯¹äºCDNçš„ç›¸å…³çŸ¥è¯†ç‚¹ç¡®å®è®²è§£çš„æ¯”è¾ƒåˆ°ä½äº† 6. äº‹ä»¶æ•è·å’Œäº‹ä»¶å†’æ³¡è´´ä¸€å¼ å›¾å¤§å®¶æ„Ÿå—ä¸€ä¸‹ 7. é˜»æ­¢å†’æ³¡äº‹ä»¶å’Œé»˜è®¤äº‹ä»¶event.stopPropagation()ï¼šè¿™æ˜¯é˜»æ­¢äº‹ä»¶çš„å†’æ³¡æ–¹æ³•ï¼Œä¸è®©äº‹ä»¶å‘documenä¸Šè”“å»¶ï¼Œä½†æ˜¯é»˜è®¤äº‹ä»¶ä»»ç„¶ä¼šæ‰§è¡Œï¼Œå½“ä½ æ‰ç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œå¦‚æœç‚¹å‡»ä¸€ä¸ªè¿æ¥ï¼Œè¿™ä¸ªè¿æ¥ä»ç„¶ä¼šè¢«æ‰“å¼€event.preventDefault()ï¼šè¿™æ˜¯é˜»æ­¢é»˜è®¤äº‹ä»¶çš„æ–¹æ³•ï¼Œè°ƒç”¨æ­¤æ–¹æ³•æ˜¯ï¼Œè¿æ¥ä¸ä¼šè¢«æ‰“å¼€ï¼Œä½†æ˜¯ä¼šå‘ç”Ÿå†’æ³¡ï¼Œå†’æ³¡ä¼šä¼ é€’åˆ°ä¸Šä¸€å±‚çš„çˆ¶å…ƒç´ ï¼›IEä¸‹ï¼šwindow.event.cancelBubble = true;//åœæ­¢å†’æ³¡window.event.returnValue = false;//é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸º 8. å‰ç«¯ä¼˜åŒ–Webå‰ç«¯æ€§èƒ½ä¼˜åŒ–æ€»ç»“ 9. CSSæ–‡ä»¶ä¸ºä»€ä¹ˆè¦æ”¾åœ¨æ–‡æ¡£å¤´éƒ¨ï¼Ÿjsæ–‡ä»¶ä¸ºä»€ä¹ˆæ”¾åœ¨åº•éƒ¨ï¼Ÿ10. HTML5å¼•å…¥çš„æ–°ç‰¹æ€§11. HTTPç¼“å­˜æœºåˆ¶å½»åº•å¼„æ‡‚HTTPç¼“å­˜æœºåˆ¶åŠåŸç† 12. cache-controlçš„å±æ€§ï¼ˆno-cacheå’Œno-storeçš„åŒºåˆ«ï¼‰æµè§ˆå™¨ç¼“å­˜è¯¦è§£:expires,cache-control,last-modified,etagè¯¦ç»†è¯´æ˜Cache-Control: no-cacheï¼šè¿™ä¸ªå¾ˆå®¹æ˜“è®©äººäº§ç”Ÿè¯¯è§£ï¼Œä½¿äººè¯¯ä»¥ä¸ºæ˜¯å“åº”ä¸è¢«ç¼“å­˜ã€‚å®é™…ä¸ŠCache-Control: no-cacheæ˜¯ä¼šè¢«ç¼“å­˜çš„ï¼Œåªä¸è¿‡æ¯æ¬¡åœ¨å‘å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰æä¾›å“åº”æ•°æ®æ—¶ï¼Œç¼“å­˜éƒ½è¦å‘æœåŠ¡å™¨è¯„ä¼°ç¼“å­˜å“åº”çš„æœ‰æ•ˆæ€§ã€‚Cache-Control: no-storeï¼šè¿™ä¸ªæ‰æ˜¯å“åº”ä¸è¢«ç¼“å­˜çš„æ„æ€ã€‚ 13. HttpçŠ¶æ€ç ï¼ˆ403ã€304æ˜¯ä»€ä¹ˆï¼‰å¸¸è§çš„HTTPçŠ¶æ€ç (HTTP Status Code)è¯´æ˜ 14. jsonpçš„å®ç°åŸç†ç®€å•é€å½»ç†è§£JSONPåŸç†åŠä½¿ç”¨ 15. xssã€corsï¼Ÿä»¥åŠå¦‚ä½•é˜²èŒƒï¼Ÿsqlæ³¨å…¥ï¼Ÿï¼Ÿ XSSï¼šè·¨ç«™è„šæœ¬æ”»å‡»å®ƒå…è®¸ç”¨æˆ·å°†æ¶æ„ä»£ç æ¤å…¥åˆ°æä¾›ç»™å…¶ä»–ç”¨æˆ·ä½¿ç”¨çš„é¡µé¢ä¸­ï¼Œå¯ä»¥ç®€å•çš„ç†è§£ä¸ºä¸€ç§javascriptä»£ç æ³¨å…¥ã€‚XSSçš„é˜²å¾¡æªæ–½ï¼š è¿‡æ»¤è½¬ä¹‰è¾“å…¥è¾“å‡º é¿å…ä½¿ç”¨evalã€new Functionç­‰æ‰§è¡Œå­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œé™¤éç¡®å®šå­—ç¬¦ä¸²å’Œç”¨æˆ·è¾“å…¥æ— å…³ ä½¿ç”¨cookieçš„httpOnlyå±æ€§ï¼ŒåŠ ä¸Šäº†è¿™ä¸ªå±æ€§çš„cookieå­—æ®µï¼Œjsæ˜¯æ— æ³•è¿›è¡Œè¯»å†™çš„ ä½¿ç”¨innerHTMLã€document.writeçš„æ—¶å€™ï¼Œå¦‚æœæ•°æ®æ˜¯ç”¨æˆ·è¾“å…¥çš„ï¼Œé‚£ä¹ˆéœ€è¦å¯¹è±¡å…³é”®å­—ç¬¦è¿›è¡Œè¿‡æ»¤ä¸è½¬ä¹‰ CSRFï¼šè·¨ç«™è¯·æ±‚ä¼ªé€ å…¶å®å°±æ˜¯ç½‘ç«™ä¸­çš„ä¸€äº›æäº¤è¡Œä¸ºï¼Œè¢«é»‘å®¢åˆ©ç”¨ï¼Œåœ¨ä½ è®¿é—®é»‘å®¢çš„ç½‘ç«™çš„æ—¶å€™è¿›è¡Œæ“ä½œï¼Œä¼šè¢«æ“ä½œåˆ°å…¶ä»–ç½‘ç«™ä¸ŠCSRFé˜²å¾¡æªæ–½ï¼š æ£€æµ‹http refereræ˜¯å¦æ˜¯åŒåŸŸå é¿å…ç™»å½•çš„sessioné•¿æ—¶é—´å­˜å‚¨åœ¨å®¢æˆ·ç«¯ä¸­ å…³é”®è¯·æ±‚ä½¿ç”¨éªŒè¯ç æˆ–è€…tokenæœºåˆ¶ 16. setTimeoutçš„æ‰§è¡ŒåŸç†ä»¥åŠä»€ä¹ˆæ—¶å€™å›è°ƒå‡½æ•°ä¼šåŠ å…¥åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Ÿä¸Promiseæ‰§è¡Œæœºåˆ¶ä¸Šæœ‰ä»€ä¹ˆä¸åŒï¼ŸJSï¼šäº‹ä»¶å¾ªç¯æœºåˆ¶ã€è°ƒç”¨æ ˆä»¥åŠä»»åŠ¡é˜Ÿåˆ— 17. postMessageçš„å®ç°ï¼Œè·¨åŸŸè¯·æ±‚çš„å®ç°å…«ç§æ–¹å¼å®ç°è·¨åŸŸè¯·æ±‚å‰ç«¯å¸¸è§è·¨åŸŸè§£å†³æ–¹æ¡ˆ 18. Web Storageçš„æ–¹æ³•ï¼ˆsetItemã€getItemã€removeItemã€clearï¼‰HTML5æœ¬åœ°å­˜å‚¨ä¹‹Web Storageç¯‡ 19. é¡µé¢é‡ç»˜å’Œé‡æ’ï¼Œå¦‚ä½•å‡å°‘é‡æ’ï¼Ÿå¦‚ä½•å‡å°‘å¯¹DOMçš„æ“ä½œJSå¯¹DOMçš„æ“ä½œä¼˜åŒ–æ³•åˆ™ 20. CSSæœ‰å“ªäº›é€‰æ‹©å™¨ï¼Ÿä¼˜å…ˆçº§21. å¦‚ä½•æ·»åŠ å…ƒç´ ï¼Œåˆ›å»ºå…ƒç´ ï¼ˆé™¤äº†createElementå’ŒcreateTextNodeè¿˜æœ‰ä»€ä¹ˆï¼‰jsåˆ›å»ºdomèŠ‚ç‚¹ä¹‹æœ€å®¹æ˜“è¢«å¿½ç•¥çš„createDocumentFragment()æ–¹æ³• 22. æ€ä¹ˆé€‰å–DOMå…ƒç´ ï¼ˆDOMå…ƒç´ é€‰æ‹©çš„æ–¹å¼ï¼‰JSé€‰å–DOMå…ƒç´ çš„æ–¹æ³• 23. callå’Œapplyçš„åŒºåˆ«ï¼Œbindæ–¹æ³•javascriptä¸­call()ã€apply()ã€bind()çš„ç”¨æ³•ç»ˆäºç†è§£bindæ–¹æ³• 24. å—çº§ä½œç”¨åŸŸåŠå…¶åº”ç”¨åœºæ™¯å—çº§ä½œç”¨åŸŸ 25. letå’Œvarçš„åŒºåˆ«ï¼ˆé™¤äº†å˜é‡æå‡ï¼Œè¿˜æœ‰ä»€ä¹ˆï¼‰jsä¸­letå’Œvarå®šä¹‰å˜é‡çš„åŒºåˆ« 26. HTTP2.0çš„ç‰¹æ€§HTTP 2.0å¸¦æ¥å“ªäº›æ–°ç‰¹æ€§ 27. å¯¹è±¡å¤åˆ¶ï¼ˆæ·±æµ…æ‹·è´ï¼‰Object.assignjavascriptå¯¹è±¡çš„æ·±æµ…æ‹·è´æµ…æ 28. innerHTMLå’ŒouterHTML29. nullå’Œundefinedçš„åŒºåˆ« undefinedä¸€èˆ¬ç”¨äºæŠ›å‡ºå¼‚å¸¸ typeof null =&gt; object; typeof undefined =&gt; undefined Number(null) = 0; Number(undefined) = NaN æ­£ç¡®ä½¿ç”¨nullï¼Œå¯ä»¥æœ‰æ•ˆæ¸…é™¤å¼•ç”¨ï¼Œç”¨äºåƒåœ¾å›æ”¶ null instanceof Object // false 30. httpsä¸ºä»€ä¹ˆæ˜¯å®‰å…¨çš„ï¼ŸSSLæ˜¯æ€ä¹ˆåŠ å¯†çš„ï¼Ÿè¯¦è§£HTTPSæ˜¯å¦‚ä½•ç¡®ä¿å®‰å…¨æ€§çš„ 31. ç¼“å­˜è¿‡æœŸæ—¶é—´çš„è®¾ç½®ï¼ˆé™¤äº†expireså’Œmax-ageè¿˜æœ‰ä»€ä¹ˆï¼‰32. ä»€ä¹ˆæ˜¯åŒæºç­–ç•¥ï¼Ÿæ€æ ·å±äºåŒæºï¼ˆåŒåè®®åŒåŸŸååŒç«¯å£ï¼‰33. vue-routerå¯¹historyçš„æ“ä½œ34. å¯¹jsonæ–¹æ³•çš„äº†è§£ï¼ˆson.stringifyå’Œjson.parseJSONï¼‰35. è¿˜æœ‰ä»€ä¹ˆè¦é—®æˆ‘çš„å—ï¼ŸäºŒé¢äºŒé¢æ—¶é—´ä¸é•¿ï¼Œå¤§æ¦‚20åˆ†é’Ÿå·¦å³ï¼Œå› ä¸ºæ˜¯æ™šä¸Šä¸‹è¯¾åæ‰“æ¥çš„ç”µè¯ï¼Œæ‰€ä»¥é—®çš„å†…å®¹ä¹Ÿä¸ç®—å¤š 1. httpåè®®çš„è¯·æ±‚å¤´å†…å®¹HTTPè¯·æ±‚è¡Œã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“è¯¦è§£ 2. cache-control æ˜¯ä»€ä¹ˆï¼Ÿä»¥åŠå®ƒçš„å–å€¼æœ‰å“ªäº›3. http1.1æœ‰å“ªäº›ä¸è¶³HTTP/2.0 ç›¸æ¯”1.0æœ‰å“ªäº›é‡å¤§æ”¹è¿›ï¼Ÿ 4. å¿«é€Ÿæ’åºçš„æ€æƒ³æ’åºç®—æ³•å¯ä»¥å‚è€ƒæˆ‘ä¸Šä¸€ç¯‡åšå®¢ç®—æ³•ä¹‹æ’åº 5. äº‹ä»¶æ•è·å’Œäº‹ä»¶å†’æ³¡6. æ€ä¹ˆé˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Ÿæ€ä¹ˆåœ¨äº‹ä»¶æ•è·é˜¶æ®µé˜»æ­¢äº‹ä»¶å†’æ³¡7. å¯¹ES6çš„äº†è§£æˆ‘æäº†Promiseï¼Œåæ¥å°±ä¸€ç›´é—®çš„æ˜¯Promiseçš„çŸ¥è¯†ï¼šPromiseæœ‰å“ªå‡ ç§çŠ¶æ€(pending, fulfilled, rejected)ï¼ŒçŠ¶æ€ä¹‹é—´çš„è½¬æ¢new Promise(function(){ resolve();}).then(function(){ //é—®æ­¤å¤„çš„thenå¯ä¸å¯ä»¥è¢«æ‰§è¡Œ})äº‹ä»¶ç›‘å¬å™¨åœ¨äº‹ä»¶ç‚¹å‡»ä¹‹åç›‘å¬æ˜¯æ— æ•ˆçš„ï¼ŒPromiseå’Œå®ƒæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿpromiseä»‹ç»â€“åŸºç¡€ç¯‡ 8. å¦‚æœæœ‰ä¸€ä¸ªç®±å­é‡Œæœ‰100ä¸ªè‹¹æœï¼Œä¸€æ¬¡å¯ä»¥æ‹¿1æˆ–2ä¸ªï¼Œé—®æœ‰å¤šå°‘ç§æ–¹æ³•å°†100ä¸ªè‹¹æœç§»åˆ°å¦ä¸€ä¸ªç®±å­ä¸­ä¸‰é¢ä¸‰é¢æ˜¯å¯¹æˆ‘å¹³æ—¶å¦‚ä½•å­¦ä¹ å‰ç«¯ä»¥åŠå¯¹æˆ‘çš„å­¦ä¹ å…´è¶£åšäº†è¿›ä¸€æ­¥çš„äº†è§£ 1. å¹³æ—¶æ˜¯å¦‚ä½•å­¦ä¹ çš„2. å¦‚ä½•è¿›è¡Œæ²Ÿé€šï¼Œæœ‰æ²¡æœ‰è‡ªå·±çš„ä¸€å¥—æ²Ÿé€šæ–¹æ¡ˆ3. æœ‰æ²¡æœ‰å¥½å¥‡å¿ƒï¼Ÿ4. å¹³æ—¶å†™ä»£ç çš„æ—¶é—´æœ‰å¤šå°‘å››é¢(HRé¢)å››é¢å°±æ˜¯è…¾è®¯äº‘æ‹›è˜ç»ç†æ¥çš„é¢è¯•ç”µè¯ï¼Œä¹Ÿå°±æ˜¯HRé¢ï¼Œäº†è§£äº†ä¸€ä¸‹ä¸ªäººçš„å‘å±•æ–¹å‘ï¼Œå®¶åº­æƒ…å†µä¹‹ç±»çš„æˆ‘è§‰å¾—HRé¢å…¶å®ä¹Ÿéœ€è¦å¥½å¥½å‡†å¤‡ä¸€ä¸‹çš„ï¼Œç¬¬ä¸€æ¬¡HRé¢æ˜¯åœ¨CVTEï¼ŒæŒ‚äº†CVTEä¹‹åå°±å¯¹HRé¢æœ‰ç‚¹é˜´å½±äº†ï¼Œååˆ†æ„Ÿè°¢æˆ‘çš„è€å¤§åœ¨è…¾è®¯HRé¢å‰ä¸€å¤©æ™šä¸Šé¡¶ç€ç–²æƒ«ä¸å ªçš„èº«å¿ƒè¿˜ç‰¹åœ°æ‰“ç”µè¯ç»™æˆ‘ï¼Œæ•™æˆ‘å¦‚ä½•å›ç­”å¾—æ›´ç†æƒ³ï½æ‹¿åˆ°å£å¤´Offeråå°±å›å®¶è¿‡æ¸…æ˜èŠ‚äº†ï½ æ€»ç»“å…¶å®èƒ½å¤Ÿæ‹¿åˆ°è…¾è®¯å®ä¹ Offerå¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯å› ä¸ºè¿æ°”ï¼Œå¸Œæœ›å°èœé¸Ÿçš„æˆ‘å’Œè…¾è®¯çš„ç¼˜åˆ†ä¸€ç›´èµ°ä¸‹å»ï½å®ä¹ åŠ æ²¹ï¼ï¼å•°å•°å—¦å—¦è¯´äº†å¾ˆå¤šï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï¼]]></content>
      <categories>
        <category>é¢ç»</category>
      </categories>
      <tags>
        <tag>é¢ç»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç®—æ³•ä¹‹æ’åº]]></title>
    <url>%2F2018%2F02%2F17%2Falgorithm-sort%2F</url>
    <content type="text"><![CDATA[ç®—æ³•çš„å­¦ä¹ æ€»æ˜¯æ–­æ–­ç»­ç»­çš„ï¼Œæ€»ç®—çœ‹å®Œäº†æ’åºç®—æ³•è¿™ä¸€ç« èŠ‚çš„å†…å®¹ï¼Œæ’åºæ€æƒ³å¤§æ¦‚éƒ½å·²ç»èƒ½ç†è§£äº†ï¼Œå¥ˆä½•ç¼–ç¨‹æ°´å¹³ææ€•ä¸æ˜¯å¾ˆé«˜ï¼Œéƒ¨åˆ†ç®—æ³•ä»æ—§ä¸èƒ½è‡ªå·±ç‹¬ç«‹çš„å»å®ç°ï½æ€•æ˜¯è¦ç»§ç»­å¢å¼ºè‡ªå·±çš„ç¼–ç¨‹èƒ½åŠ›äº†ï½æ­¤ç¯‡åšæ–‡ä¸»è¦æ˜¯è®°å½•ä¸æ’åºç®—æ³•ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼Œå¦‚æœåœ¨æŸäº›åœ°æ–¹è¡¨è¿°ä¸æ­£ç¡®çš„ï¼Œè¿˜å¸Œæœ›å¤§å®¶èƒ½å¤ŸæŒ‡å‡ºï¼Œå…±åŒè¿›æ­¥ï½ åŸºäºæ¯”è¾ƒæ€æƒ³çš„æ’åºç®—æ³•é¦–å…ˆä¸ºäº†å‡å°‘ä»£ç çš„é‡å¤æ€§ï¼ŒæŠ½ç¦»å‡ºå®ç°ä»£ç ä¸­ç»å¸¸ä½¿ç”¨åˆ°çš„äº¤æ¢å‡½æ•°ï¼š12345public static void swap(int[] arr, int index1, int index2) &#123; int tmp = arr[index1]; arr[index1] = arr[index2]; arr[index2] = tmp;&#125; å†’æ³¡æ’åº 1234567891011public int[] bubbleSort(int[] A, int n) &#123; //nè¡¨ç¤ºæ•°ç»„é•¿åº¦ // write code here for(int i = n - 1; i &gt;= 0; i--)&#123; for(int j = 0; j &lt; i; j++)&#123; if(A[j] &gt; A[j + 1])&#123; swap(A, j, j + 1); &#125; &#125; &#125; return A;&#125; ä¸»è¦æ€æƒ³ï¼šä½¿ç”¨ä¸¤å±‚åµŒå¥—å¾ªç¯æ¯”è¾ƒï¼Œå†…å±‚å¾ªç¯æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œåˆ™äº¤æ¢ä¸¤ä¸ªå…ƒç´ ã€‚ä¸€æ¬¡å†…å¾ªç¯æ¯”è¾ƒç»“æŸåï¼Œæœ€å¤§çš„å…ƒç´ å°†ä¼šè¢«äº¤æ¢åˆ°n-1çš„ä½ç½®ä¸Šï¼Œç¼©å°èŒƒå›´ç»§ç»­æ‰§è¡Œå¤–å¾ªç¯ï¼Œä¾æ¬¡ä¼šå°†å‰©ä¸‹å…ƒç´ ä¸­ç›¸å¯¹æœ€å¤§çš„å…ƒç´ ç½®æ¢åˆ°n-2ã€n-3 â€¦ 1çš„ä½ç½®ä¸Šï¼Œæ•°ç»„æ’åºå®Œæˆã€‚å†’æ³¡æ’åºå› ä¸ºä½¿ç”¨äº†ä¸¤å±‚åµŒå¥—å¾ªç¯ï¼Œæ‰€ä»¥å…¶æ—¶é—´å¤æ‚åº¦ä¸ºO(N^2)ã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼šé¦–å…ˆè€ƒå¯Ÿn-1èŒƒå›´æ¯”è¾ƒç›¸é‚»ä¸¤ä¸ªå…ƒç´ ä¹‹é—´çš„å¤§å°ï¼Œå‘ç°6æ¯”3å¤§ï¼Œåˆ™äº¤æ¢ä¸¤ä¸ªå…ƒç´ ç»§ç»­æ¯”è¾ƒç›¸é‚»å…ƒç´ ç»è¿‡ä¸€è½®å¾ªç¯æ¯”è¾ƒç›¸é‚»å…ƒç´ åï¼Œæœ€å¤§çš„å…ƒç´ ä¼šè¢«äº¤æ¢åˆ°n-1ä½ç½®ä¸Šæ¥ç€å°†èŒƒå›´ç¼©å°è‡³n-2é‡å¤ä¸Šè¿°æ¯”è¾ƒè¿‡ç¨‹ï¼Œæ•°ç»„æ’åºå®Œæ¯•ã€‚ é€‰æ‹©æ’åº123456789101112public int[] selectionSort(int[] A, int n) &#123; // write code here int index = 0; for(int i = 0; i &lt; n - 1; i++)&#123; index = i; for(int j = i + 1; j &lt; n; j++)&#123; index = A[index] &gt; A[j]? j : index; &#125; swap(A, i, index); &#125; return A;&#125; ä¸»è¦æ€æƒ³ï¼šé€‰æ‹©æ’åºä½¿ç”¨ä¸¤å±‚åµŒå¥—å¾ªç¯æ¯”è¾ƒï¼Œå¤–å±‚å¾ªç¯è®°å½•ç»“æœå…ƒç´ éœ€è¦æ”¾ç½®çš„ä½ç½®ï¼Œå†…å±‚å¾ªç¯é€‰æ‹©å‰©ä¸‹å…ƒç´ ä¸­ç›¸å¯¹æœ€å°çš„å…ƒç´ ã€‚ç»è¿‡ä¸€æ¬¡å†…å¾ªç¯åé€‰æ‹©å‡ºæœ€å°çš„å…ƒç´ ä¸iä¸º0ä½ç½®ä¸Šçš„å…ƒç´ äº¤æ¢ï¼Œå³ä½œä¸ºç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¸€æ¬¡è¿›è¡Œä¸‹å»ï¼Œå‰©ä¸‹å…ƒç´ ä¸­ç›¸å¯¹è¾ƒå°çš„å…ƒç´ å°±æ”¾åœ¨äº†1,2â€¦n-1ä½ç½®ä¸Šï¼Œæ•°ç»„æ’åºå®Œæˆã€‚é€‰æ‹©æ’åºå› ä¸ºä½¿ç”¨äº†ä¸¤å±‚åµŒå¥—å¾ªç¯ï¼Œæ‰€ä»¥å…¶æ—¶é—´å¤æ‚åº¦ä¹Ÿä¸ºO(N^2)ã€‚ä¸¾ä¸ªç®€å•çš„ğŸŒ°ï¼šé¦–å…ˆè€ƒå¯Ÿ0ï½n-1èŒƒå›´åœ¨0ï½n-1èŒƒå›´å†…é€‰å‡ºæœ€å°çš„å…ƒç´ ï¼Œä¸æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ äº¤æ¢ç»§ç»­è€ƒå¯Ÿ1ï½n-1èŒƒå›´ï¼Œåœ¨1ï½n-1èŒƒå›´å†…é€‰å‡ºæœ€å°çš„å…ƒç´ ï¼Œä¸æ•°ç»„ä¸­ç¬¬äºŒä¸ªå…ƒç´ äº¤æ¢é‡å¤ä¸Šè¿°æ¯”è¾ƒè¿‡ç¨‹ï¼Œæ•°ç»„æ’åºå®Œæ¯•ã€‚ æ’å…¥æ’åº1234567891011121314151617 public int[] insertionSort(int[] A, int n) &#123; // write code here int index = 0; for(int i = 1; i &lt; n; i++)&#123; index = i; while(index &gt; 0)&#123; if(A[index] &lt; A[index - 1])&#123; swap(A, index, index - 1); index--; &#125; else&#123; break; &#125; &#125; &#125; return A;&#125; ä¸»è¦æ€æƒ³ï¼šä½¿ç”¨ä¸¤å±‚åµŒå¥—å¾ªç¯æ¯”è¾ƒï¼Œå°†æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡Œå‘å‰æ¯”è¾ƒï¼Œå¦‚æœè¯¥å…ƒç´ å°äºå‰ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™ä¸¤ä¸ªå…ƒç´ äº¤æ¢ä½ç½®indexâ€“ï¼Œç»§ç»­ä¸å‰ä¸€ä¸ªå…ƒç´ æ¯”è¾ƒï¼ŒçŸ¥é“index=0ï¼Œè¯¥å…ƒç´ æ”¾åœ¨å¤§å°åˆé€‚çš„ä½ç½®ä¸Šã€‚ä¾æ¬¡å¾ªç¯æ¯”è¾ƒæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œç›´è‡³i=n-1ï¼Œæ•°ç»„æ’åºå®Œæˆã€‚ä¸¾ä¸ªç®€å•çš„ğŸŒ°ï¼šé¦–å…ˆè€ƒå¯Ÿæ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä¸ç¬¬ä¸€ä¸ªå…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œ5æ¯”6å°ï¼Œåˆ™äº¤æ¢ä¸¤ä¸ªå…ƒç´ æ¥ç€è€ƒå¯Ÿæ•°ç»„ä¸­çš„ç¬¬ä¸‰ä¸ªå…ƒç´ ï¼Œå…ˆä¸ç¬¬äºŒä¸ªå…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œå°äºåˆ™äº¤æ¢ä¸¤ä¸ªå…ƒç´ ï¼Œæ¥ç€å†ä¸ç¬¬ä¸€ä¸ªå…ƒç´ æ¯”è¾ƒï¼Œå°äºåˆ™å†äº¤æ¢ä¸¤ä¸ªå…ƒç´ ã€‚æ ¹æ®æ­¤è¿‡ç¨‹ä¾æ¬¡è€ƒå¯Ÿæ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œæ•°ç»„æ’åºå®Œæ¯•ã€‚æ’å…¥æ’åºæ—¶é—´å¤æ‚åº¦ä¸ºO(N^2)ã€‚ å½’å¹¶æ’åº12345678910111213141516171819202122232425262728293031323334353637383940public int[] mergeSort(int[] A, int n) &#123; // write code here if (A == null || n &lt; 2) &#123; return null; &#125; process(A, 0, n - 1); return A;&#125;public static void process(int[] arr, int left, int right) &#123; if (left == right) &#123; return; &#125; int mid = (left + right) / 2; process(arr, left, mid); process(arr, mid + 1, right); merge(arr, left, mid, right);&#125;public static void merge(int[] arr, int left, int mid, int right) &#123; int[] help = new int[right - left + 1]; int l = left; int r = mid + 1; int index = 0; while (l &lt;= mid &amp;&amp; r &lt;= right) &#123; if (arr[l] &lt;= arr[r]) &#123; help[index++] = arr[l++]; &#125; else &#123; help[index++] = arr[r++]; &#125; &#125; while (l &lt;= mid) &#123; help[index++] = arr[l++]; &#125; while (r &lt;= right) &#123; help[index++] = arr[r++]; &#125; for (int i = 0; i &lt; help.length; i++) &#123; arr[left + i] = help[i]; &#125;&#125; ä¸»è¦æ€æƒ³ï¼šé¦–å…ˆå°†æ•°ç»„åˆ’åˆ†ä¸ºå•ä½é•¿åº¦ä¸º1çš„æœ‰åºåŒºé—´ï¼Œç„¶åæŠŠç›¸é‚»çš„é•¿åº¦ä¸º1çš„æœ‰åºåŒºé—´è¿›è¡Œåˆå¹¶ï¼Œå¾—åˆ°æœ€å¤§é•¿åº¦ä¸º2çš„æœ‰åºåŒºé—´ï¼Œæ¥ä¸‹æ¥å†æŠŠç›¸é‚»é•¿åº¦çš„æœ‰åºåŒºé—´åˆå¹¶å¾—åˆ°é•¿åº¦ä¸º4çš„æœ‰åºåŒºé—´ï¼Œä¾æ¬¡è¿™æ ·è¿›è¡Œä¸‹å»ï¼Œç›´åˆ°è®©æ•°ç»„ä¸­æ‰€æœ‰çš„æ•°åˆå¹¶ä¸ºä¸€ä¸ªæœ‰åºåŒºé—´ï¼Œæ•°ç»„æ’åºå®Œæ¯•ï¼Œè¿‡ç¨‹ç»“æŸã€‚å½’å¹¶æ’åºçš„è¿‡ç¨‹ï¼šæ ¹æ®æ­¤è¿‡ç¨‹ç›´åˆ°è®©æ•°ç»„ä¸­æ‰€æœ‰çš„æ•°åˆå¹¶ä¸ºä¸€ä¸ªæœ‰åºåŒºé—´ï¼Œæ•°ç»„æ’åºå®Œæ¯•ã€‚å½’å¹¶æ’åºæ—¶é—´å¤æ‚åº¦ä¸ºO(NlogN)ã€‚ å¿«é€Ÿæ’åº12345678910111213141516171819202122232425262728public int[] quickSort(int[] arr, int n) &#123; // write code here if (arr == null || n &lt; 2) &#123; return null; &#125; process(arr, 0, n - 1); return arr;&#125;public static void process(int[] arr, int left, int right)&#123; if(left &lt; right)&#123; int random = left + (int) (Math.random() * (right - left + 1)); swap(arr, random, right); int mid = partition(arr, left, right); process(arr, left, mid - 1); process(arr, mid + 1, right); &#125;&#125;public static int partition(int[] arr, int left, int right)&#123; int pivot = left - 1; int index = left; while (index &lt;= right) &#123; if (arr[index] &lt;= arr[right]) &#123; swap(arr, ++pivot, index); &#125; index++; &#125; return pivot;&#125; ä¸»è¦æ€æƒ³ï¼šéšæœºé€‰ä¸­ä¸€ä¸ªåˆ’åˆ†å€¼ï¼Œå°†å°äºç­‰äºåˆ’åˆ†å€¼çš„å…ƒç´ æ”¾åœ¨å…ƒç´ çš„å·¦è¾¹ï¼Œå¤§äºåˆ’åˆ†å€¼çš„å…ƒç´ æ”¾åœ¨å…ƒç´ çš„å³è¾¹ï¼Œå†å¯¹å·¦å³ä¸¤éƒ¨åˆ†åˆ†åˆ«é€’å½’åœ°è°ƒç”¨å¿«é€Ÿæ’åºçš„è¿‡ç¨‹ï¼Œæ•°ç»„æ’åºå®Œæ¯•ï¼Œè¿‡ç¨‹ç»“æŸã€‚å¿«é€Ÿæ’åºçš„è¿‡ç¨‹ï¼šä¸€æ¬¡åˆ’åˆ†è¿‡ç¨‹ï¼Œå³é€‰æ‹©ä¸€ä¸ªåˆ’åˆ†å€¼ä¹‹åå°äºç­‰äºåˆ’åˆ†å€¼çš„æ•°æ˜¯å¦‚ä½•æ”¾åœ¨å…ƒç´ çš„å·¦è¾¹ï¼Œå¤§äºåˆ’åˆ†å€¼çš„æ•°å¦‚ä½•æ”¾åœ¨å…ƒç´ çš„å³è¾¹ï¼šé¦–å…ˆä»¤åˆ’åˆ†å€¼æ”¾åœ¨æ•°ç»„æœ€åçš„ä½ç½®ï¼Œç„¶åæˆ‘ä»¬è®¾ç½®ä¸€ä¸ªå°äºç­‰äºçš„åŒºé—´ï¼ŒåŒºé—´çš„åˆå§‹é•¿åº¦ä¸º0ï¼Œæ”¾åœ¨æ•´ä¸ªæ•°ç»„çš„å·¦è¾¹æ¥ä¸‹æ¥ä»å·¦åˆ°å³éå†æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå¦‚æœå½“å‰å…ƒç´ å¤§äºåˆ’åˆ†å€¼ï¼Œåˆ™ç»§ç»­éå†ä¸‹ä¸€ä¸ªå€¼å¦‚æœå½“å‰å…ƒç´ å°äºç­‰äºåˆ’åˆ†å€¼ï¼Œåˆ™æŠŠå½“å‰æ•°ä¸å°äºç­‰äºåŒºé—´çš„ä¸‹ä¸€ä¸ªæ•°è¿›è¡Œäº¤æ¢ï¼Œç„¶åä»¤å°äºç­‰äºåŒºé—´å³æ‰©ä¸€ä¸ªé•¿åº¦åœ¨éå†å®Œæ‰€æœ‰å…ƒç´ ï¼Œç›´åˆ°æœ€åçš„å…ƒç´ æ—¶ï¼Œå°†æœ€åçš„å…ƒç´ å³åˆ’åˆ†å€¼ä¸å°äºç­‰äºåŒºé—´çš„ä¸‹ä¸€ä¸ªæ•°è¿›è¡Œäº¤æ¢ï¼Œè¿™æ ·å°±å®Œæˆäº†ä¸€æ¬¡å®Œæ•´çš„åˆ’åˆ†è¿‡ç¨‹ã€‚å¿«é€Ÿæ’åºæ—¶é—´å¤æ‚åº¦ä¸ºO(NlogN)ã€‚ å †æ’åº123456789101112131415161718192021222324252627282930313233public int[] heapSort(int[] arr, int n) &#123; // write code here for (int i = 0; i &lt; n; i++) &#123; createMaxdHeap(arr, n - 1 - i); swap(arr, 0, n - 1 - i); &#125; return arr; &#125;public static void createMaxdHeap(int[] data, int lastIndex) &#123; for (int i = (lastIndex - 1) / 2; i &gt;= 0; i--) &#123; // ä¿å­˜å½“å‰æ­£åœ¨åˆ¤æ–­çš„èŠ‚ç‚¹ int k = i; // è‹¥å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹å­˜åœ¨ while (2 * k + 1 &lt;= lastIndex) &#123; // biggerIndexæ€»æ˜¯è®°å½•è¾ƒå¤§èŠ‚ç‚¹çš„å€¼,å…ˆèµ‹å€¼ä¸ºå½“å‰åˆ¤æ–­èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ int biggerIndex = 2 * k + 1; if (biggerIndex &lt; lastIndex) &#123; // è‹¥å³å­èŠ‚ç‚¹å­˜åœ¨ï¼Œå¦åˆ™æ­¤æ—¶biggerIndexåº”è¯¥ç­‰äº lastIndex if (data[biggerIndex] &lt; data[biggerIndex + 1]) &#123; // è‹¥å³å­èŠ‚ç‚¹å€¼æ¯”å·¦å­èŠ‚ç‚¹å€¼å¤§ï¼Œåˆ™biggerIndexè®°å½•çš„æ˜¯å³å­èŠ‚ç‚¹çš„å€¼ biggerIndex++; &#125; &#125; if (data[k] &lt; data[biggerIndex]) &#123; // è‹¥å½“å‰èŠ‚ç‚¹å€¼æ¯”å­èŠ‚ç‚¹æœ€å¤§å€¼å°ï¼Œåˆ™äº¤æ¢2è€…å¾—å€¼ï¼Œäº¤æ¢åå°†biggerIndexå€¼èµ‹å€¼ç»™k swap(data, k, biggerIndex); k = biggerIndex; &#125; else &#123; break; &#125; &#125; &#125; &#125; ä¸»è¦æ€æƒ³ï¼šé¦–å…ˆå°†æ•°ç»„ä¸­çš„nä¸ªæ•°å»ºæˆä¸€ä¸ªå¤§å°ä¸ºnçš„å¤§æ ¹å †ï¼Œå †é¡¶æ˜¯æ•´ä¸ªæ•°ç»„ä¸­çš„æœ€å¤§å€¼ï¼Œå°†å †é¡¶å…ƒç´ ä¸å †çš„æœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ä½ç½®ï¼Œç„¶åå°†æœ€å¤§å€¼è„±ç¦»å‡ºå †çš„æ•´ä¸ªç»“æ„ï¼Œæ”¾åœ¨æ•°ç»„æœ€åçš„ä½ç½®ï¼Œæ¥ä¸‹æ¥å°†n-1å¤§å°çš„å †è¿›è¡Œå¤§æ ¹å †çš„è°ƒæ•´ï¼Œè°ƒæ•´å‡ºn-1å¤§æ ¹å †çš„æœ€å¤§å€¼æ”¾åœ¨å †é¡¶ï¼Œå†æŠŠå †é¡¶ä½ç½®çš„å€¼ä¸æ•´ä¸ªå †çš„æœ€åå…ƒç´ äº¤æ¢ï¼Œå°†æœ€å¤§å€¼è„±ç¦»å‡ºå †çš„æ•´ä¸ªç»“æ„ï¼Œæ”¾åœ¨æ•°ç»„ç›¸å¯¹æœ€åçš„ä½ç½®ã€‚ä¾æ¬¡é‡å¤æ­¥éª¤ï¼Œç›´åˆ°å †çš„å¤§å°å‡ä¸º1ä¸ºæ­¢ï¼Œæ•´ä¸ªæ•°ç»„å°±å˜ä¸ºæœ‰åºæ•°ç»„ï¼Œè¿‡ç¨‹ç»“æŸã€‚å †æ’åºçš„è¿‡ç¨‹ï¼šå †æ’åºæ—¶é—´å¤æ‚åº¦ä¸ºO(NlogN)ã€‚ å¸Œå°”æ’åº123456789101112131415161718192021222324public int[] shellSort(int[] arr, int n) &#123; // write code here if(arr == null || n &lt; 2)&#123; return null; &#125; int feet = n / 2; int index = 0; while(feet &gt; 0)&#123; for(int i = feet; i &lt; n; i++)&#123; index = i; while(index &gt;= feet)&#123; if(arr[index - feet] &gt; arr[index])&#123; swap(arr, index - feet, index); index -= feet; &#125; else&#123; break; &#125; &#125; &#125; feet /= 2; &#125; return arr;&#125; ä¸»è¦æ€æƒ³ï¼šå¸Œå°”æ’åºæ˜¯æ’å…¥æ’åºçš„ä¸€ä¸ªæ”¹è‰¯ç®—æ³•ï¼Œæ’å…¥æ’åºæ­¥é•¿ä¸º1ï¼Œå¸Œå°”æ’åºæ­¥é•¿å¯è°ƒæ•´ã€‚ä¸¾ä¸ªğŸŒ°æ¥è¯´æ˜ï¼šåˆå§‹æ­¥é•¿ä¸º3æ—¶ï¼Œæ•°ç»„å‰3ä¸ªæ•°6 5 3æ˜¯ä¸éœ€è¦è€ƒè™‘çš„ä»1å¼€å§‹ï¼Œ1å‘å‰è·³3ä½æ¥åˆ°äº†6çš„æ•°ä¸Šï¼Œ1å’Œ6è¿›è¡Œæ¯”è¾ƒå‘ç°1æ¯”6å°ï¼Œåˆ™ä¸¤ä¸ªå…ƒç´ äº¤æ¢ä½ç½®æ¥ä¸‹æ¥1å°±æ¥åˆ°äº†ä½ç½®0ï¼Œå¾€å‰è·³3ä½ï¼Œåˆ™å·²ç»è¶Šç•Œï¼Œæ‰€ä»¥äº¤æ¢çš„è¿‡ç¨‹åœæ­¢ï¼Œç„¶åç»§ç»­è€ƒå¯Ÿä¸‹ä¸€ä½æ•°ï¼Œç›´åˆ°æ•°ç»„æœ«å°¾ï¼Œæ­¥é•¿ä¸º3çš„æ’å…¥æ’åºç»“æŸè°ƒæ•´æ­¥é•¿ç»§ç»­è¿›è¡Œæ’å…¥æ’åºçš„è¿‡ç¨‹ï¼Œå¸Œå°”æ’åºæœ€ç»ˆéƒ½ä¼šä»¥æ­¥é•¿ä¸º1çš„æƒ…å†µç»“æŸå¸Œå°”æ’åºçš„å…³é”®æ˜¯æ­¥é•¿çš„é€‰æ‹©ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(NlogN)ã€‚ åŸºäºæ¡¶æ’åºçš„æ’åºç®—æ³•è®¡æ•°æ’åº12345678910111213141516171819202122 public int[] countingSort(int[] arr, int n)&#123; if (arr == null || n &lt; 2) &#123; return null; &#125; int min = arr[0]; int max = arr[0]; for (int i = 1; i &lt; n; i++) &#123; min = Math.min(arr[i], min); max = Math.max(arr[i], max); &#125; int[] countArr = new int[max - min + 1]; for (int i = 0; i &lt; n; i++) &#123; countArr[arr[i] - min]++; &#125; int index = 0; for (int i = 0; i &lt; countArr.length; i++) &#123; while (countArr[i]-- &gt; 0) &#123; arr[index++] = i + min; &#125; &#125; return arr;//å°†æ’åºå¥½çš„æ•°ç»„è¿”å›ï¼Œå®Œæˆæ’åº &#125; ä¸»è¦æ€æƒ³ï¼šæ ¹æ®æ•°ç»„ä¸­çš„å…ƒç´ å»ºæ¡¶ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ ä¾æ¬¡æ”¾å…¥å¯¹åº”çš„æ¡¶ä¸­ï¼Œå½“æ‰€æœ‰å…ƒç´ è¿›å…¥æ¡¶ä¹‹åï¼Œä»æœ€å°çš„æ¡¶ä¾æ¬¡å€’å‡ºæ¡¶ä¸­çš„å…ƒç´ ï¼Œç›´åˆ°æœ€å¤§çš„æ¡¶å·ä¸ºæ­¢ï¼Œæ­¤æ—¶ï¼Œå…ƒç´ è¢«å€’å‡ºçš„é¡ºåºå°±æ˜¯æ•°ç»„æ’åºä¹‹åçš„é¡ºåºã€‚ä¸Šä¾‹å®ç°ä¸­ä¸ºäº†èŠ‚çœå†…å­˜çš„å¼€é”€ï¼Œè®°å½•äº†æ•°ç»„å…ƒç´ ä¸­çš„æœ€å¤§å€¼ä»¥åŠæœ€å°å€¼ï¼Œå¹¶ä»¥æ­¤æ¥å»ºç«‹æœ€å¤§æ¡¶ä»¥åŠæœ€å°æ¡¶ï¼Œè¦æ³¨æ„çš„æ˜¯ï¼Œè¦è€ƒè™‘å­˜åœ¨ç›¸ç­‰å…ƒç´ çš„æƒ…å†µï¼Œå› æ­¤è¦è®°å½•æ¯ä¸ªæ¡¶ä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚ä¸¾ä¸ªç®€å•çš„ğŸŒ°ï¼šå¯¹å‘˜å·¥èº«é«˜è¿›è¡Œæ’åºï¼Œå› ä¸ºæˆå¹´äººçš„èº«é«˜åœ¨100cm-300cmä¹‹é—´ï¼Œæ‰€ä»¥å°†æ¡¶å®šä¹‰ä¸º100-300å°†å‘˜å·¥èº«é«˜æ”¾å…¥ç›¸åº”çš„æ¡¶å·ä¸­ä»100å¼€å§‹å€’å‡ºå…ƒç´ ï¼Œæ•°ç»„æ’åºå®Œæ¯•ã€‚è®¡æ•°æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ã€‚ åŸºæ•°æ’åº1234567891011121314151617181920212223242526272829303132public int[] radixSort(int[] array, int n)&#123; if (array == null || n &lt; 2) &#123; return null; &#125; int d = 10000; int m = 1;//ä»£è¡¨ä½æ•°å¯¹åº”çš„æ•°ï¼š1,10,100... int k = 0;//ä¿å­˜æ¯ä¸€ä½æ’åºåçš„ç»“æœç”¨äºä¸‹ä¸€ä½çš„æ’åºè¾“å…¥n int[][] bucket = new int[10][n];//æ’åºæ¡¶ç”¨äºä¿å­˜æ¯æ¬¡æ’åºåçš„ç»“æœï¼Œè¿™ä¸€ä½ä¸Šæ’åºç»“æœç›¸åŒçš„æ•°å­—æ”¾åœ¨åŒä¸€ä¸ªæ¡¶é‡Œ int[] order = new int[n];//ç”¨äºä¿å­˜æ¯ä¸ªæ¡¶é‡Œæœ‰å¤šå°‘ä¸ªæ•°å­— while(m &lt; d) &#123; for(int num : array) //å°†æ•°ç»„arrayé‡Œçš„æ¯ä¸ªæ•°å­—æ”¾åœ¨ç›¸åº”çš„æ¡¶é‡Œ &#123; int digit = (num / m) % 10; bucket[digit][order[digit]++] = num; &#125; for(int i = 0; i &lt; n; i++)//å°†å‰ä¸€ä¸ªå¾ªç¯ç”Ÿæˆçš„æ¡¶é‡Œçš„æ•°æ®è¦†ç›–åˆ°åŸæ•°ç»„ä¸­ç”¨äºä¿å­˜è¿™ä¸€ä½çš„æ’åºç»“æœ &#123; if(order[i] &gt; 0)//è¿™ä¸ªæ¡¶é‡Œæœ‰æ•°æ®ï¼Œä»ä¸Šåˆ°ä¸‹éå†è¿™ä¸ªæ¡¶å¹¶å°†æ•°æ®ä¿å­˜åˆ°åŸæ•°ç»„ä¸­ &#123; for(int j = 0;j &lt; order[i]; j++) &#123; array[k++] = bucket[i][j]; &#125; &#125; order[i] = 0;//å°†æ¡¶é‡Œè®¡æ•°å™¨ç½®0ï¼Œç”¨äºä¸‹ä¸€æ¬¡ä½æ’åº &#125; m *= 10; k = 0;//å°†kç½®0ï¼Œç”¨äºä¸‹ä¸€è½®ä¿å­˜ä½æ’åºç»“æœ &#125; return array;&#125; ä¸¾ä¸ªç®€å•çš„ğŸŒ°æ¥è¯´æ˜åŸºæ•°æ’åºçš„ä¸»è¦æ€æƒ³ï¼šå‡†å¤‡0-9å·æ¡¶æ¥ä¸‹æ¥æ ¹æ®æ¯ä¸€ä¸ªå…ƒç´ ä¸ªä½ä¸Šçš„æ•°å­—ï¼Œå°†å…ƒç´ æ”¾å…¥å¯¹åº”çš„æ¡¶å·ä¸­æ‰€æœ‰å…ƒç´ è¿›æ¡¶åå†ä»9å·æ¡¶è‡³0å·æ¡¶ä¾æ¬¡å€’å‡ºæ¡¶å†…çš„å…ƒç´ ï¼Œç»„æˆäº†ä¸€ä¸ªæ–°åºåˆ—æ ¹æ®æ¯ä¸€ä¸ªå…ƒç´ åä½ä¸Šçš„æ•°å­—ï¼Œå°†æ–°åºåˆ—ä¸­å…ƒç´ æ”¾å…¥å¯¹åº”çš„æ¡¶å·ä¸­æ‰€æœ‰å…ƒç´ è¿›æ¡¶åå†ä»9å·æ¡¶è‡³0å·æ¡¶ä¾æ¬¡å€’å‡ºæ¡¶å†…çš„å…ƒç´ ï¼Œç»„æˆäº†ä¸€ä¸ªæ–°åºåˆ—æ ¹æ®æ¯ä¸€ä¸ªå…ƒç´ ç™¾ä½ä¸Šçš„æ•°å­—ï¼Œå°†æ–°åºåˆ—ä¸­å…ƒç´ æ”¾å…¥å¯¹åº”çš„æ¡¶å·ä¸­æ‰€æœ‰å…ƒç´ è¿›æ¡¶åå†ä»9å·æ¡¶è‡³0å·æ¡¶ä¾æ¬¡å€’å‡ºæ¡¶å†…çš„å…ƒç´ ï¼Œç»„æˆäº†ä¸€ä¸ªæ–°åºåˆ—ä¾æ¬¡è¿­ä»£ä¸‹å»ï¼Œæœ€åæ ¹æ®æœ€é«˜ä½æ•°å€¼é€‰æ‹©è¿›å…¥å¯¹åº”çš„æ¡¶ä¸­ï¼Œæœ€åä¸€æ¬¡å€’å‡ºçš„åºåˆ—å°±æ˜¯æ•´ä¸ªæ•°ç»„æ’åºçš„ç»“æœï¼Œè¿‡ç¨‹ç»“æŸã€‚åŸºæ•°æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N) æ’åºç®—æ³•çš„æ¯”è¾ƒç¨³å®šæ€§ï¼šå‡å®šå¾…æ’åºçš„è®°å½•åºåˆ—ä¸­ï¼Œå­˜åœ¨å¤šä¸ªå…·æœ‰ç›¸åŒçš„å…³é”®å­—çš„è®°å½•ï¼Œè‹¥ç»è¿‡æ’åºï¼Œè¿™äº›è®°å½•çš„ç›¸å¯¹æ¬¡åºä¸å˜ï¼Œåˆ™ç§°è¿™ç§æ’åºç®—æ³•æ˜¯ç¨³å®šçš„ï¼Œå¦åˆ™ç§°ä¸ºä¸ç¨³å®šçš„ã€‚ æ’åºç®—æ³•å…¸å‹æ¡ˆä¾‹å°èŒƒå›´æ’åºå·²çŸ¥ä¸€ä¸ªå‡ ä¹æœ‰åºçš„æ•°ç»„ï¼Œå‡ ä¹æœ‰åºæ˜¯æŒ‡ï¼Œå¦‚æœæŠŠæ•°ç»„æ’å¥½é¡ºåºçš„è¯ï¼Œæ¯ä¸ªå…ƒç´ ç§»åŠ¨çš„è·ç¦»å¯ä»¥ä¸è¶…è¿‡kï¼Œå¹¶ä¸”kç›¸å¯¹äºæ•°ç»„æ¥è¯´æ¯”è¾ƒå°ã€‚è¯·é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æ’åºç®—æ³•é’ˆå¯¹è¿™ä¸ªæ•°æ®è¿›è¡Œæ’åºã€‚é€‰æ‹©æ”¹è¿›åçš„å †æ’åºç®—æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263public int[] sortElement(int[] A, int n, int k) &#123; if (A == null || A.length == 0 || n &lt; k) &#123; return A; &#125; int[] heap = getKHeap(A, k); for(int i = k; i &lt; n; i++)&#123; A[i - k] = heap[0]; heap[0] = A[i]; heapify(heap, 0, k); &#125; for(int i = n - k; i &lt; n; i++)&#123; A[i] = heap[0]; heap[0] = heap[k - 1]; heapify(heap, 0, --k); &#125; return A; &#125; public int[] getKHeap(int[] A, int k)&#123; int[] heap = new int[k]; for(int i = 0; i &lt; k; i++)&#123; heapInsert(heap, A[i], i); &#125; return heap;&#125; public void heapInsert(int[]A, int value, int index)&#123; A[index] = value; while(index != 0)&#123; int parent = (index - 1) / 2; if(A[parent] &gt; A[index])&#123; swap(A, parent, index); index = parent; &#125; else&#123; break; &#125; &#125;&#125; public void heapify(int[] arr, int index, int heapSize) &#123; int left = index * 2 + 1; int right = index * 2 + 2; int smallest = index; while (left &lt; heapSize) &#123; if (arr[left] &lt; arr[index]) &#123; smallest = left; &#125; if (right &lt; heapSize &amp;&amp; arr[right] &lt; arr[smallest]) &#123; smallest = right; &#125; if (smallest != index) &#123; swap(arr, smallest, index); &#125; else &#123; break; &#125; index = smallest; left = index * 2 + 1; right = index * 2 + 2; &#125;&#125; è¯´æ˜ï¼šæ•´ä¸ªæ•°ç»„çš„æœ€å°å€¼è‚¯å®šæ˜¯åœ¨0~k-1è¿™ä¸ªåŒºé—´å†…çš„å°†a[0]~a[k-1]å»ºç«‹å°æ ¹å †ï¼Œå°†æ ˆé¡¶å…ƒç´ æ”¾åœ¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ä¸Šç„¶åå°†å…ƒç´ ç»„çš„ä¸‹ä¸€ä¸ªå…ƒç´ æ”¾å…¥å°æ ¹å †ï¼Œå¹¶å¯¹å°æ ¹å †è¿›è¡Œè°ƒæ•´å°†æ ˆé¡¶å…ƒç´ æ”¾åœ¨æ•°ç»„çš„ç¬¬äºŒä¸ªä½ç½®ä¸Šä¾æ¬¡é‡å¤æ­¥éª¤ï¼Œæ•°ç»„æ’åºå®Œæ¯•ã€‚æ—¶é—´å¤æ‚åº¦ä¸ºO(NlogK) é‡å¤å€¼åˆ¤æ–­è¯·è®¾è®¡ä¸€ä¸ªé«˜æ•ˆç®—æ³•ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦æœ‰é‡å¤å€¼ã€‚å¿…é¡»ä¿è¯é¢å¤–ç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚å¦‚æœæ²¡æœ‰ç©ºé—´å¤æ‚åº¦çš„é™åˆ¶ï¼Œç”¨å“ˆå¸Œè¡¨å®ç°ï¼Œæ­¤é¢˜é‡‡ç”¨å…ˆæ’åºååˆ¤æ–­çš„æ–¹æ³•ï¼Œé‡‡ç”¨éé€’å½’çš„å †æ’åºå®ç°æ’åºã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445public boolean checkDuplicate(int[] a, int n) &#123; // write code here a = heapSort(a, n); for(int i = 0; i &lt; n - 1; i++) &#123; if(a[i] == a[i + 1]) &#123; return true; &#125; &#125; return false;&#125;public int[] heapSort(int[] A, int n) &#123; // write code here for (int i = 0; i &lt; n; i++) &#123; createMaxdHeap(A, n - 1 - i); swap(A, 0, n - 1 - i); &#125; return A; &#125; public static void createMaxdHeap(int[] data, int lastIndex) &#123; for (int i = (lastIndex - 1) / 2; i &gt;= 0; i--) &#123; // ä¿å­˜å½“å‰æ­£åœ¨åˆ¤æ–­çš„èŠ‚ç‚¹ int k = i; // è‹¥å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹å­˜åœ¨ while (2 * k + 1 &lt;= lastIndex) &#123; // biggerIndexæ€»æ˜¯è®°å½•è¾ƒå¤§èŠ‚ç‚¹çš„å€¼,å…ˆèµ‹å€¼ä¸ºå½“å‰åˆ¤æ–­èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ int biggerIndex = 2 * k + 1; if (biggerIndex &lt; lastIndex) &#123; // è‹¥å³å­èŠ‚ç‚¹å­˜åœ¨ï¼Œå¦åˆ™æ­¤æ—¶biggerIndexåº”è¯¥ç­‰äº lastIndex if (data[biggerIndex] &lt; data[biggerIndex + 1]) &#123; // è‹¥å³å­èŠ‚ç‚¹å€¼æ¯”å·¦å­èŠ‚ç‚¹å€¼å¤§ï¼Œåˆ™biggerIndexè®°å½•çš„æ˜¯å³å­èŠ‚ç‚¹çš„å€¼ biggerIndex++; &#125; &#125; if (data[k] &lt; data[biggerIndex]) &#123; // è‹¥å½“å‰èŠ‚ç‚¹å€¼æ¯”å­èŠ‚ç‚¹æœ€å¤§å€¼å°ï¼Œåˆ™äº¤æ¢2è€…å¾—å€¼ï¼Œäº¤æ¢åå°†biggerIndexå€¼èµ‹å€¼ç»™k swap(data, k, biggerIndex); k = biggerIndex; &#125; else &#123; break; &#125; &#125; &#125; &#125; æœ‰åºæ•°ç»„åˆå¹¶æœ‰ä¸¤ä¸ªä»å°åˆ°å¤§æ’åºä»¥åçš„æ•°ç»„Aå’ŒBï¼Œå…¶ä¸­Açš„æœ«ç«¯æœ‰è¶³å¤Ÿçš„ç¼“å†²ç©ºå®¹çº³Bã€‚è¯·ç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œå°†Båˆå¹¶å…¥Aå¹¶æ’åºã€‚12345678910111213 public int[] mergeAB(int[] A, int[] B, int n, int m) &#123; // write code here while(m != 0)&#123; if(n == 0)&#123; A[m - 1] = B[m - 1]; m--; &#125; else&#123; A[m + n - 1] = A[n - 1] &gt; B[m - 1]? A[--n] : B[--m]; &#125; &#125; return A;&#125; ä¸¾ä¸ªğŸŒ°æ¥è¯´æ˜ï¼šé¦–å…ˆæ¯”è¾ƒæ•°ç»„Aå’Œæ•°ç»„Bæœ€åçš„å…ƒç´ å‘ç°6æ¯”5å¤§ï¼Œæ‰€ä»¥å°†6æ‹·è´è‡³æ•°ç»„Aæœ€åçš„ä½ç½®æ¥ç€æ¯”è¾ƒæ•°ç»„Aå€’æ•°ç¬¬äºŒä¸ªå…ƒç´ 4å’Œæ•°ç»„Bæœ€åä¸€ä¸ªå…ƒç´ 5ï¼Œå‘ç°5æ¯”4å¤§ï¼Œåˆ™å°†5æ‹·è´è‡³æ•°ç»„Aå€’æ•°ç¬¬äºŒä¸ªä½ç½®ä¾æ¬¡æ¯”è¾ƒæ‰€æœ‰çš„æ•°ï¼Œç›´åˆ°æœ‰åºæ•°ç»„Bå®Œæˆæ‹·è´è‡³æ•°ç»„Aä¸­ä¸ºæ­¢ï¼Œé‚£ä¹ˆæ•°ç»„Aå°±æ˜¯æ•´ä¸ªåˆå¹¶åçš„ç»“æœã€‚å…³é”®åœ¨äºä»åå¾€å‰è¦†ç›–æ•°ç»„A ä¸‰è‰²æ’åºæœ‰ä¸€ä¸ªåªç”±0ï¼Œ1ï¼Œ2ä¸‰ç§å…ƒç´ æ„æˆçš„æ•´æ•°æ•°ç»„ï¼Œè¯·ä½¿ç”¨äº¤æ¢ã€åŸåœ°æ’åºè€Œä¸æ˜¯ä½¿ç”¨è®¡æ•°è¿›è¡Œæ’åºã€‚æœ¬é¢˜ä¸»è¦è¿‡ç¨‹ä¸å¿«é€Ÿæ’åºåˆ’åˆ†è¿‡ç¨‹ç±»ä¼¼123456789101112131415161718192021public int[] sortThreeColor(int[] A, int n) &#123; // write code here if (A == null || n &lt; 2) &#123; return A; &#125; int left = -1; int right = n; int index = 0; while(index &lt; right)&#123; if(A[index] == 0)&#123; swap(A, ++left, index++); &#125; else if(A[index] == 2)&#123; swap(A, index, ++right); &#125; else&#123; index++; &#125; &#125; return A;&#125; ä¸¾ä¸ªğŸŒ°ï¼šå› ä¸ºæ­¤è¿‡ç¨‹ä¸å¿«é€Ÿæ’åºåˆ’åˆ†è¿‡ç¨‹å¾ˆç±»ä¼¼ï¼Œè¿™é‡Œå°±ä¸åšè¯¦ç»†è¯´æ˜äº† æœ‰åºçŸ©é˜µæŸ¥æ‰¾ç°åœ¨æœ‰ä¸€ä¸ªè¡Œå’Œåˆ—éƒ½æ’å¥½åºçš„çŸ©é˜µï¼Œè¯·è®¾è®¡ä¸€ä¸ªé«˜æ•ˆç®—æ³•ï¼Œå¿«é€ŸæŸ¥æ‰¾çŸ©é˜µä¸­æ˜¯å¦å«æœ‰å€¼xã€‚123456789101112131415161718public boolean findX(int[][] mat, int n, int m, int x) &#123; int a = 0; int b = m - 1; while(a &lt; n &amp;&amp; b &gt;= 0)&#123; if (mat[a][b] == x) &#123; return true ; &#125; if (mat[a][b] &lt; x)&#123; a++ ; &#125; if (mat[a][b] &gt; x) &#123; b--; &#125; &#125; return false;&#125; ä¸¾ä¸ªğŸŒ°æ¥è¯´æ˜ï¼šä»äºŒç»´æ•°ç»„çš„å³ä¸Šè§’å¼€å§‹å¦‚æœå½“å‰æ•°å¤§äºéœ€è¦æ‰¾çš„æ•°ï¼Œå› ä¸ºæ•´ä¸ªäºŒç»´æ•°ç»„ä¸­æ¯ä¸€åˆ—éƒ½æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥å½“å‰æ•°ä¸‹é¢çš„æ‰€æœ‰æ•°éƒ½æ¯”éœ€è¦æ‰¾çš„æ•°å¤§ï¼Œæ­¤æ—¶å‘å·¦ç§»åŠ¨å¦‚æœå½“å‰æ•°å°äºéœ€è¦æ‰¾çš„æ•°ï¼Œå› ä¸ºæ•´ä¸ªäºŒç»´æ•°ç»„ä¸­æ¯ä¸€è¡Œéƒ½æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥å½“å‰æ•°å·¦è¾¹çš„æ‰€æœ‰æ•°éƒ½æ¯”éœ€è¦æ‰¾çš„æ•°å°ï¼Œæ­¤æ—¶å‘ä¸‹ç§»åŠ¨æ¯ä¸€ä¸ªå½“å‰æ•°éƒ½æ ¹æ®ä»¥ä¸Šçš„é€»è¾‘è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœåœ¨ç§»åŠ¨çš„è¿‡ç¨‹ä¸­æ‰¾åˆ°äº†æˆ‘ä»¬éœ€è¦æ‰¾çš„æ•°ï¼Œè¿”å›trueï¼Œæ•´ä¸ªè¿‡ç¨‹ç»“æŸï¼Œå¦‚æœä¸€ç›´åˆ°è¶Šç•Œè¿˜æœªæ‰¾åˆ°ï¼Œåˆ™è¿”å›falseã€‚ æœ€çŸ­å­æ•°ç»„å¯¹äºä¸€ä¸ªæ•°ç»„ï¼Œè¯·è®¾è®¡ä¸€ä¸ªé«˜æ•ˆç®—æ³•è®¡ç®—éœ€è¦æ’åºçš„æœ€çŸ­å­æ•°ç»„çš„é•¿åº¦ã€‚12345678910111213141516171819202122232425262728293031 public int shortestSubsequence(int[] A, int n) &#123; // write code here int max = A[0]; int min = A[n - 1]; int left = 0; int right = 0; for(int i = 1; i &lt; n; i++) &#123; if(A[i] &gt; max) &#123; max = A[i]; &#125; else if(A[i] &lt; max) &#123; right = i; &#125; &#125; for(int i = n - 2; i &gt;= 0; i--) &#123; if(A[i] &lt; min) &#123; min = A[i]; &#125; else if(A[i] &gt; min) &#123; left = i; &#125; &#125; return ((right-left) == 0) ? 0 : ((right - left) + 1);&#125; ä¸¾ä¸ªğŸŒ°æ¥è¯´æ˜ï¼šé¦–å…ˆä»å·¦åˆ°å³éå†æ•´ä¸ªæ•°ç»„ï¼Œä½¿ç”¨å•ç‹¬çš„å˜é‡æ¥è®°å½•éå†è¿‡çš„å…ƒç´ çš„æœ€å¤§å€¼ï¼Œæˆ‘ä»¬åªå…³æ³¨äºä¸€ç§æƒ…å†µï¼šéå†è¿‡éƒ¨åˆ†çš„æœ€å¤§å€¼å¤§äºå½“å‰æ•°çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µå‘ç”Ÿçš„æ—¶å€™ï¼Œåœ¨çœŸå®çš„æ’åºä¹‹åï¼Œæœ€å¤§å€¼èµ·ç ä¼šåœ¨å½“å‰æ•°çš„ä½ç½®æˆ–è€…æ›´å³çš„ä½ç½®ã€‚ä»å·¦åˆ°å³éå†çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åªè®°å½•å‘ç”Ÿè¿™ç§æƒ…å†µçš„æœ€å³ä½ç½®ï¼›æ¥ä¸‹æ¥æ˜¯ä»å³å¾€å·¦éå†æ•´ä¸ªæ•°ç»„ï¼Œä½¿ç”¨å•ç‹¬çš„å˜é‡æ¥è®°å½•éå†è¿‡çš„å…ƒç´ çš„æœ€å°å€¼ï¼Œæˆ‘ä»¬ä¾ç„¶åªå…³æ³¨äºä¸€ç§æƒ…å†µï¼šéå†è¿‡éƒ¨åˆ†çš„æœ€å°å€¼å°äºå½“å‰æ•°çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µå‘ç”Ÿçš„æ—¶å€™ï¼Œåœ¨çœŸå®çš„æ’åºä¹‹åï¼Œæœ€å°å€¼èµ·ç ä¼šåœ¨å½“å‰æ•°çš„ä½ç½®æˆ–è€…æ›´å·¦çš„ä½ç½®ã€‚ä»å³åˆ°å·¦éå†çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åªè®°å½•å‘ç”Ÿè¿™ç§æƒ…å†µçš„æœ€å·¦ä½ç½®ï¼›æœ€å·¦ä½ç½®å’Œæœ€å³ä½ç½®ä¸­é—´çš„èŒƒå›´å°±æ˜¯éœ€è¦æ’åºçš„æœ€çŸ­å­æ•°ç»„ ç›¸é‚»ä¸¤æ•°æœ€å¤§å·®å€¼æœ‰ä¸€ä¸ªæ•´å½¢æ•°ç»„Aï¼Œè¯·è®¾è®¡ä¸€ä¸ªå¤æ‚åº¦ä¸ºO(n)çš„ç®—æ³•ï¼Œç®—å‡ºæ’åºåç›¸é‚»ä¸¤æ•°çš„æœ€å¤§å·®å€¼ã€‚æ¥è‡ªæ¡¶æ’åºæ€æƒ³1234567891011121314151617181920212223242526272829303132333435363738394041424344public int maxGap(int[] nums, int n) &#123; // write code here if (nums == null || n &lt; 2) &#123; return 0; &#125;n int min = Integer.MAX_VALUE; int max = Integer.MIN_VALUE; for (int i = 0; i &lt; n; i++) &#123; min = Math.min(min, nums[i]); max = Math.max(max, nums[i]); &#125; if (min == max) &#123; return 0; &#125; boolean[] hasNum = new boolean[len + 1]; int[] maxs = new int[len + 1]; int[] mins = new int[len + 1]; int bid = 0; for (int i = 0; i &lt; n; i++) &#123; bid = bucket(nums[i], n, min, max); // ç®—å‡ºæ¡¶å· mins[bid] = hasNum[bid] ? Math.min(mins[bid], nums[i]) : nums[i]; maxs[bid] = hasNum[bid] ? Math.max(maxs[bid], nums[i]) : nums[i]; hasNum[bid] = true; &#125; int res = 0; int lastMax = 0; int i = 0; while (i &lt;= n) &#123; if (hasNum[i++]) &#123; // æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸ç©ºçš„æ¡¶ lastMax = maxs[i - 1]; break; &#125; &#125; for (; i &lt;= n; i++) &#123; if (hasNum[i]) &#123; res = Math.max(res, mins[i] - lastMax); lastMax = maxs[i]; &#125; &#125; return res;&#125;public int bucket(long num, long len, long min, long max) &#123; return (int) ((num - min) * len / (max - min));&#125; è¯´æ˜ï¼š é¦–å…ˆéå†æ•°ç»„ï¼Œæ‰¾åˆ°æ•°ç»„çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼Œåœ¨æœ€å°å€¼å’Œæœ€å¤§å€¼èŒƒå›´ä¸Šç­‰é‡åœ°åˆ†æˆnä¸ªåŒºé—´ï¼ˆnä¸ºæ•´ä¸ªæ•°ç»„çš„é•¿åº¦ï¼‰ æ¯ä¸ªåŒºé—´åˆ†åˆ«å¯¹åº”ä¸€ä¸ªæ¡¶ï¼Œæ¯ä¸ªæ•°æ ¹æ®è‡ªå·±çš„å¯¹åº”åŒºé—´è¿›å…¥ç›¸åº”çš„æ¡¶ï¼Œå°†æœ€å¤§å€¼å•ç‹¬æ”¾åœ¨n+1å·æ¡¶ä¸­ï¼Œæ¡¶çš„æ•°é‡ä¸€å…±æœ‰n+1ä¸ªï¼Œè€Œæ•°ç»„å…ƒç´ åªæœ‰nä¸ªï¼Œæ‰€ä»¥åœ¨ä¸­é—´å¿…ç„¶ä¼šå‡ºç°ç©ºæ¡¶ æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çŸ¥é“ï¼Œåœ¨åŒä¸€ä¸ªæ¡¶ä¸­ç›¸é‚»å…ƒç´ çš„å·®å€¼ä¸ä¼šå¤§äºæ¡¶åŒºé—´ï¼Œè€Œæ¥è‡ªç©ºæ¡¶ä¸¤ä¾§çš„ç›¸é‚»æ•°çš„æœ€å¤§å·®å€¼è‚¯å®šå¤§äºæ¡¶åŒºé—´ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è€ƒè™‘æ¡¶é—´ç›¸é‚»æ•°çš„å·®å€¼ï¼Œä¹Ÿå°±æ˜¯åä¸€ä¸ªæ¡¶çš„æœ€å°å€¼å‡å»å‰ä¸€ä¸ªæ¡¶çš„æœ€å¤§å€¼ æ¥ä¸‹æ¥æˆ‘ä»¬åªéœ€è¦è€ƒè™‘æ¯ä¸€ä¸ªæ¡¶ä¸­çš„æœ€å°å€¼ä¸ä¸Šä¸€ä¸ªéç©ºæ¡¶çš„æœ€å¤§å€¼çš„å·®å€¼ï¼Œå¹¶è®°å½•ä¸‹å…¶ä¸­çš„æœ€å¤§å·®å€¼ï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªæ•°ç»„åœ¨æ’åºä¹‹åç›¸é‚»ä¸¤æ•°çš„æœ€å¤§å·®å€¼ã€‚ æ€»ç»“æ’åºç®—æ³•åˆ°è¿™é‡Œç®—æ˜¯å‘Šä¸€æ®µè½äº†ï¼Œæœ€åçš„æ’åºæ¡ˆä¾‹å¾ˆæ˜¯ç»å…¸ï¼Œæˆ‘ç¢°åˆ°è¿‡å¥½å‡ æ¬¡ï¼Œæ’åºç®—æ³•æ˜¯ç®—æ³•ä¸­é‡è¦çš„ä¸€éƒ¨åˆ†çŸ¥è¯†ç‚¹ï¼Œå¸Œæœ›è‡ªå·±ä»¥åèƒ½å¤Ÿå°†æ‰€æœ‰çš„æ’åºç®—æ³•è‡ªä¸»ç¼–ç¨‹å®ç°ï½ç»§ç»­åŠ æ²¹ï½]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³• æ’åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptè®¾è®¡æ¨¡å¼ä¹‹ç»“æ„å‹è®¾è®¡æ¨¡å¼]]></title>
    <url>%2F2018%2F02%2F06%2Fjs-structural-pattern%2F</url>
    <content type="text"><![CDATA[ç»§ä¸Šç¯‡åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ä¹‹åï¼Œæ­¤ç¯‡åšæ–‡ä¸»è¦è®°å½•ç»“æ„å‹è®¾è®¡æ¨¡å¼çš„å­¦ä¹ è¿‡ç¨‹ï¼Œå¦‚æœåœ¨æŸäº›åœ°æ–¹è¡¨è¿°ä¸æ­£ç¡®çš„ï¼Œè¿˜å¸Œæœ›å¤§å®¶èƒ½å¤ŸæŒ‡å‡ºï¼Œå…±åŒè¿›æ­¥ï½ ç»“æ„å‹è®¾è®¡æ¨¡å¼ç»“æ„å‹è®¾è®¡æ¨¡å¼æ˜¯ä¸€ç±»å…³æ³¨äºå¦‚ä½•å°†ç±»æˆ–å¯¹è±¡ç»„åˆæˆæ›´å¤§ã€æ›´å¤æ‚çš„ç»“æ„çš„è®¾è®¡æ¨¡å¼ï¼Œä¸»è¦åº”ç”¨äºå¯¹è±¡çš„ç»„åˆã€‚åŒ…æ‹¬å¤–è§‚æ¨¡å¼ã€é€‚é…å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼ã€è£…é¥°è€…æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ä»¥åŠäº«å…ƒæ¨¡å¼ã€‚ å¤–è§‚æ¨¡å¼å¤–è§‚æ¨¡å¼ï¼Œä¸ºä¸€ç»„å¤æ‚çš„å­ç³»ç»Ÿæ¥å£æä¾›ä¸€ä¸ªæ›´é«˜çº§çš„ç»Ÿä¸€æ¥å£ï¼Œé€šè¿‡è¿™ä¸ªæ¥å£ä½¿å¾—å¯¹å­ç³»ç»Ÿæ¥å£çš„è®¿é—®æ›´åŠ å®¹æ˜“ã€‚ å¤–è§‚æ¨¡å¼ç®€åŒ–åº•å±‚æ¥å£å¤æ‚æ€§ï¼Œæ¯”å¦‚å¯ä»¥ç”¨æ¥ç®€åŒ–æˆ‘ä»¬äº‹ä»¶çš„ç»‘å®š 1234567891011function addEvent(dom, type, fn)&#123; if(dom.addEventListener)&#123; dom.addEventListener(type, fn, false); &#125; else if(dom.attachEvent)&#123; dom.attachEvent('on' + type, fn); &#125; else&#123; dom['on' + type] = fn; &#125;&#125; å¯ä»¥å®ç°å°å‹ä»£ç åº“ï¼Œé€šè¿‡ä½¿ç”¨å¤–è§‚æ¨¡å¼æ¥å°è£…å¤šä¸ªåŠŸèƒ½ï¼Œç®€åŒ–åº•å±‚æ“ä½œæ–¹æ³•ã€‚ 12345678910111213141516171819var A = &#123; g: function(id)&#123; return document.getElementById(id); &#125;, css: function(id, key, value)&#123; document.getElementById(id).style[key] = value; &#125;, attr: function(id, key, value)&#123; document.getElementById(id)[key] = value; &#125;, html: function(id, html)&#123; document.getElementById(id).innerHTML = html; &#125;, on: function(id, type, fn)&#123; document.getElementById(id)['on' + type] = fn; &#125;&#125;// TestA.css('box', 'background', 'red'); å½“ä¸€ä¸ªå¤æ‚çš„ç³»ç»Ÿæä¾›ä¸€ç³»åˆ—å¤æ‚çš„æ¥å£æ–¹æ³•æ—¶ï¼Œä¸ºç³»ç»Ÿçš„ç®¡ç†æ–¹ä¾¿ä¼šé€ æˆæ¥å£æ–¹æ³•çš„ä½¿ç”¨æå…¶å¤æ‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨å¤–è§‚æ¨¡å¼å°è£…éšè—å…¶å¤æ‚æ€§ï¼Œå¹¶ç®€åŒ–å…¶ä½¿ç”¨ã€‚ é€‚é…å™¨æ¨¡å¼é€‚é…å™¨æ¨¡å¼ï¼Œå°†ä¸€ä¸ªç±»ï¼ˆå¯¹è±¡ï¼‰çš„æ¥å£ï¼ˆæ–¹æ³•æˆ–è€…å±æ€§ï¼‰è½¬åŒ–æˆå¦å¤–ä¸€ä¸ªæ¥å£ï¼Œä»¥æ»¡è¶³ç”¨æˆ·éœ€æ±‚ã€‚ é€‚é…å¼‚ç±»æ¡†æ¶ 1234567891011121314151617181920212223242526//å®šä¹‰æ¡†æ¶var A = A || &#123;&#125;;A.g = function(id)&#123; return document.getElementById(id);&#125;A.on = function(id, type, fn)&#123; var dom = typeof id === 'string'? this.g(id) : id; if(dom.addEventListener)&#123; dom.addEventListener(type, fn, false); &#125; else if(dom.attachEvent)&#123; dom.attachEvent('on' + type, fn); &#125; else&#123; dom['on' + type] = fn; &#125;&#125;//é€‚é…JQueryA.g = function(id)&#123; return $(id).get(0);&#125;A.on = function(id, type, fn)&#123; var dom = typeof id === 'string'? $('#' + id) : $(id); dom.on(type, fn);&#125; å‚æ•°é€‚é…å™¨ï¼Œç”¨é€‚é…å™¨æ¥é€‚é…ä¼ å…¥çš„å‚æ•°å¯¹è±¡ 1234567891011121314// é€‚é…å‚æ•°function doSomeThing(obj)&#123; var _adapter = &#123; name: 'qiuqiu', title: 'js', age: '20', color: 'pink', size: 100, prize: 50 &#125; for(var i in _adapter)&#123; _adapter[i] = obj[i] || _adapter[i]; &#125;&#125; æ•°æ®é€‚é…ï¼Œå°†æ•°ç»„è½¬æ¢ä¸ºå¯¹è±¡å½¢å¼ 123456789// æ•°æ®é€‚é…function arrToObjAdapter(arr)&#123; return &#123; name: arr[0], type: arr[1], title: arr[2], data: arr[3] &#125;&#125; åœ¨JavaSciptä¸­ï¼Œé€‚é…å™¨æ¨¡å¼ä¸ä»…ä»…å¯ä»¥é€‚é…ä¸¤ä¸ªç±»æ¥å£ä¸å…¼å®¹çš„é—®é¢˜ï¼Œè¿˜å¯ä»¥ç”¨äºé€‚é…ä¸¤ä¸ªä»£ç åº“ï¼Œé€‚é…å‰åç«¯æ•°æ®ç­‰ã€‚ ä»£ç†æ¨¡å¼ä»£ç†æ¨¡å¼ï¼Œç”±äºä¸€ä¸ªå¯¹è±¡ä¸èƒ½ç›´æ¥å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ä»£ç†å¯¹è±¡åœ¨è¿™ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸­ä»‹çš„ä½œç”¨ã€‚åœ¨JavaScriptä¸­ï¼Œä»£ç†æ¨¡å¼å¾€å¾€ç”¨äºè§£å†³è·¨åŸŸè¯·æ±‚é—®é¢˜ã€‚ è£…é¥°è€…æ¨¡å¼è£…é¥°è€…æ¨¡å¼ï¼Œåœ¨ä¸æ”¹å˜åŸå¯¹è±¡çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡å¯¹å…¶è¿›è¡ŒåŒ…è£…æ‹“å±•ï¼ˆæ·»åŠ å±æ€§æˆ–è€…æ–¹æ³•ï¼‰ä½¿åŸæœ‰å¯¹è±¡å¯ä»¥æ»¡è¶³ç”¨æˆ·çš„æ›´å¤æ‚éœ€æ±‚ã€‚1234567891011121314151617181920// è£…é¥°è€…æ¨¡å¼// è£…é¥°è€…var decorator = function(input, fn)&#123; var input = document.getElementById(input); if(typeof input.onclick === 'function')&#123; var oldClickFn = input.onclick; input.onclick = function()&#123; oldClickFn(); fn(); &#125; &#125; else&#123; input.onclick = fn; &#125;&#125;// Testdecorator('tel-input', function()&#123; document.getElementById('tel_demo_text').style.display = 'none';&#125;) é€‚é…å™¨æ–¹æ³•æ˜¯å¯¹åŸæœ‰å¯¹è±¡é€‚é…ï¼Œæ·»åŠ çš„æ–¹æ³•ä¸åŸæœ‰æ–¹æ³•åŠŸèƒ½å¤§è‡´ç›¸ä¼¼ï¼Œè£…é¥°è€…æ¨¡å¼æä¾›çš„æ–¹æ³•ä¸åŸæ¥çš„æ–¹æ³•åŠŸèƒ½æ˜¯æœ‰ä¸€å®šåŒºåˆ«çš„ï¼Œåœ¨è£…é¥°è€…æ¨¡å¼ä¸­ï¼Œä¸éœ€è¦äº†è§£å¯¹è±¡åŸæœ‰çš„åŠŸèƒ½å°±å¯ä»¥å¯¹åŠŸèƒ½è¿›è¡Œæ‹“å±•ã€‚è£…é¥°è€…æ¨¡å¼å¯¹å¯¹è±¡çš„æ‹“å±•æ˜¯ä¸€ç§è‰¯æ€§æ‹“å±•ï¼Œä¸ç”¨äº†è§£å…¶å…·ä½“å®ç°ï¼Œåªæ˜¯åœ¨å¤–éƒ¨è¿›è¡Œäº†ä¸€æ¬¡å°è£…ï¼Œè¿™åˆæ˜¯å¯¹åŸæœ‰åŠŸèƒ½å®Œæ•´æ€§çš„ä¸€ç§ä¿æŠ¤ã€‚ æ¡¥æ¥æ¨¡å¼æ¡¥æ¥æ¨¡å¼ï¼Œåœ¨ç³»ç»Ÿæ²¿ç€å¤šä¸ªç»´åº¦å˜åŒ–çš„åŒæ—¶ï¼Œåˆä¸å¢åŠ å…¶å¤æ‚åº¦å¹¶å·²è¾¾åˆ°è§£è€¦ã€‚å¤šç»´åº¦ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647// æ¡¥æ¥æ¨¡å¼// è¿åŠ¨å•å…ƒfunction Speed(x, y)&#123; this.x = x; this.y = y;&#125;Speed.prototype.run = function()&#123; console.log("è¿åŠ¨èµ·æ¥");&#125;// ç€è‰²å•å…ƒfunction Color(cl)&#123; this.color = cl;&#125;Color.prototype.draw = function()&#123; console.log("ç»˜åˆ¶è‰²å½©");&#125;// è¯´è¯å•å…ƒfunction Speak(wd)&#123; this.word = wd;&#125;Speak.prototype.say = function()&#123; console.log("ä¹¦å†™å­—ä½“");&#125;function Ball(x, y, c) &#123; this.speed = new Speed(x, y); this.color = new Color(c);&#125;Ball.prototype.init = function()&#123; this.speed.run(); this.color.draw();&#125;function People(x, y, f)&#123; this.speed = new Speed(x, y); this.speak = new Speak(f);&#125;People.prototype.init = function()&#123; this.speed.run(); this.speak.say();&#125;// Testvar ball = new Ball(2, 5, 'red');ball.init(); æ¡¥æ¥æ¨¡å¼å…ˆæŠ½è±¡æå–å…±ç”¨éƒ¨åˆ†ï¼Œç„¶åå°†å®ç°ä¸æŠ½è±¡é€šè¿‡æ¡¥æ¥æ–¹æ³•é“¾æ¥åœ¨ä¸€èµ·ï¼Œæ¥å®ç°è§£è€¦çš„ä½œç”¨ã€‚å¦‚æˆ‘ä»¬åˆ›å»ºå®ä½“Ballæ—¶ï¼Œå°†éœ€è¦çš„æ¯ä¸ªæŠ½è±¡åŠ¨ä½œå•å…ƒSpeedå’ŒColoré€šè¿‡æ¡¥æ¥ï¼Œé“¾æ¥åœ¨ä¸€èµ·è¿ä½œï¼Œè¿™æ ·å®ƒä»¬ä¹‹é—´ä¸ä¼šç›¸äº’å½±å“å¹¶ä¸”è¯¥æ–¹å¼é™ä½äº†å®ƒä»¬ä¹‹é—´çš„è€¦åˆã€‚æ¡¥æ¥æ¨¡å¼æœ€ä¸»è¦çš„ç‰¹ç‚¹æ˜¯å°†å®ç°å±‚ï¼ˆå¦‚å…ƒç´ ç»‘å®šçš„äº‹ä»¶ï¼‰ä¸æŠ½è±¡å±‚ï¼ˆå¦‚ä¿®é¥°é¡µé¢UIé€»è¾‘ï¼‰è§£è€¦åˆ†ç¦»ï¼Œä½¿ä¸¤éƒ¨åˆ†å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚ ç»„åˆæ¨¡å¼ç»„åˆæ¨¡å¼ï¼Œåˆç§°ä¸ºéƒ¨åˆ†-æ•´ä½“æ¨¡å¼ï¼Œå°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†æ•´ä½“â€çš„å±‚æ¬¡ç»“æ„ã€‚ä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138// ç»„åˆæ¨¡å¼// å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼šå¯„ç”Ÿå¼ç»§æ‰¿ï¼‹æ„é€ å‡½æ•°ç»§æ‰¿function inheritObject(o)&#123; // å£°æ˜ä¸€ä¸ªè¿‡æ¸¡å¯¹è±¡ function F()&#123;&#125;; // è¿‡æ¸¡å¯¹è±¡çš„åŸå‹ç»§æ‰¿çˆ¶å¯¹è±¡ F.prototype = o; // è¿”å›è¿‡æ¸¡å¯¹è±¡çš„å®ä¾‹ï¼Œè¯¥å®ä¾‹çš„åŸå‹ç»§æ‰¿äº†çˆ¶å¯¹è±¡ return new F();&#125;// å¤„ç†çš„ä¸æ˜¯å¯¹è±¡ï¼Œè€Œæ˜¯ç±»çš„åŸå‹function inheritPrototype(subClass, superClass)&#123; // å¤åˆ¶ä¸€ä»½çˆ¶ç±»çš„åŸå‹å‰¯æœ¬ä¿å­˜åœ¨å˜é‡ä¸­ var p = new inheritObject(superClass.prototype); // ä¿®æ­£å› ä¸ºé‡å†™å­ç±»ç±»å‹å¯¼è‡´å­ç±»çš„constructorå±æ€§è¢«ä¿®æ”¹ p.constructor = subClass; // è®¾ç½®å­ç±»çš„åŸå‹ subClass.prototype = p;&#125;// è™šæ‹Ÿçˆ¶ç±»var News = function ()&#123; this.children = []; this.element = null;&#125;News.prototype = &#123; init: function()&#123; throw new Error("è¯·é‡å†™ä½ çš„æ–¹æ³•"); &#125;, add: function()&#123; throw new Error("è¯·é‡å†™ä½ çš„æ–¹æ³•"); &#125;, getElement: function()&#123; throw new Error("è¯·é‡å†™ä½ çš„æ–¹æ³•"); &#125;&#125;// å®¹å™¨ç±»var Container = function(iid, parent)&#123; News.call(this); this.id = id; this.parent = parent; this.init();&#125;inheritPrototype(Container, News);Container.prototype.init = function()&#123; this.element = document.createElement('ul'); this.element.id = this.id; this.element.className = 'new-container';&#125;Container.prototype.add = function(child)&#123; this.children.push(child); // æ’å…¥å½“å‰ç»„ä»¶å…ƒç´ æ ‘ä¸­ this.element.appendChild(child.getElement()); return this;&#125;Container.prototype.getElement = function()&#123; return this.element;&#125;Container.prototype.show = function()&#123; this.parent.appendChild(this.element);&#125;var Item = function(classname)&#123; News.call(this); this.classname = classname || ''; this.init();&#125;inheritPrototype(Item, News);Item.prototype.init = function()&#123; this.element = document.createElement('li'); this.element.className = this.classname;&#125;Item.prototype.add = function(child)&#123; this.children.push(child); // æ’å…¥å½“å‰ç»„ä»¶å…ƒç´ æ ‘ä¸­ this.element.appendChild(child.getElement()); return this;&#125;Item.prototype.getElement = function()&#123; return this.element;&#125;// å¶å­èŠ‚ç‚¹ç±»var ImageNews = function (url, href, classname) &#123; News.call(this); this.url = url || ''; this.href = href || '#'; this.classname = classname || ''; this.init();&#125;inheritPrototype(ImageNews, News);ImageNews.prototype.init = function()&#123; this.element = document.createElement('a'); var img = new Image(); img.src = this.url; this.element.appendChild(img); this.element.className = 'image-news' + this.classname; this.element.href = this.href;&#125;ImageNews.prototype.add = function()&#123;&#125;ImageNews.prototype.getElement = function()&#123; return this.element;&#125;var IconNews = function (text, href, type) &#123; News.call(this); this.text = text || ''; this.href = href || '#'; this.type = type || 'video'; this.init();&#125;inheritPrototype(IconNews, News);IconNews.prototype.init = function()&#123; this.element = document.createElement('a'); this.element.innerHTML = this.text; this.element.className = 'icon' + this.type; this.element.href = this.href;&#125;IconNews.prototype.add = function()&#123;&#125;IconNews.prototype.getElement = function()&#123; return this.element;&#125;// Testvar news1 = new Container('news', document.body);news1.add( new Item('normal').add( new IconNews('lalala', '#', 'video') )).add( new Item('normal').add( new IconNews('aiaia', '#', 'live') )).add( new Item('normal').add( new ImageNews('img/test1.png', '#', 'small') )) ç»„åˆæ¨¡å¼çš„çº¦æŸè¦æ±‚æ˜¯æ¥å£çš„ç»Ÿä¸€ï¼Œä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è®©æ‰€æœ‰çš„æ–°é—»éƒ½ç»§æ‰¿äº†ä¸€ä¸ªæ–°é—»è™šæ‹Ÿçˆ¶ç±»Newsï¼Œå…¶ä¸­åœ¨è™šæ‹Ÿç±»çš„æ„é€ å‡½æ•°ä¸­å®šä¹‰äº†ä¸¤ä¸ªç‰¹æƒå˜é‡ï¼Œæ˜¯å› ä¸ºåé¢çš„æ‰€æœ‰ç»§æ‰¿å­ç±»éƒ½è¦å£°æ˜è¿™ä¸¤ä¸ªå˜é‡ï¼Œä¸ºäº†ç®€åŒ–å­ç±»æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†è¿™äº›å…±æœ‰çš„å˜é‡æå‰å£°æ˜åœ¨çˆ¶ç±»ä¸­ï¼Œç›¸å½“äºJavaè¯­è¨€ä¸­protectedå…³é”®å­—çš„ä½œç”¨ã€‚ç»„åˆæ¨¡å¼èƒ½å¤Ÿç»™æˆ‘ä»¬æä¾›ä¸€ä¸ªæ¸…æ™°çš„ç»„æˆç»“æ„ï¼Œç»„åˆå¯¹è±¡ç±»é€šè¿‡ç»§æ‰¿åŒä¸€ä¸ªçˆ¶ç±»ä½¿å…¶å…·æœ‰ç»Ÿä¸€çš„æ–¹æ³•ï¼Œè¿™æ ·ä¹Ÿæ–¹ä¾¿äº†æˆ‘ä»¬ç»Ÿä¸€ç®¡ç†ä¸ä½¿ç”¨ã€‚ äº«å…ƒæ¨¡å¼äº«å…ƒæ¨¡å¼ï¼Œè¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡çš„ç»†ç²’åº¦çš„å¯¹è±¡ï¼Œé¿å…å¯¹è±¡é—´æ‹¥æœ‰ç›¸åŒå†…å®¹é€ æˆå¤šä½™çš„å¼€é”€ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445// äº«å…ƒæ¨¡å¼// é€šç”¨äº«å…ƒç±»var FlyWeight = &#123; moveX: function(x)&#123; this.x = x; &#125;, moveY: function(y)&#123; this.y = y; &#125;&#125;var Player = function(x, y, c)&#123; this.x = x; this.y = y; this.c = c;&#125;Player.prototype = FlyWeight;Player.prototype.changeC = function(c)&#123; this.c = c;&#125;var Spirit = function(x, y, r)&#123; this.x = x; this.y = y; this.r = r;&#125;Spirit.prototype = FlyWeight;Spirit.prototype.changeR = function(r)&#123; this.r = r;&#125;// Testvar player = new Player(5, 6, 'red');console.log(player);player.moveX(6);player.moveY(8);player.changeC('green');console.log(player)var spirit = new Spirit(2, 3, 4);console.log(spirit);spirit.moveX(3);spirit.moveY(4);spirit.changeR(5);console.log(spirit) æˆ‘ä»¬å°†äººç‰©ç±»Playerä»¥åŠç²¾çµç±»Spiritä¸­çš„å†…éƒ¨æ–¹æ³•ï¼ˆç§»åŠ¨æ–¹æ³•ï¼‰æå–å‡ºæ¥ï¼Œå®ç°å…¬æœ‰ï¼Œå‡å°‘å…¶å®ƒç±»é‡å†™æ—¶é€ æˆçš„ä¸å¿…è¦çš„å¼€é”€ã€‚äº«å…ƒæ¨¡å¼ä¸»è¦æ˜¯å¯¹å…¶æ•°æ®ã€æ–¹æ³•å…±äº«åˆ†ç¦»ï¼Œå®ƒå°†æ•°æ®å’Œæ–¹æ³•åˆ†æˆå†…éƒ¨æ•°æ®ã€å†…éƒ¨æ–¹æ³•å’Œå¤–éƒ¨æ•°æ®ã€å¤–éƒ¨æ–¹æ³•ã€‚å†…éƒ¨æ–¹æ³•ä¸å†…éƒ¨æ•°æ®æŒ‡çš„æ˜¯ç›¸ä¼¼æˆ–è€…å…±æœ‰çš„æ•°æ®å’Œæ–¹æ³•ã€‚ æ€»ç»“JavaScriptè®¾è®¡æ¨¡å¼ä¹‹ç»“æ„å‹è®¾è®¡æ¨¡å¼åˆ°æ­¤ä¹Ÿå°±å‘Šä¸€æ®µè½äº†ï¼Œå› ä¸ºå…¶ä¸­æœ‰éƒ¨åˆ†è®¾è®¡æ¨¡å¼ä¹‹å‰å› ä¸ºæ—¶é—´ä¸è¶³æœªæ›¾æ·±å…¥å­¦ä¹ ï¼Œæ‰€ä»¥å¯èƒ½æœ‰äº›ç†è§£çš„ä¸å¤Ÿé€å½»ï¼Œå¦‚æœæœ‰å­˜åœ¨æè¿°ä¸å½“çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§å®¶æŒ‡å‡ºï½å…±åŒè¿›æ­¥ï½ ä¸‹ä¸€ç¯‡æˆ‘å°†è®°å½•JavaScriptè®¾è®¡æ¨¡å¼ä¸­è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼çš„å­¦ä¹ è¿‡ç¨‹ï½åŠ æ²¹åŠ æ²¹ï½]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScriptä¹‹è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptè®¾è®¡æ¨¡å¼ä¹‹åˆ›å»ºå‹è®¾è®¡æ¨¡å¼]]></title>
    <url>%2F2018%2F01%2F31%2Fjs-creational-pattern%2F</url>
    <content type="text"><![CDATA[è¿™æ®µæ—¶é—´æ²‰è¿·äºå­¦ä¹ JavaScriptçš„è®¾è®¡æ¨¡å¼ï¼Œäºæ˜¯æƒ³ç€ä¸ä¹‹å‰æ‰€å­¦çš„è®¾è®¡æ¨¡å¼è”ç³»èµ·æ¥ï¼Œå¯¹æ¯”å­¦ä¹ ã€‚å› ä¸ºä¹‹å‰æœ‰äº†Javaè®¾è®¡æ¨¡å¼çš„éƒ¨åˆ†åŸºç¡€ï¼Œæ‰€ä»¥åœ¨å­¦ä¹ JavaScriptè®¾è®¡æ¨¡å¼æ—¶ä¼šè¿›è¡Œä¸€äº›ç®€å•çš„æ¯”è¾ƒè®°å¿†ï¼Œä¸»è¦çš„å†…å®¹å®‰æ’æ˜¯æ¨¡å¼çš„å®šä¹‰ã€æ¨¡å¼å¯¹åº”çš„ç±»å›¾ä»¥åŠæ¨¡å¼çš„ç®€å•å®ç°ã€‚æ­¤ç¯‡åšæ–‡ä¸»è¦è®°å½•åˆ›å»ºå‹è®¾è®¡æ¨¡å¼çš„å­¦ä¹ è¿‡ç¨‹ï¼Œå¦‚æœåœ¨æŸäº›åœ°æ–¹è¡¨è¿°ä¸æ­£ç¡®çš„ï¼Œè¿˜å¸Œæœ›å¤§å®¶èƒ½å¤ŸæŒ‡å‡ºï¼Œå…±åŒè¿›æ­¥ï½ åˆ›å»ºå‹è®¾è®¡æ¨¡å¼åˆ›å»ºå‹è®¾è®¡æ¨¡å¼æ˜¯ä¸€ç±»å¤„ç†å¯¹è±¡åˆ›å»ºçš„è®¾è®¡æ¨¡å¼ï¼Œä¸»è¦åº”ç”¨äºåˆ›å»ºå¯¹è±¡ã€‚åŒ…æ‹¬ç®€å•å·¥å‚æ¨¡å¼ã€å·¥å‚æ–¹æ³•æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼ã€å»ºé€ è€…æ¨¡å¼ã€åŸå‹æ¨¡å¼ä»¥åŠå•ä¾‹æ¨¡å¼ã€‚ ç®€å•å·¥å‚æ¨¡å¼ç®€å•å·¥å‚æ¨¡å¼ï¼Œåˆå«é™æ€å·¥å‚æ–¹æ³•ï¼Œç”±ä¸€ä¸ªå·¥å‚å¯¹è±¡å†³å®šåˆ›å»ºæŸä¸€ç§äº§å“å¯¹è±¡ç±»çš„å®ä¾‹ã€‚ Javaè¯­è¨€ç®€å•å·¥å‚æ¨¡å¼çš„ç±»å›¾è¡¨è¾¾ä¸ºï¼šæˆ‘ä»¬å¯ä»¥ä»¿ç…§Javaè¯­è¨€çš„ç±»å›¾ç»˜åˆ¶ç±»å›¾ä¸ºï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970// ç®€å•å·¥å‚æ¨¡å¼var Ball = function()&#123;&#125;Ball.prototype = &#123; getMember: function()&#123; throw new Error("æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨") &#125;, getBallSize: function()&#123; console.log("æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨"); &#125;&#125;var Basketball = function()&#123; this.intro = "ç¯®çƒç››è¡Œäºç¾å›½";&#125;Basketball.prototype = new Ball();Basketball.prototype = &#123; getMember: function()&#123; console.log("æ¯ä¸ªé˜Ÿä¼éœ€è¦5åé˜Ÿå‘˜"); &#125;, getBallSize: function()&#123; console.log("ç¯®çƒå¾ˆå¤§"); &#125;&#125;var Football = function()&#123; this.intro = "è¶³çƒåœ¨ä¸–ç•ŒèŒƒå›´å†…æµè¡Œ";&#125;Football.prototype = new Ball();Football.prototype = &#123; getMember: function()&#123; console.log("æ¯ä¸ªé˜Ÿä¼éœ€è¦11åé˜Ÿå‘˜"); &#125;, getBallSize: function()&#123; console.log("è¶³çƒå¾ˆå¤§"); &#125;&#125;var Tennis = function()&#123; this.intro = "æ¯å¹´æœ‰å¾ˆå¤šç½‘çƒç³»åˆ—èµ›";&#125;Tennis.prototype = new Ball();Tennis.prototype = &#123; getMember: function()&#123; console.log("æ¯ä¸ªé˜Ÿä¼éœ€è¦1åé˜Ÿå‘˜"); &#125;, getBallSize: function()&#123; console.log("ç½‘çƒå¾ˆå°"); &#125;&#125;// è¿åŠ¨å·¥å‚var SportsFactory = function()&#123;&#125;SportsFactory.prototype = &#123; getSport: function(name)&#123; switch(name)&#123; case 'NBA': return new Basketball(); case 'wordCup': return new Football(); case 'FrenchOpen': return new Tennis(); &#125; &#125;&#125;// Testvar factory = new SportsFactory();var footnall = factory.getSport("wordCup");console.log(footnall);console.log(footnall.intro);footnall.getMember(); ç®€å•å·¥å‚æ¨¡å¼æœ€ä¸»è¦çš„æ˜¯æ‰€åˆ›å»ºçš„å·¥å‚å¯¹è±¡SportsFactoryï¼Œå·¥å‚å‡½æ•°getSport()æ ¹æ®ä¼ å…¥å‚æ•°çš„ä¸åŒè¿”å›ä¸åŒç±»çš„å®ä¾‹ã€‚åœ¨æ­¤ä¾‹ä¸­Footballã€Basketballã€Tenniséƒ½ç»§æ‰¿äº†æŠ½è±¡ç±»Ballï¼ŒBallä¸­å®šä¹‰äº†ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•getMember()å’ŒgetBallSize()ï¼Œåœ¨å…·ä½“ç±»ä¸­é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œè‹¥å­ç±»ä¸ºé‡å†™çˆ¶ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼š å½“ç„¶å› ä¸ºJavaScriptçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä¸éœ€è¦Ballç±»ï¼Œåœ¨Javaè¯­è¨€ä¸­å¼•å…¥æŠ½è±¡ç±»ï¼Œä¸»è¦æ˜¯åœ¨å®¢æˆ·ç«¯ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨çˆ¶ç±»å¯¹è±¡æ¥æ›¿ä»£å…·ä½“çš„å­ç±»å¯¹è±¡ï¼ˆé‡Œæ°ä»£æ¢åŸåˆ™ï¼‰ï¼Œå¦‚ï¼š12Ball ball; ball = factory.getSport("wordCup"); åœ¨JavaScriptè¯­è¨€ä¸­ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡æ¥ä»£æ›¿å¤šä¸ªç±»123456789101112131415161718192021222324252627// å¯„ç”Ÿæ–¹å¼// ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ä»£æ›¿å¤šä¸ªç±»ï¼Œæå–ç›¸ä¼¼function createSports(type, intro, member, size)&#123; var o = new Object(); o.intro = intro; if(type == 'football')&#123; console.log("foolball") &#125; else if(type == 'basketball')&#123; console.log("basketball") &#125; else if(type == 'tennis')&#123; console.log("tennis") &#125; o.getMember = function()&#123; console.log(member); &#125; o.getBallSize = function()&#123; console.log(size); &#125; return o;&#125;// Testvar basketball = createSports("basketball", "This is a Basketball", "5", "big");console.log(basketball);console.log(basketball.intro);basketball.getMember(); è¿™ç§æ–¹å¼å°†ç›¸ä¼¼çš„éƒ¨åˆ†æå‡ºï¼Œä¸ç›¸ä¼¼çš„éƒ¨åˆ†è¿›è¡Œé’ˆå¯¹æ€§çš„å¤„ç†ã€‚ è¿™ä¸¤ç§æ–¹å¼å­˜åœ¨ä¸€å®šçš„å·®å¼‚ï¼Œç¬¬ä¸€ç§æ–¹å¼æ˜¯é€šè¿‡ç±»å®ä¾‹åŒ–å¯¹è±¡åˆ›å»ºçš„ï¼Œç¬¬äºŒç§æ–¹å¼æ˜¯é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ç„¶ååŒ…è£…å¢å¼ºå…¶å±æ€§å’ŒåŠŸèƒ½æ¥å®ç°çš„ã€‚é€‰æ‹©å“ªç§å·¥å‚æ–¹å¼æ¥å®ç°ä½ çš„éœ€æ±‚è¿˜è¦çœ‹ä½ æ˜¯å¦‚ä½•åˆ†æä½ çš„éœ€æ±‚çš„ã€‚ å·¥å‚æ–¹æ³•æ¨¡å¼å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œé€šè¿‡å¯¹äº§å“ç±»çš„æŠ½è±¡ä½¿å…¶åˆ›å»ºä¸šåŠ¡ä¸»è¦è´Ÿè´£ç”¨äºåˆ›å»ºå¤šç±»äº§å“çš„å®ä¾‹ã€‚Javaè¯­è¨€å·¥å‚æ–¹æ³•æ¨¡å¼ç±»å›¾è¡¨ç¤ºä¸ºï¼šå·¥å‚æ–¹æ³•æ¨¡å¼è®©å­ç±»å†³å®šå°†å“ªä¸€ç§äº§å“å®ä¾‹åŒ–ï¼Œè®©ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å…¶å­ç±»ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455// å·¥å‚æ–¹æ³•æ¨¡å¼// ä½¿ç”¨å®‰å…¨æ¨¡å¼åˆ›å»ºå·¥å‚ç±»var Factory = function(type, content)&#123; if(this instanceof Factory)&#123; var s = new this[type](content); return s; &#125; else&#123; return new Factory(type, content); &#125;&#125;// å·¥å‚åŸå‹ä¸­è®¾ç½®åˆ›å»ºæ‰€æœ‰ç±»å‹æ•°æ®å¯¹è±¡çš„åŸºç±»Factory.prototype = &#123; Java: function(content)&#123; // å…·ä½“åˆ›å»ºäº§å“çš„è¿‡ç¨‹ console.log(content); &#125;, JavaScript: function(content)&#123; console.log(content); &#125;, UI: function(content)&#123; console.log(content); &#125;, PHP: function(content)&#123; console.log(content); &#125;&#125;// Testvar data = [ &#123; type: 'JavaScript', content: 'javascript' &#125;, &#123; type: 'Java', content: 'java' &#125;, &#123; type: 'UI', content: 'UI' &#125;, &#123; type: 'PHP', content: 'PHP' &#125;, &#123; type: 'JavaScript', content: 'other javascript' &#125;]for(var d of data)&#123; Factory(d.type, d.content)&#125; åœ¨å®ç°å·¥å‚æ–¹æ³•æ¨¡å¼æ—¶ï¼Œé‡‡ç”¨äº†å®‰å…¨æ¨¡å¼åˆ›å»ºå·¥å‚ç±»ï¼Œå®‰å…¨æ¨¡å¼å¯ä»¥é¿å…ç”¨æˆ·ä½¿ç”¨ç±»æ—¶ç¼ºå°‘newå…³é”®è¯è€Œå¯¼è‡´çš„é”™è¯¯ã€‚JavaScriptä¸­ä½¿ç”¨å®‰å…¨æ¨¡å¼åˆ›å»ºå·¥å‚ç±»ï¼Œåœ¨å·¥å‚åŸå‹ä¸­åˆ›å»ºæ‰€æœ‰ç±»å‹æ•°æ®å¯¹è±¡çš„åŸºç±»ï¼Œé€šè¿‡ä½¿ç”¨æ—¶å‘å·¥å‚ç±»ä¼ é€’æ•°æ®ç±»å‹å’Œæ•°æ®å†…å®¹ä¸¤ä¸ªå‚æ•°ï¼Œæ¥åŠ¨æ€çš„å®ä¾‹åŒ–ç›¸åº”çš„äº§å“ç±»ã€‚ä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼å¯ä»¥é¿å…ä½¿ç”¨è€…å’Œå¯¹è±¡ç±»ä¹‹é—´çš„è€¦åˆã€‚ æŠ½è±¡å·¥å‚æ¨¡å¼æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œé€šè¿‡å¯¹ç±»çš„å·¥å‚æŠ½è±¡ä½¿å…¶ä¸šåŠ¡ç”¨äºå¯¹äº§å“ç±»ç°‡çš„åˆ›å»ºï¼Œè€Œä¸è´Ÿè´£åˆ›å»ºæŸä¸€ç±»äº§å“çš„å®ä¾‹ã€‚JavaScriptè¯­è¨€è™½ç„¶ä¿ç•™abstractå…³é”®å­—ï¼Œä½†ç›®å‰æ¥è¯´è¿˜ä¸èƒ½åƒJavaè¯­è¨€é‚£æ ·è½»æ¾åœ°åˆ›å»ºã€‚æˆ‘ä»¬å¯ä»¥åœ¨ç±»çš„æ–¹æ³•ä¸­æ‰‹åŠ¨åœ°æŠ›å‡ºé”™è¯¯æ¥æ¨¡æ‹ŸæŠ½è±¡ç±»ã€‚æŠ½è±¡å·¥å‚æ¨¡å¼æ¶‰åŠçš„å¯¹è±¡æ¯”è¾ƒå¤šï¼Œä½¿ç”¨UMLç±»å›¾å¯ä»¥è¡¨ç¤ºä¸ºï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134// æŠ½è±¡å·¥å‚æ¨¡å¼var Vehicle = function(subType, superType)&#123; // åˆ¤æ–­æŠ½è±¡äº§å“ç±»ä¸­æ˜¯å¦æœ‰è¯¥æŠ½è±¡ç±» if(typeof Vehicle[superType] === 'function')&#123; function F()&#123;&#125;; // ç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³• F.prototype = new Vehicle[superType](); // å°†å­ç±»constructorå±æ€§æŒ‡å‘å­ç±» subType.constructor = subType; // å­ç±»åŸå‹ç»§æ‰¿çˆ¶ç±» subType.prototype = new F(); &#125; else&#123; throw new Error("æœªåˆ›å»ºè¯¥æŠ½è±¡ç±»") &#125;&#125;// å°æ±½è½¦æŠ½è±¡ç±»Vehicle.Car = function()&#123; this.type = 'car';&#125;Vehicle.Car.prototype = &#123; getPrice: function()&#123; return new Error("æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨") &#125;&#125;// å…¬å…±æ±½è½¦æŠ½è±¡ç±»Vehicle.Bus = function()&#123; this.type = 'bus';&#125;Vehicle.Bus.prototype = &#123; getPrice: function()&#123; return new Error("æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨") &#125;&#125;// æ±½è½¦å…·ä½“ç±»â€”â€”å®é©¬æ±½è½¦var BMWCar = function(price)&#123; this.price = price;&#125;Vehicle(BMWCar, 'Car');BMWCar.prototype.getPrice = function()&#123; return this.price;&#125;// æ±½è½¦å…·ä½“ç±»â€”â€”å…°åšåŸºå°¼æ±½è½¦var LamborghiniCar = function(price)&#123; this.price = price;&#125;Vehicle(LamborghiniCar, 'Car');LamborghiniCar.prototype.getPrice = function()&#123; return this.price;&#125;// å…¬å…±æ±½è½¦å…·ä½“ç±»â€”â€”å®é©¬å…¬å…±æ±½è½¦var BMWBus = function(price)&#123; this.price = price;&#125;Vehicle(BMWBus, 'Bus');BMWBus.prototype.getPrice = function()&#123; return this.price;&#125;// å…¬å…±æ±½è½¦å…·ä½“ç±»â€”â€”å…°åšåŸºå°¼å…¬å…±æ±½è½¦var LamborghiniBus = function(price)&#123; this.price = price;&#125;Vehicle(LamborghiniBus, 'Bus');LamborghiniBus.prototype.getPrice = function()&#123; return this.price;&#125;// æŠ½è±¡å·¥å‚var VehicleFactory = function(subType, superType)&#123; // åˆ¤æ–­æŠ½è±¡å·¥å‚ä¸­æ˜¯å¦æœ‰è¯¥æŠ½è±¡ç±» if(typeof VehicleFactory[superType] === 'function')&#123; function F()&#123;&#125;; // ç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³• F.prototype = new VehicleFactory[superType](); // å°†å­ç±»constructorå±æ€§æŒ‡å‘å­ç±» subType.constructor = subType; // å­ç±»åŸå‹ç»§æ‰¿çˆ¶ç±» subType.prototype = new F(); &#125; else&#123; throw new Error("æœªåˆ›å»ºè¯¥æŠ½è±¡ç±»") &#125;&#125;// å®é©¬å·¥å‚VehicleFactory.BMW = function(type)&#123; this.factory = 'å®é©¬'&#125;VehicleFactory.BMW.prototype = &#123; create: function(type)&#123; return new Error("æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨") &#125;&#125;// å…°åšåŸºå°¼å·¥å‚VehicleFactory.Lamborghini = function(type)&#123; this.factory = 'å…°åšåŸºå°¼'&#125;VehicleFactory.Lamborghini.prototype = &#123; create: function(type)&#123; return new Error("æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨") &#125;&#125;// å…·ä½“å·¥å‚â€”â€”å®é©¬å·¥å‚var BMWFactory = function()&#123;&#125;VehicleFactory(BMWFactory, 'BMW');BMWFactory.prototype = &#123; create: function(type)&#123; console.log("å®é©¬å·¥å‚ç”Ÿäº§" + type) &#125;&#125;// å…·ä½“å·¥å‚â€”â€”å…°åšåŸºå°¼å·¥å‚var LamborghiniFactory = function()&#123;&#125;VehicleFactory(LamborghiniFactory, 'Lamborghini');LamborghiniFactory.prototype = &#123; create: function(type)&#123; console.log("å…°åšåŸºå°¼å·¥å‚ç”Ÿäº§" + type) &#125;&#125;// Testvar testCar = new BMWCar(10000);var testBus = new BMWBus(100);var testBMW = new BMWFactory();testBMW.create(testCar.type);testBMW.create(testBus.type) é¦–å…ˆå®šä¹‰äº†æŠ½è±¡æ±½è½¦ç±»Carå’ŒæŠ½è±¡å…¬å…±æ±½è½¦ç±»Busï¼Œåˆ›å»ºäº†CaræŠ½è±¡æ±½è½¦çš„å…·ä½“äº§å“æ±½è½¦å­ç±»å®é©¬æ±½è½¦å­ç±»BMWCarå’Œå…°åšåŸºå°¼æ±½è½¦å­ç±»LamborghiniCarï¼ŒBusæŠ½è±¡å…¬å…±æ±½è½¦çš„å…·ä½“äº§å“å…¬å…±æ±½è½¦å­ç±»å®é©¬å…¬å…±æ±½è½¦å­ç±»BMWBuså’Œå…°åšåŸºå°¼å…¬å…±æ±½è½¦å­ç±»LamborghiniBusï¼Œç„¶åå®šä¹‰äº†æŠ½è±¡å·¥å‚ç±»VehicleFactoryï¼Œåˆ›å»ºäº†å…·ä½“å·¥å‚å­ç±»å®é©¬å·¥å‚BMWFactoryå’Œå…°åšåŸºå°¼å·¥å‚VehicleFactoryã€‚ä¸€ä¸ªå·¥å‚è´Ÿè´£åˆ›å»ºä¸€ä¸ªäº§å“æ—ä¸­çš„äº§å“ï¼ŒBMWCarå’ŒLamborghiniCaråŒå±äºCarçš„äº§å“ç­‰çº§ç»“æ„ä¸­ï¼Œä¸€ä¸ªå·¥å‚ç­‰çº§ç»“æ„å¯ä»¥åˆ›å»ºå‡ºåˆ†å±äºä¸åŒäº§å“ç­‰çº§ç»“æ„çš„ä¸€ä¸ªäº§å“æ—ä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œ å»ºé€ è€…æ¨¡å¼å»ºé€ è€…æ¨¡å¼ï¼Œå°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºå±‚ä¸å…¶è¡¨ç¤ºå±‚ç›¸äº’åˆ†ç¦»ï¼ŒåŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯é‡‡ç”¨ä¸åŒçš„è¡¨ç¤ºã€‚å»ºé€ è€…æ¨¡å¼å…³æ³¨çš„æ˜¯å¯¹è±¡åˆ›å»ºçš„ç»†èŠ‚ï¼Œä½¿ç”¨UMLç±»å›¾è¡¨ç¤ºç±»ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879// å»ºé€ è€…æ¨¡å¼â€”â€”å…³å¿ƒå¯¹è±¡åˆ›å»ºçš„æ•´ä¸ªè¿‡ç¨‹// åº”è˜è€…ç±»var Human = function(param)&#123; this.skill = param &amp;&amp; param.skill || 'ä¿å¯†'; this.hobby = param &amp;&amp; param.hobby || 'ä¿å¯†';&#125;Human.prototype = &#123; getSkill: function()&#123; return this.skill; &#125;, getHobby: function()&#123; return this.hobby; &#125;&#125;// å®ä¾‹åŒ–å§“åç±»var Named = function(name)&#123; var that = this; (function(name, that)&#123; that.wholeName = name; if(name.indexOf(' ' &gt; -1))&#123; that.firstName = name.slice(0, name.indexOf(' ')); that.secondName = name.slice(name.indexOf(' ') + 1); &#125; &#125;)(name, that);&#125;// å®ä¾‹åŒ–èŒä½ç±»var Work = function(work)&#123; var that = this; (function(work, that)&#123; switch(work)&#123; case 'code': that.work = 'å·¥ç¨‹å¸ˆ'; that.workDescript = 'æ¯å¤©æ²‰é†‰äºç¼–ç¨‹'; break; case 'UE': that.work = 'è®¾è®¡å¸ˆ'; that.workDescript = 'è®¾è®¡æ›´ä¼¼ä¸€ç§è‰ºæœ¯'; break; case 'teach': that.work = 'æ•™å¸ˆ'; that.workDescript = 'åˆ†äº«ä¹Ÿæ˜¯ä¸€ç§å¿«ä¹'; break; default: that.work = work; that.workDescript = 'not know'; break; &#125; &#125;)(work, that);&#125;Work.prototype = &#123; changeWork: function(work)&#123; this.work = work; &#125;, changeDescript: function(setence)&#123; this.workDescript = setence; &#125;&#125;// åº”è˜è€…å»ºé€ è€…var Person = function(name, work)&#123; var _person = new Human(); _person.name = new Named(name); _person.work = new Work(work); return _person;&#125;// Testvar person = new Person('xiao ming', 'code');console.log(person.skill);console.log(person.name.firstName);console.log(person.name.secondName);console.log(person.work.work);console.log(person.work.workDescript);person.work.changeDescript('æ›´æ”¹èŒä½æè¿°ï¼');console.log(person.work.workDescript); åœ¨äº‹ä¾‹ä»£ç ä¸­åº”è˜è€…Humanç±»å……å½“UMLç±»å›¾ä¸­çš„Productç±»ï¼Œåº”è˜è€…å»ºé€ è€…Personç±»å……å½“UMLç±»å›¾ä¸­çš„ConcreteBUilderç±»ï¼Œæµ‹è¯•ä»£ç éƒ¨åˆ†å¯ä»¥çœ‹ä½œæ˜¯UMLç±»å›¾ä¸­çš„Directorç±»ï¼Œå®ä¾‹åŒ–èŒä½ç±»Workå’Œå®ä¾‹åŒ–å§“åç±»Namedæ˜¯Humançš„åˆ›å»ºè¿‡ç¨‹ã€‚å»ºé€ è€…æ¨¡å¼å¯ä»¥çœ‹ä½œæ˜¯ä¸ºä¸€ä¸ªå¯¹è±¡æ·»åŠ æ–°çš„ä¿¡æ¯åè¿”å›æ–°å¯¹è±¡çš„è¿‡ç¨‹ã€‚ åŸå‹æ¨¡å¼åŸå‹æ¨¡å¼ï¼Œç”¨åŸå‹å®ä¾‹æŒ‡å‘åˆ›å»ºå¯¹è±¡çš„ç±»ï¼Œä½¿ç”¨äºåˆ›å»ºæ–°çš„å¯¹è±¡çš„ç±»å…±äº«åŸå‹å¯¹è±¡çš„å±æ€§ä»¥åŠæ–¹æ³•ã€‚åŸå‹æ¨¡å¼åœ¨äºé€šè¿‡å¤åˆ¶è¿™ä¸ªåŸå‹æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œå¯ä»¥å¤åˆ¶åŸå‹å¯¹è±¡çš„å±æ€§åŠæ–¹æ³•æ¥åˆ›å»ºã€‚ä¸‹ä¾‹ä»£ç å®ç°äº†ä½¿ç”¨åŸå‹æ¨¡å¼æ¥å¤åˆ¶å¤šä¸ªåŸå‹å¯¹è±¡æ¥å¯¹æ–°å¯¹è±¡çš„åˆ›å»º1234567891011121314151617181920212223242526272829303132333435363738// å¯¹è±¡å¤åˆ¶æ–¹æ³•function prototypeExtend()&#123; var F = function()&#123;&#125;, args = arguments, len = args.length, i = 0; for(; i &lt; len; i++)&#123; // éå†æ¯ä¸ªæ¨¡ç‰ˆå¯¹è±¡ä¸­çš„å±æ€§ for(var j in args[i])&#123; // å°†å±æ€§å¤åˆ¶åˆ°ç¼“å­˜ç±»åŸå‹ä¸­ F.prototype[j] = args[i][j]; &#125; &#125; return new F();&#125;// Testvar penguin = prototypeExtend( &#123; speed: 20, swim: function()&#123; console.log("æ¸¸æ³³é€Ÿåº¦ï¼š" + this.speed); &#125; &#125;, &#123; run: function()&#123; console.log("å¥”è·‘é€Ÿåº¦ï¼š" + this.speed); &#125; &#125;, &#123; jump: function()&#123; console.log("è·³è·ƒåŠ¨ä½œ"); &#125; &#125;)penguin.swim();penguin.run(10);penguin.jump(); å•ä¾‹æ¨¡å¼å•ä¾‹æ¨¡å¼ï¼Œåˆç§°ä¸ºå•ä½“æ¨¡å¼ï¼Œæ˜¯åªå…è®¸å®ä¾‹åŒ–ä¸€æ¬¡çš„å¯¹è±¡ç±»ã€‚ ç”¨é€”ä¸€ï¼š å®šä¹‰å‘½åç©ºé—´ï¼Œä¸‹ä¾‹ä»£ç ä¸­Qiuå³ä¸ºå‘½åç©ºé—´ï¼Œä½¿ç”¨å…¶ä¸­æ–¹æ³•æ—¶éœ€Qiu.xx() 123456789// å•ä¾‹æ¨¡å¼var Qiu = &#123; g: function(id)&#123; return document.getElementById(id); &#125;, css: function(id, key, value)&#123; this.g(id).style[key] = value; &#125;&#125; ç”¨é€”äºŒï¼š ç®¡ç†é™æ€å˜é‡â€”â€”åªèƒ½è®¿é—®ä¸èƒ½ä¿®æ”¹ 12345678910111213141516var Conf = (function()&#123; // ç§æœ‰å˜é‡ var conf = &#123; MAX_NUM: 100, MIN_NUM: 1, COUNT: 1000 &#125; // è¿”å›å–å€¼å™¨å¯¹è±¡ return &#123; get: function(name)&#123; return conf[name]? conf[name]: null; &#125; &#125;&#125;)();var count = Conf.get('COUNT');console.log(count); ç”¨é€”ä¸‰ï¼š æƒ°æ€§å•ä¾‹12345678910111213141516171819// æƒ°æ€§å•ä¾‹var LazySingle = (function()&#123; var _instance = null; function Single()&#123; // å®šä¹‰ç§æœ‰å±æ€§å’Œæ–¹æ³• return &#123; publicMethod: function()&#123;&#125;, publicProperty: '1.0' &#125; &#125; // è·å–å•ä¾‹å¯¹è±¡æ¥å£ return function()&#123; if(!_instance)&#123; _instance = Single(); &#125; return _instance; &#125;&#125;)();console.log(LazySingle().publicProperty); æ€»ç»“JavaScriptè®¾è®¡æ¨¡å¼ä¹‹åˆ›å»ºå‹è®¾è®¡æ¨¡å¼åˆ°æ­¤ä¹Ÿå°±å‘Šä¸€æ®µè½äº†ï¼Œå› ä¸ºå…¶ä¸­æœ‰éƒ¨åˆ†è®¾è®¡æ¨¡å¼ä¹‹å‰å› ä¸ºæ—¶é—´ä¸è¶³æœªæ›¾æ·±å…¥å­¦ä¹ ï¼Œæ‰€ä»¥å¯èƒ½æœ‰äº›ç†è§£çš„ä¸å¤Ÿé€å½»ï¼Œå¦‚æœæœ‰å­˜åœ¨æè¿°ä¸å½“çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§å®¶æŒ‡å‡ºï½å…±åŒè¿›æ­¥ï½ ä¸‹ä¸€ç¯‡æˆ‘å°†è®°å½•JavaScriptè®¾è®¡æ¨¡å¼ä¸­ç»“æ„å‹è®¾è®¡æ¨¡å¼çš„å­¦ä¹ è¿‡ç¨‹ï½åŠ æ²¹åŠ æ²¹ï½]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScriptä¹‹è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptä¹‹ç»§æ‰¿]]></title>
    <url>%2F2018%2F01%2F30%2Fjs-herit%2F</url>
    <content type="text"><![CDATA[è¿™æ®µæ—¶é—´ä¸»è¦å­¦ä¹ äº†JavaScriptçš„çŸ¥è¯†ï¼Œä¸å¾—ä¸æ„Ÿæ…¨jsè¯­è¨€çš„å¼ºå¤§ä¸çµæ´»ã€‚æ­¤æ¬¡ä¸»è¦æ˜¯å¯¹JavaScriptä¸­çš„ç»§æ‰¿è¿›è¡Œå­¦ä¹ è®°å½•ä¸æ€»ç»“ï¼Œä½†å…ä¸äº†æ¶‰åŠåˆ°é¢å‘å¯¹è±¡ç¼–ç¨‹ã€å°è£…ä»¥åŠå¤šæ€çš„ç›¸åº”çŸ¥è¯†ã€‚æ¥ä¸‹æ¥æˆ‘å°†å…ˆä»‹ç»ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä»¥åŠä¸ºä»€ä¹ˆè¦é‡‡ç”¨é¢å‘å¯¹è±¡æ¥è¿›è¡Œç¼–ç¨‹ï¼Œæ¥ç€ä»‹ç»ä¸€ä¸‹é¢å‘å¯¹è±¡ä¸­çš„é‡è¦ç‰¹æ€§â€”â€”å°è£…ï¼Œç„¶åä»‹ç»jså®ç°ç»§æ‰¿çš„å…­ç§æ–¹æ³•ï¼Œæœ€åç®€å•ä»‹ç»ä¸€ä¸‹jså®ç°å¤šæ€çš„æ–¹å¼ã€‚æ­¤ç¯‡åšæ–‡ä¸»è¦ç›®çš„æ˜¯æƒ³å°†æ­¤æ¬¡çš„å­¦ä¹ è¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œä»¥ä¾¿è¿›è¡Œåç»­çš„æ·±å…¥å­¦ä¹ ï¼Œå¦‚æœåœ¨ç†è§£ä¸Šæœ‰åå·®çš„è¯ï¼Œè¿˜è¯·å¤§å®¶ä¸åèµæ•™ï½ é¢å‘å¯¹è±¡ç¼–ç¨‹ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹é¢å‘å¯¹è±¡ç¼–ç¨‹é€šä¿—æ¥è¯´ï¼Œå°±æ˜¯å°†ä½ çš„éœ€æ±‚æŠ½è±¡æˆä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åé’ˆå¯¹è¿™ä¸ªå¯¹è±¡åˆ†æå…¶ç‰¹å¾ï¼ˆå±æ€§ï¼‰å’ŒåŠ¨ä½œï¼ˆæ–¹æ³•ï¼‰ã€‚ åœ¨Javaè¯­è¨€ä¸­é€šè¿‡classå…³é”®å­—å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å£°æ˜ä¸€ä¸ªå¯¹è±¡ï¼Œä½†åœ¨JavaScriptè¯­è¨€ä¸­å› ä¸ºæ²¡æœ‰é€šè¿‡classå®ç°ç±»å°è£…çš„æ–¹æ³•ï¼Œæ‰€ä»¥é€šå¸¸æ˜¯é€šè¿‡ä¸€äº›ç‰¹æ€§æ¨¡ä»¿å®ç°çš„ï¼Œä½†è¿™ä¹Ÿå¸¦æ¥äº†æé«˜çš„çµæ´»æ€§ï¼Œä½¿æˆ‘ä»¬ç¼–å†™çš„ä»£ç æ›´è‡ªç”±ã€‚ ä¸ºä»€ä¹ˆè¦å¼•å…¥é¢å‘å¯¹è±¡çš„æ€æƒ³ç”±äºé¢å‘å¯¹è±¡æœ‰å°è£…ã€ç»§æ‰¿ã€å¤šæ€æ€§çš„ç‰¹æ€§ï¼Œå¯ä»¥è®¾è®¡å‡ºä½è€¦åˆçš„ç³»ç»Ÿï¼Œä½¿ç³»ç»Ÿæ›´åŠ çµæ´»ã€æ›´åŠ æ˜“äºç»´æŠ¤ï¼Œä»£ç å¤ç”¨æ€§å¼ºï¼Œèƒ½å¤Ÿåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¿ƒè¿›å›¢é˜Ÿçš„ååŒåˆä½œã€‚ å‰ç½®è¦ç‚¹åœ¨JavaScriptä¸­åˆ›å»ºä¸€ä¸ªç±»å¾ˆå®¹æ˜“ï¼Œé¦–å…ˆå£°æ˜ä¸€ä¸ªå‡½æ•°ä¿å­˜åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼Œç„¶ååœ¨å‡½æ•°ï¼ˆç±»ï¼‰çš„å†…éƒ¨é€šè¿‡å¯¹thiså˜é‡æ·»åŠ å±æ€§æˆ–è€…æ–¹æ³•æ¥å®ç°å¯¹ç±»æ·»åŠ å±æ€§æˆ–è€…æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š12345var Book = function(id, bookName, price)&#123; this.id = id; this.bookName = bookName; this.price = price;&#125; å› ä¸ºç±»æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæœ‰ä¸€ä¸ªåŸå‹prototypeç”¨äºæŒ‡å‘å…¶ç»§æ‰¿çš„å±æ€§å’Œæ–¹æ³•ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥é€šè¿‡åœ¨ç±»çš„åŸå‹ä¸Šæ·»åŠ å±æ€§æˆ–æ–¹æ³•ã€‚ä½†é€šè¿‡thiså®šä¹‰çš„å±æ€§å’Œæ–¹æ³•æ˜¯è¯¥å¯¹è±¡è‡ªèº«æ‹¥æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œè€ŒprototypeæŒ‡å‘çš„æ˜¯å…¶ç»§æ‰¿çš„å±æ€§å’Œæ–¹æ³•123Book.prototype.display = function()&#123; //å±•ç¤ºè¿™æœ¬ä¹¦&#125; æˆ–12345Book.prototype = &#123; display: function()&#123; //å±•ç¤ºè¿™æœ¬ä¹¦ &#125;&#125; ä½†ä¸¤ç§æ–¹å¼ä¸è¦æ··ç”¨ã€‚å½“åˆ›å»ºä¸€ä¸ªå‡½æ•°æˆ–è€…å¯¹è±¡æ—¶éƒ½ä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªåŸå‹å¯¹è±¡prototypeï¼Œåœ¨prototypeä¸­åˆä¼šåƒåˆ›å»ºthisä¸€æ ·åˆ›å»ºä¸€ä¸ªconstructorå±æ€§ï¼ŒæŒ‡å‘æ‹¥æœ‰æ•´ä¸ªåŸå‹å¯¹è±¡çš„å‡½æ•°æˆ–å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ğŸŒ°ä¸­çš„Bookå¯¹è±¡ã€‚ å°è£…å°è£…ï¼ˆEncapsulationï¼‰æ˜¯é¢å‘å¯¹è±¡æ–¹æ³•çš„é‡è¦ç‰¹æ€§ï¼Œå°±æ˜¯æŠŠå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ç»“åˆä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ•´ä½“ï¼Œå¹¶å°½å¯èƒ½éšè—å¯¹è±¡çš„å†…éƒ¨å®ç°ç»†èŠ‚ã€‚ ç”±äºJavaScriptçš„å‡½æ•°çº§ä½œç”¨åŸŸï¼Œå£°æ˜åœ¨å‡½æ•°å†…éƒ¨çš„å˜é‡ä»¥åŠæ–¹æ³•åœ¨å¤–ç•Œæ˜¯è®¿é—®ä¸åˆ°çš„ï¼Œé€šè¿‡æ­¤ç‰¹æ€§å³å¯åˆ›å»ºç±»çš„ç§æœ‰å˜é‡ä»¥åŠç§æœ‰æ–¹æ³•ã€‚ åœ¨å‡½æ•°å†…éƒ¨é€šè¿‡thisåˆ›å»ºçš„å±æ€§å’Œæ–¹æ³•ï¼Œåœ¨ç±»åˆ›å»ºå¯¹è±¡æ—¶ï¼Œæ¯ä¸ªå¯¹è±¡è‡ªèº«éƒ½æ‹¥æœ‰ä¸€ä»½å¹¶ä¸”å¯ä»¥åœ¨å¤–éƒ¨è®¿é—®åˆ°ï¼Œå› æ­¤å¯ä»¥é€šè¿‡thisåˆ›å»ºå¯¹è±¡çš„å…¬æœ‰å±æ€§å’Œå…¬æœ‰æ–¹æ³•ã€‚ é€šè¿‡thisåˆ›å»ºçš„æ–¹æ³•ï¼Œä¸ä½†å¯ä»¥è®¿é—®è¿™äº›å¯¹è±¡çš„å…¬æœ‰å±æ€§å’Œå…¬æœ‰æ–¹æ³•ï¼Œè¿˜å¯ä»¥è®¿é—®åˆ°å…¶ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•ï¼Œæ‰€ä»¥åˆç§°è¿™äº›æ–¹æ³•ä¸ºç‰¹æƒæ–¹æ³• ç±»å¤–é¢é€šè¿‡ç‚¹è¯­æ³•å®šä¹‰çš„å±æ€§ä»¥åŠæ–¹æ³•è¢«ç§°ä¸ºç±»çš„é™æ€å…¬æœ‰å±æ€§å’Œç±»çš„é™æ€å…¬æœ‰æ–¹æ³• 123456789101112131415161718192021222324252627var Book = function(id, name, price)&#123; // ç§æœ‰å±æ€§ var num = 1; // ç§æœ‰æ–¹æ³• function checkId()&#123;&#125; // ç‰¹æƒæ–¹æ³• this.getName = function()&#123;&#125;; this.getPrice = function()&#123;&#125;; this.setName = function()&#123;&#125;; this.setPrice = function()&#123;&#125;; // å¯¹è±¡å…¬æœ‰å±æ€§ this.id = id; // å¯¹è±¡å…¬æœ‰æ–¹æ³• this.copy = function()&#123; console.log(num) &#125;; // æ„é€ å™¨ this.setName(name); this.setPrice(price);&#125;// ç±»é™æ€å…¬æœ‰å±æ€§ï¼ˆå¯¹è±¡ä¸èƒ½è®¿é—®ï¼‰Book.isChinese = true;// ç±»é™æ€å…¬æœ‰æ–¹æ³•ï¼ˆå¯¹è±¡ä¸èƒ½è®¿é—®ï¼‰Book.resetTime = function()&#123; console.log('new time');&#125; æµ‹è¯•ä»£ç ï¼š12345678var book = new Book(11, 'JavaScript è®¾è®¡æ¨¡å¼', 50);console.log(book.num);book.copy();console.log(book.id);console.log(book.isJSBook);console.log(book.isChinese);console.log(Book.isChinese);Book.resetTime(); è¿è¡Œç»“æœä¸ºï¼š ç»§æ‰¿ç»§æ‰¿æ˜¯ä»å·²æœ‰çš„ç±»ä¸­æ´¾ç”Ÿå‡ºæ–°çš„ç±»ï¼Œæ–°çš„ç±»èƒ½å¸æ”¶å·²æœ‰ç±»çš„æ•°æ®å±æ€§å’Œè¡Œä¸ºï¼Œå¹¶èƒ½æ‰©å±•æ–°çš„èƒ½åŠ›ã€‚JavaScriptä¸­å¹¶æ²¡æœ‰å®ç°ç»§æ‰¿çš„ç°æœ‰æœºåˆ¶ï¼Œæ¥ä¸‹æ¥æˆ‘å°†ä¼šä»‹ç»JavaScriptä¸­å®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•ã€‚ æ–¹æ³•ä¸€ï¼š ç±»å¼ç»§æ‰¿12345678910111213141516171819202122232425// ç±»å¼ç»§æ‰¿function SuperClass()&#123; this.superValue = true; this.book = ['JavaScrpt', 'html', 'css'];&#125;SuperClass.prototype.getSuperValue = function()&#123; return this.superValue;&#125;function SubClass()&#123; this.subValue = false;&#125;// ç»§æ‰¿çˆ¶ç±»SubClass.prototype = new SuperClass();//ç»§æ‰¿ä¹‹åå†æ·»åŠ å­ç±»å…¬æœ‰æ–¹æ³•SubClass.prototype.getSubValue = function()&#123; return this.subValue;&#125;var instance = new SubClass();console.log(instance.getSubValue());console.log(instance.getSuperValue()); ç±»å¼ç»§æ‰¿ä¸­å®ç°ç»§æ‰¿çš„ä¸»è¦æ–¹æ³•æ˜¯SubClass.prototype = new SuperClass();SubClassçš„åŸå‹è¢«èµ‹äºˆäº†SuperClassçš„å®ä¾‹ï¼Œå› è€ŒSubClassçš„åŸå‹ç»§æ‰¿äº†SuperClassã€‚ç±»å¼ç»§æ‰¿å­˜åœ¨ä¸¤ä¸ªç¼ºç‚¹ï¼š ç”±äºå­ç±»é€šè¿‡å…¶åŸå‹prototypeå¯¹çˆ¶ç±»å®ä¾‹åŒ–ï¼Œç»§æ‰¿äº†çˆ¶ç±»ã€‚æ‰€ä»¥è¯´çˆ¶ç±»ä¸­çš„å…¬æœ‰å±æ€§è¦æ˜¯å¼•ç”¨ç±»å‹ï¼Œå°±ä¼šåœ¨å­ç±»ä¸­è¢«æ‰€æœ‰å®ä¾‹å…±ç”¨ï¼Œå› æ­¤ä¸€ä¸ªå­ç±»çš„å®ä¾‹æ›´æ”¹å­ç±»åŸå‹ä»çˆ¶ç±»æ„é€ å‡½æ•°ä¸­ç»§æ‰¿æ¥çš„å…¬æœ‰å±æ€§å°±ä¼šç›´æ¥å½±å“åˆ°å…¶ä»–å­ç±»ã€‚12345var instance1 = new SubClass();var instance2 = new SubClass();console.log(instance2.book);instance1.book.push('è®¾è®¡æ¨¡å¼');console.log(instance2.book); ç”±äºå­ç±»å®ç°çš„ç»§æ‰¿æ˜¯é å…¶åŸå‹prototypeå¯¹çˆ¶ç±»çš„å®ä¾‹åŒ–å®ç°çš„ï¼Œå› æ­¤åœ¨åˆ›å»ºçˆ¶ç±»çš„æ—¶å€™ï¼Œæ˜¯æ— æ³•å‘çˆ¶ç±»ä¼ é€’å‚æ•°çš„ï¼Œå› è€Œåœ¨å®ä¾‹åŒ–çˆ¶ç±»çš„æ—¶å€™ä¹Ÿæ— æ³•å¯¹çˆ¶ç±»æ„é€ å‡½æ•°å†…çš„å±æ€§è¿›è¡Œåˆå§‹åŒ–ã€‚ å› ä¸ºç±»å¼ç»§æ‰¿å­˜åœ¨çš„ä¸¤ä¸ªç¼ºç‚¹ï¼Œæ‰€ä»¥å¼•å‡ºäº†ç¬¬äºŒç§ç»§æ‰¿æ–¹æ³•â€”â€”æ„é€ å‡½æ•°ç»§æ‰¿ æ–¹æ³•äºŒï¼š æ„é€ å‡½æ•°ç»§æ‰¿1234567891011121314151617181920212223// æ„é€ å‡½æ•°ç»§æ‰¿function SuperClass(id)&#123; this.id = id; this.books = ['JavaScrpt', 'html', 'css'];&#125;SuperClass.prototype.showBooks = function()&#123; console.log(this.books);&#125;function SubClass(id)&#123; // æ„é€ å‡½æ•°ç»§æ‰¿ï¼Œä½¿ç”¨callæ¥æ›´æ”¹å‡½æ•°çš„ä½œç”¨ç¯å¢ƒ SuperClass.call(this, id);&#125;var instance1 = new SubClass(10);var instance2 = new SubClass(20);instance1.books.push("Java");console.log(instance1.id);console.log(instance1.books);console.log(instance2.id)console.log(instance2.books); SuperClass.call(this, id);è¿™æ¡è¯­å¥æ˜¯æ„é€ å‡½æ•°ç»§æ‰¿çš„ç²¾åï¼Œcallæ–¹æ³•å¯ä»¥æ›´æ”¹å‡½æ•°çš„æ‰§è¡Œç¯å¢ƒï¼Œå› æ­¤åœ¨å­ç±»ä¸­ï¼Œå¯¹SuperClassè°ƒç”¨è¿™ä¸ªæ–¹æ³•å°±æ˜¯å°†å­ç±»ä¸­çš„å˜é‡åœ¨çˆ¶ç±»ä¸­æ‰§è¡Œä¸€éï¼Œç”±äºçˆ¶ç±»ä¸­æ˜¯ç»™thisç»‘å®šå±æ€§çš„ï¼Œå› æ­¤å­ç±»è‡ªç„¶å°±ç»§æ‰¿äº†çˆ¶ç±»çš„å…¬æœ‰å±æ€§ã€‚ç”±äºæ„é€ å‡½æ•°ç»§æ‰¿æ²¡æœ‰æ¶‰åŠåŸå‹prototypeï¼Œæ‰€ä»¥çˆ¶ç±»çš„åŸå‹æ–¹æ³•è‡ªç„¶ä¸ä¼šè¢«å­ç±»ç»§æ‰¿ã€‚1instance1.showBooks(); å› è€Œå¼•å‡ºäº†ç¬¬ä¸‰ç§ç»§æ‰¿æ–¹æ³•â€”â€”ç»„åˆç»§æ‰¿ æ–¹æ³•ä¸‰ï¼š ç»„åˆç»§æ‰¿ç»„åˆç»§æ‰¿æ˜¯å°†ç±»å¼ç»§æ‰¿å’Œæ„é€ å‡½æ•°ç»§æ‰¿ç»„åˆèµ·æ¥å®ç°ç»§æ‰¿çš„ä¸€ç§æ–¹å¼ã€‚1234567891011121314151617181920212223242526272829303132333435363738// ç»„åˆç»§æ‰¿function SuperClass(name)&#123; this.name = name; this.books = ['JavaScrpt', 'html', 'css'];&#125;SuperClass.prototype= &#123; getName: function()&#123; console.log(this.name); &#125;, showBooks: function()&#123; console.log(this.books); &#125;&#125;function SubClass(name, time)&#123; // è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•° SuperClass.call(this, name); this.time = time;&#125;SubClass.prototype = new SuperClass();SubClass.prototype.getTime = function()&#123; console.log(this.time);&#125;var instance1 = new SubClass('js book', 2010);// è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°instance1.books.push("Java");instance1.showBooks();instance1.getName();instance1.getTime();var instance2 = new SubClass('css book', 2021);instance2.showBooks();instance2.getName();instance2.getTime(); ç»„åˆç»§æ‰¿è§£å†³äº†ç±»å¼ç»§æ‰¿å’Œæ„é€ å‡½æ•°ç»§æ‰¿å­˜åœ¨çš„é—®é¢˜ï¼Œä½†ä»ç„¶ä¸æ˜¯å®Œç¾çš„ç»§æ‰¿æ–¹æ³•ï¼Œå› ä¸ºåœ¨ç»„åˆç»§æ‰¿ä¸­è°ƒç”¨äº†ä¸¤æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œåœ¨ä½¿ç”¨æ„é€ å‡½æ•°ç»§æ‰¿æ—¶æ‰§è¡Œäº†ä¸€éçˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œè€Œåœ¨å®ç°å­ç±»åŸå‹çš„ç±»å¼ç»§æ‰¿æ—¶åˆè°ƒç”¨äº†ä¸€éçˆ¶ç±»æ„é€ å‡½æ•°ã€‚ æœ€å®Œç¾çš„ç»§æ‰¿æ–¹æ³•æ˜¯â€”â€”å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼Œåœ¨å­¦ä¹ å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£åŸå‹å¼ç»§æ‰¿ã€å¯„ç”Ÿå¼ç»§æ‰¿æ–¹æ³•çš„å®ç°ã€‚ æ–¹æ³•å››ï¼š åŸå‹å¼ç»§æ‰¿1234567891011121314151617181920212223242526272829// åŸå‹å¼ç»§æ‰¿function inheritObject(o)&#123; // å£°æ˜ä¸€ä¸ªè¿‡æ¸¡å¯¹è±¡ function F()&#123;&#125;; // è¿‡æ¸¡å¯¹è±¡çš„åŸå‹ç»§æ‰¿çˆ¶å¯¹è±¡ F.prototype = o; // è¿”å›è¿‡æ¸¡å¯¹è±¡çš„å®ä¾‹ï¼Œè¯¥å®ä¾‹çš„åŸå‹ç»§æ‰¿äº†çˆ¶å¯¹è±¡ return new F();&#125;var book = &#123; name: "js book", alikeBook: ["css book", "html book"]&#125;var newBook = inheritObject(book);newBook.name = "ajax book";newBook.alikeBook.push("xml book");var otherBook = inheritObject(book);otherBook.name = "flash book";otherBook.alikeBook.push("as book");// å­˜åœ¨åŒç±»å¼ç»§æ‰¿ä¸€æ ·çš„é—®é¢˜ï¼šå…±äº«å±æ€§console.log(newBook.name);console.log(newBook.alikeBook);console.log(otherBook.name);console.log(otherBook.alikeBook);console.log(book.name);console.log(book.alikeBook); åŸå‹å¼ç»§æ‰¿å¼•å…¥ä¸€ä¸ªè¿‡æ¸¡å¯¹è±¡ï¼Œé€šè¿‡è¿‡æ¸¡å¯¹è±¡çš„åŸå‹ç»§æ‰¿çˆ¶å¯¹è±¡ï¼Œè¿”å›è¿‡æ¸¡å¯¹è±¡çš„å®ä¾‹æ¥å®ç°ç»§æ‰¿ã€‚åŸå‹å¼ç»§æ‰¿æ˜¯å¯¹ç±»å¼ç»§æ‰¿çš„ä¸€æ¬¡å°è£…ï¼Œæ‰€ä»¥ç±»å¼ç»§æ‰¿çš„é—®é¢˜åœ¨åŸå‹å¼ç»§æ‰¿ä¸­ä¹Ÿä¼šå‡ºç°ã€‚ æ–¹æ³•äº”ï¼š å¯„ç”Ÿå¼ç»§æ‰¿12345678910111213141516171819202122232425262728293031// å¯„ç”Ÿå¼ç»§æ‰¿â€”â€”å¯¹åŸå‹ç»§æ‰¿çš„ç¬¬äºŒæ¬¡å°è£…function inheritObject(o)&#123; // å£°æ˜ä¸€ä¸ªè¿‡æ¸¡å¯¹è±¡ function F()&#123;&#125;; // è¿‡æ¸¡å¯¹è±¡çš„åŸå‹ç»§æ‰¿çˆ¶å¯¹è±¡ F.prototype = o; // è¿”å›è¿‡æ¸¡å¯¹è±¡çš„å®ä¾‹ï¼Œè¯¥å®ä¾‹çš„åŸå‹ç»§æ‰¿äº†çˆ¶å¯¹è±¡ return new F();&#125;var book = &#123; name: "js book", alikeBook: ["css book", "html book"]&#125;// äºŒæ¬¡å°è£… ä¼˜ç‚¹ï¼šå¯¹ç»§æ‰¿çš„å¯¹è±¡è¿›è¡Œäº†æ‹“å±•function createBook(obj)&#123; var o = new inheritObject(obj); // æ‹“å±•æ–°å¯¹è±¡ o.getName = function()&#123; console.log(this.name); &#125;; // è¿”å›æ‹“å±•åçš„æ–°å¯¹è±¡ return o;&#125;var newBook = createBook(book);var otherBook = createBook(book);newBook.getName();console.log(newBook.alikeBook);newBook.alikeBook.push('Java');console.log(otherBook.alikeBook); å¯„ç”Ÿå¼ç»§æ‰¿æ˜¯å¯¹åŸå‹å¼ç»§æ‰¿çš„ç¬¬äºŒæ¬¡å°è£…ï¼Œå¹¶ä¸”åœ¨è¿™ç¬¬äºŒæ¬¡å°è£…è¿‡ç¨‹ä¸­å¯¹ç»§æ‰¿çš„å¯¹è±¡è¿›è¡Œäº†æ‹“å±•ã€‚ä»ç„¶å­˜åœ¨å±æ€§å…±äº«çš„é—®é¢˜ã€‚ æ–¹æ³•å…­ï¼š ç»ˆæç»§æ‰¿è€…â€”â€”å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿1234567891011121314151617181920212223242526272829303132333435363738394041424344454647// å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼šå¯„ç”Ÿå¼ç»§æ‰¿ï¼‹æ„é€ å‡½æ•°ç»§æ‰¿function inheritObject(o)&#123; // å£°æ˜ä¸€ä¸ªè¿‡æ¸¡å¯¹è±¡ function F()&#123;&#125;; // è¿‡æ¸¡å¯¹è±¡çš„åŸå‹ç»§æ‰¿çˆ¶å¯¹è±¡ F.prototype = o; // è¿”å›è¿‡æ¸¡å¯¹è±¡çš„å®ä¾‹ï¼Œè¯¥å®ä¾‹çš„åŸå‹ç»§æ‰¿äº†çˆ¶å¯¹è±¡ return new F();&#125;// å¤„ç†çš„ä¸æ˜¯å¯¹è±¡ï¼Œè€Œæ˜¯ç±»çš„åŸå‹function inheritPrototype(subClass, superClass)&#123; // å¤åˆ¶ä¸€ä»½çˆ¶ç±»çš„åŸå‹å‰¯æœ¬ä¿å­˜åœ¨å˜é‡ä¸­ var p = new inheritObject(superClass.prototype); // ä¿®æ­£å› ä¸ºé‡å†™å­ç±»ç±»å‹å¯¼è‡´å­ç±»çš„constructorå±æ€§è¢«ä¿®æ”¹ p.constructor = subClass; // è®¾ç½®å­ç±»çš„åŸå‹ subClass.prototype = p;&#125;function SuperClass(name)&#123; this.name = name; this.colors = ["red", "green", "yellow"]&#125;SuperClass.prototype.getName = function()&#123; console.log(this.name);&#125;function SubClass(name, time)&#123; SuperClass.call(this, name); this.time = time;&#125;inheritObject(SubClass, SuperClass);SubClass.prototype.getTime = function()&#123; console.log(this.time);&#125;// Testvar instance1 = new SubClass('js book', 2014);var instance2 = new SubClass('css book', 2020);instance1.colors.push("grown");console.log(instance1.colors);console.log(instance2.colors);instance1.getTime();instance2.getTime(); å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿æ˜¯å°†å¯„ç”Ÿå¼ç»§æ‰¿å’Œæ„é€ å‡½æ•°ç»§æ‰¿ç»„åˆåœ¨ä¸€èµ·çš„ç»§æ‰¿æ–¹æ³•ã€‚ é€šè¿‡å¯„ç”Ÿå¼ç»§æ‰¿é‡æ–°ç»§æ‰¿çˆ¶ç±»çš„åŸå‹ã€‚æˆ‘ä»¬ç»§æ‰¿çš„ä»…ä»…æ˜¯çˆ¶ç±»çš„åŸå‹ï¼Œä¸å†éœ€è¦è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚å› ä¸ºåœ¨æ„é€ å‡½æ•°ç»§æ‰¿ä¸­æˆ‘ä»¬å·²ç»è°ƒç”¨äº†çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦çš„å°±æ˜¯çˆ¶ç±»çš„åŸå‹å¯¹è±¡çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œè€Œè¿™ä¸ªå‰¯æœ¬æˆ‘ä»¬é€šè¿‡åŸå‹ç»§æ‰¿ï¼Œå³inheritObject()æ–¹æ³•ä¾¿å¯å¾—åˆ°ã€‚å› ä¸ºå¯¹çˆ¶ç±»åŸå‹å¯¹è±¡å¤åˆ¶å¾—åˆ°çš„å¤åˆ¶å¯¹è±¡pä¸­çš„constructoræŒ‡å‘çš„ä¸æ˜¯subClasså­ç±»å¯¹è±¡ï¼Œå› æ­¤å¯„ç”Ÿå¼ç»§æ‰¿ä¸­è¦å¯¹å¤åˆ¶å¯¹è±¡påšä¸€æ¬¡å¢å¼ºï¼Œä¿®å¤constructoræŒ‡å‘ä¸æ­£ç¡®çš„é—®é¢˜ï¼Œæœ€åå°†å¾—åˆ°çš„å¤åˆ¶å¯¹è±¡pèµ‹å€¼ç»™å­ç±»çš„åŸå‹ï¼Œè¿™æ ·ï¼Œå­ç±»çš„åŸå‹å°±ç»§æ‰¿äº†çˆ¶ç±»çš„åŸå‹å¹¶ä¸”æ²¡æœ‰æ‰§è¡Œçˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚ å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿æ˜¯JavaScriptå®ç°ç»§æ‰¿çš„ç»ˆæç»§æ‰¿æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿å¯ä»¥è§£å†³ç±»å¼ç»§æ‰¿å…±äº«å±æ€§çš„é—®é¢˜ã€æ„é€ å‡½æ•°ç»§æ‰¿æ— æ³•ç»§æ‰¿åŸå‹prototypeä¸Šçš„å±æ€§çš„é—®é¢˜ä»¥åŠç»„åˆç»§æ‰¿è°ƒç”¨ä¸¤æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°çš„é—®é¢˜ã€‚ä½†æ˜¯å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ä¹Ÿæ¯”è¾ƒä¸å¥½ç†è§£ï¼Œæˆ‘å·²ç»åœ¨ä»£ç éƒ¨åˆ†éƒ½å†™ä¸Šäº†æ³¨é‡Šï¼Œä¾›å¤§å®¶å‚è€ƒç†è§£ï½ å¤šç»§æ‰¿å½“å‰æµè¡Œçš„ç”¨äºç»§æ‰¿å•å¯¹è±¡å±æ€§çš„extendsæ–¹æ³•ï¼Œæ˜¯é€šè¿‡å¯¹å¯¹è±¡ä¸­å±æ€§çš„å¤åˆ¶æ¥å®ç°çš„ã€‚JavaScriptä¹Ÿå¯ä»¥ä½¿ç”¨å±æ€§å¤åˆ¶çš„æ–¹å¼æ¥å®ç°å¤šç»§æ‰¿ï¼š123456789101112// å¤šç»§æ‰¿â€”â€”å¯¹å¯¹è±¡ä¸­çš„å±æ€§çš„ä¸€ä¸ªå¤åˆ¶è¿‡ç¨‹Object.prototype.mix = function()&#123; var i = 0, len = arguments.length, arg; for(; i &lt; len; i++)&#123; arg = arguments[i]; for(var property in arg)&#123; this[property] = arg[property]; &#125; &#125;&#125; å¤šæ€å¤šæ€é€šä¿—æ¥è¯´å°±æ˜¯åŒä¸€ä¸ªæ–¹æ³•å¤šç§è°ƒç”¨æ–¹å¼ã€‚åœ¨JavaScriptä¸­é€šè¿‡å¯¹ä¼ å…¥çš„å‚æ•°è¿›è¡Œåˆ¤æ–­æ¥å®ç°å¤šç§è°ƒç”¨æ–¹å¼ã€‚å¦‚ï¼š123456789101112131415161718// å¤šæ€function add()&#123; var arg = arguments, len = arg.length; switch(len)&#123; case 0: return 10; case 1: return 10 + arg[0]; case 2: return arg[0] + arg[1]; &#125;&#125;// Testconsole.log(add());console.log(add(5));console.log(add(1, 7)); æ€»ç»“å°è£…ã€ç»§æ‰¿ä¸å¤šæ€æ˜¯é¢å‘å¯¹è±¡ä¸­çš„é‡è¦ç‰¹æ€§ï¼Œä»JavaScriptçš„è§’åº¦ä¸Šå®ç°è¿™ä¸‰ä¸ªç‰¹æ€§ï¼Œè®©æˆ‘æ„Ÿå—åˆ°JavaScriptçš„çµæ´»ä¸å¼ºå¤§ã€‚å› ä¸ºæœ¬å­¦æœŸä¸Šäº†ä¼Ÿå¸…çš„è®¾è®¡æ¨¡å¼çš„è¯¾ï¼Œå¯¹è®¾è®¡æ¨¡å¼é¢‡æœ‰å…´è¶£ï¼Œæ¥ä¸‹æ¥æˆ‘å°†ä¼šå­¦ä¹ JavaScriptä¸­çš„è®¾è®¡æ¨¡å¼ï¼Œå¹¶å°†å­¦ä¹ è¿‡ç¨‹è®°å½•ä¸‹æ¥ï½]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScriptä¹‹ç»§æ‰¿</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[webpackï¼Œä¸€ä¸ªå¹¿æ³›åº”ç”¨çš„æ¨¡å—æ‰“åŒ…å™¨ï¼ˆäºŒï¼‰â€”â€”èµ„æºç®¡ç†æ¨¡å—]]></title>
    <url>%2F2017%2F11%2F20%2Fwebpack-guide%2F</url>
    <content type="text"><![CDATA[ç»§ä¸Šä¸€ç¯‡åšæ–‡webpackï¼Œä¸€ä¸ªå¹¿æ³›åº”ç”¨çš„æ¨¡å—æ‰“åŒ…å™¨ï¼ˆä¸€ï¼‰â€”â€”æ¦‚å¿µç¯‡å®Œæˆä¹‹åï¼Œæ—¶éš”ä¸€æ®µæ—¶é—´æ²¡æœ‰å­¦ä¹ webpackäº†ï¼Œä¸»è¦æ˜¯æœ€è¿‘æœ‰ç‚¹å°å¿™è€½æäº†ã€‚æ­¤ç¯‡åšæ–‡ä¸»è¦æ˜¯ä½œä¸ºwebpackçš„å­¦ä¹ æŒ‡å—ï¼Œç†è§£å’ŒæŒæ¡webpackæä¾›çš„å„ç§å·¥å…·å’Œç‰¹æ€§ï¼Œä¸»è¦ç›®çš„æ˜¯æƒ³å°†æ­¤æ¬¡çš„å­¦ä¹ è¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œä»¥ä¾¿è¿›è¡Œåç»­çš„æ·±å…¥å­¦ä¹ ï¼Œå¦‚æœåœ¨ç†è§£ä¸Šæœ‰åå·®çš„è¯ï¼Œè¿˜è¯·å¤§å®¶ä¸åèµæ•™ï½ å®‰è£…é¦–å…ˆéœ€è¦ä½ ä¸‹è½½å®‰è£…node.js è¿˜æ²¡æœ‰ä¸‹è½½å®‰è£…ï¼Ÿæˆ³è¿™é‡Œè¿›å…¥Node.jsä¸­æ–‡ç½‘è¿›è¡Œä¸‹è½½å®‰è£…ï¼Œåœ¨ä½¿ç”¨webpackçš„è¿‡ç¨‹ä¸­æˆ‘ä»¬éœ€è¦å¤§é‡çš„ä½¿ç”¨nodeä¸­çš„npmåŒ…ç®¡ç†å·¥å…·ï¼Œnpmä¸»è¦çš„ä½¿ç”¨åœºæ™¯æœ‰ï¼š ç”¨æˆ·å¯ä»¥åœ¨npmæœåŠ¡å™¨ä¸Šä¸‹è½½åˆ«äººç¼–å†™çš„ç¬¬ä¸‰æ–¹åŒ…åˆ°æœ¬åœ°ä½¿ç”¨; ç”¨æˆ·å¯ä»¥åœ¨npmæœåŠ¡å™¨ä¸Šä¸‹è½½å¹¶å®‰è£…åˆ«äººç¼–å†™çš„å‘½ä»¤è¡Œç¨‹åºåˆ°æœ¬åœ°ä½¿ç”¨; è¿˜å¯ä»¥å°†è‡ªå·±ç¼–å†™çš„åŒ…æˆ–å‘½ä»¤è¡Œç¨‹åºä¸Šä¼ åˆ°npmæœåŠ¡å™¨ä¾›ä»–äººä½¿ç”¨ã€‚ è¿™é‡Œå»ºè®®å¤§å®¶å¯ä»¥ä¸‹è½½å®‰è£…ä¸€ä¸‹cnpmæ·˜å®npmé•œåƒï¼Œå› ä¸ºnpmå®‰è£…æ’ä»¶æ˜¯ä»å›½å¤–æœåŠ¡å™¨ä¸‹è½½ï¼Œå—ç½‘ç»œå½±å“å¤§ï¼Œå¯èƒ½å‡ºç°å¼‚å¸¸ï¼Œä½¿ç”¨cnpmçš„è¯å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜æˆ‘ä»¬æ¨¡å—çš„ä¸‹è½½å®‰è£…é€Ÿåº¦1$ npm install -g cnpm --registry=https://registry.npm.taobao.org å…¨å±€å®‰è£…1npm install --global webpack å…¨å±€å®‰è£…å°†ä½¿webpackåœ¨å…¨å±€ç¯å¢ƒä¸‹å¯ç”¨ï¼Œä½†ä¸æ¨èå…¨å±€å®‰è£… webpackã€‚è¿™ä¼šå°†ä½ é¡¹ç›®ä¸­çš„ webpack é”å®šåˆ°æŒ‡å®šç‰ˆæœ¬ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨ä¸åŒçš„ webpack ç‰ˆæœ¬çš„é¡¹ç›®ä¸­ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ„å»ºå¤±è´¥ã€‚ æœ¬åœ°å®‰è£…1npm install --save-dev webpack å¯¹äºå¤§å¤šæ•°é¡¹ç›®ï¼Œæˆ‘ä»¬å»ºè®®æœ¬åœ°å®‰è£…ã€‚è¿™å¯ä»¥ä½¿æˆ‘ä»¬åœ¨å¼•å…¥ç ´åå¼å˜æ›´çš„ä¾èµ–æ—¶ï¼Œæ›´å®¹æ˜“åˆ†åˆ«å‡çº§é¡¹ç›®ã€‚é€šå¸¸ï¼Œwebpack é€šè¿‡è¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ª npm scriptsï¼Œä¼šåœ¨æœ¬åœ° node_modules ç›®å½•ä¸­æŸ¥æ‰¾å®‰è£…çš„ webpackã€‚ èµ·æ­¥ä¸ºäº†åç»­æ›´å¥½çš„è¿›è¡ŒçŸ¥è¯†ç‚¹çš„æ¼”ç¤ºï¼Œæˆ‘ä»¬å…ˆè¿›è¡Œç®€å•çš„é¡¹ç›®å‡†å¤‡ã€‚æˆ‘åœ¨å¸¸ç”¨çš„å·¥ä½œç›®å½•ä¸‹æ–°å»ºäº†ä¸€ä¸ªåä¸ºwebpack-blogçš„æ–‡ä»¶å¤¹ã€‚å‘½ä»¤è¡Œè¿›å…¥webpack-blogçš„å·¥ä½œç›®å½•æ‰§è¡Œ1234//åˆå§‹åŒ–å¹¶åˆ›å»ºpackage.jsonæ–‡ä»¶$ npm init //åœ¨é¡¹ç›®ä¸­å®‰è£…webpackä¾èµ–åŒ…$ cnpm install --save-dev webpack åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºåä¸ºwebpack.config.jsçš„æ–‡ä»¶ä»¥åŠæˆ‘ä»¬çš„å…¥å£æ–‡ä»¶/src/main.jsæ–‡ä»¶ï¼Œwebpack.config.jsæ˜¯æˆ‘ä»¬è¿™æ¬¡ä¸»è¦çš„æ–‡ä»¶ï¼Œæ˜¯webpackçš„é…ç½®æ–‡ä»¶ã€‚æ„å»ºå¥½å·¥ä½œç›®å½•åï¼Œæˆ‘ä»¬æ¥æ ¹æ®ä¸Šä¸€èŠ‚ç®€è¿°è¿‡çš„webpackæ ¸å¿ƒçŸ¥è¯†æ¥ç®€å•ä½¿ç”¨ä¸€ä¸‹webpackã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨srcç›®å½•ä¸‹çš„main.jsæ–‡ä»¶ä¸­ç¼–å†™ç®€å•çš„jsä»£ç ï¼š1console.log("Welcome to your first webpack test!"); æ¥ç€ï¼Œæˆ‘ä»¬æ¥åˆ°webpack.config.jsæ–‡ä»¶ï¼Œå¹¶è®¾ç½®webpackæ‰“åŒ…æ‰€éœ€çš„å…¥å£èµ·ç‚¹ä»¥åŠè¾“å‡ºæ–‡ä»¶é…ç½®ï¼š12345678910var path = require('path');var webpack = require('webpack');module.exports = &#123; entry: './src/main.js', output: &#123; path: path.resolve(__dirname, 'dist'), filename: 'webpack.bundle.js' &#125;&#125; ç®€å•ä»‹ç»ä¸€ä¸‹ä¸Šè¿°ä»£ç ï¼Œentryæ˜¯æ¨¡å—æ‰“åŒ…çš„å…¥å£èµ·ç‚¹ï¼Œå®ƒæŒ‡ç¤ºwebpackæ ¹æ®srcç›®å½•ä¸‹çš„main.jsæ–‡ä»¶æ¥æ„å»ºå·¥ç¨‹çš„ä¾èµ–å›¾ï¼›require()æ˜¯node.jsä¸­å¸¸ç”¨çš„ä¸€ä¸ªå¯¼å…¥æ¨¡å—çš„æ“ä½œï¼Œpath.resolve()æ˜¯è·å–ç»å¯¹è·¯å¾„çš„æ–¹æ³•ï¼Œ__dirname ç”¨äºè·å–å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„å®Œæ•´ç›®å½•åã€‚æ­¤ä»£ç ç”¨äºæŸ¥æ‰¾distæ–‡ä»¶å¤¹ï¼Œå¦‚æœç›®å½•ä¸‹æ²¡æœ‰distæ–‡ä»¶å¤¹åˆ™æ–°å»ºï¼Œå¹¶å°†é€šè¿‡æ‰“åŒ…åˆ›å»ºåçš„webpack.bundle.jsæ–‡ä»¶æ”¾å…¥distæ–‡ä»¶å¤¹ä¸­ã€‚ æ¥ç€ï¼Œæˆ‘ä»¬æ‰§è¡Œ1$ webpack å‘½ä»¤ï¼Œå¯¹å·¥ç¨‹è¿›è¡Œæ‰“åŒ…æ„å»ºï¼Œæ‰§è¡ŒæˆåŠŸåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ ¹ç›®å½•ä¸‹çœ‹åˆ°æ–°å»ºçš„distæ–‡ä»¶å¤¹ä¸‹æœ‰ä¸€ä¸ªæ–°å»ºçš„webpack.bundle.jsæ–‡ä»¶ï¼Œæœ‰ç‚¹ç»•ï½ æœ€åï¼Œæˆ‘ä»¬åœ¨srcç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸ºindex.htmlçš„æ–‡ä»¶ï¼Œå¹¶ä»¥scriptæ ‡ç­¾çš„å½¢å¼å¼•å…¥ç”Ÿæˆçš„webpack.bundle.jsæ–‡ä»¶ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€index.htmlï¼Œä½ ä¼šå‘ç°é¡µé¢ä¸Šç©ºç©ºå¦‚ä¹Ÿï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ï½åˆ«ç€æ€¥ï¼Œæ‰“å¼€æµè§ˆå™¨çš„æ§åˆ¶å°ï¼Œä½ å¯ä»¥çœ‹åˆ°åœ¨æ§åˆ¶å°ä¸­è¾“å‡ºäº†â€œWelcome to your first webpack test!â€ï¼Œæˆ‘ä»¬å¯¹webpackçš„ç¬¬ä¸€æ¬¡ç®€å•åº”ç”¨å°±æˆåŠŸå•¦ã€‚ å½“ç„¶è¿™åªæ˜¯ä¸€ä¸ªè¶…ç®€å•çš„ä¾‹å­ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å¯¹è¿™ä¸ªä¾‹å­è¿›è¡Œæ‰©å……ï¼Œè¿›è€Œå±•ç¤ºwebpackå¼ºå¤§çš„åŠŸèƒ½ã€‚ ç®¡ç†èµ„æºåŠ è½½CSSä¸ºäº†ä» JavaScript æ¨¡å—ä¸­ import ä¸€ä¸ª CSS æ–‡ä»¶ï¼Œä½ éœ€è¦åœ¨ module é…ç½®ä¸­ å®‰è£…å¹¶æ·»åŠ  style-loader å’Œ css-loaderï¼š1$ cnpm install --save-dev style-loader css-loader å®‰è£…æˆåŠŸåå¯ä»¥åœ¨package.jsonæ–‡ä»¶ä¸­çš„devDependenciesé¡¹ä¸­çœ‹åˆ°æ–°å®‰è£…çš„style-loaderå’Œcss-loaderæ¨¡å—ã€‚æ¥ç€ï¼Œæˆ‘ä»¬åœ¨webpack.config.jsæ–‡ä»¶ä¸­é…ç½®æ¨¡å—çš„ä½¿ç”¨è§„åˆ™ï¼š12345678module: &#123; rules: [ &#123; test: /\.css$/, use: ['style-loader', 'css-loader'] &#125; ]&#125; ç®€å•ä»‹ç»ä»¥ä¸Šä»£ç ï¼Œtestç”¨äºè¯†åˆ«å‡ºåº”è¯¥è¢«å¯¹åº”çš„loaderè¿›è¡Œè½¬æ¢çš„æ–‡ä»¶ï¼Œä»¥ä¸Šä»£ç è¡¨ç¤ºloaderéœ€è¦è¯†åˆ«.cssä¸ºåç¼€çš„æ–‡ä»¶ï¼Œuseå±æ€§è½¬æ¢è¿™äº›æ–‡ä»¶ï¼Œä»è€Œä½¿å…¶èƒ½å¤Ÿè¢«æ·»åŠ åˆ°ä¾èµ–å›¾ä¸­ï¼ˆå¹¶ä¸”æœ€ç»ˆæ·»åŠ åˆ° bundle ä¸­ï¼‰ã€‚ ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°è¯•ä¸€ä¸‹åœ¨é¡¹ç›®srcç›®å½•ä¸‹æ·»åŠ style.cssæ–‡ä»¶ï¼Œå¹¶å°†å…¶å¯¼å…¥æˆ‘ä»¬çš„å…¥å£æ–‡ä»¶main.jsä¸­æˆ‘ä»¬ä¿®æ”¹main,jsæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œä»¥ä¾¿äºåœ¨é¡µé¢ä¸­æ›´ç›´è§‚åœ°çœ‹åˆ°æ•ˆæœã€‚1234var element = document.createElement('div');element.setAttribute("class", "hello");element.innerHTML = "Welcome to your first webpack test!";document.body.appendChild(element); æ­¤æ—¶ç»è¿‡$ webpackå‘½ä»¤æ‰“åŒ…åï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€index.htmlæ–‡ä»¶å¯ä»¥çœ‹åˆ°ï¼Œé¡µé¢ç»“æ„ä¸ºé¡µé¢æ•ˆæœä¸ºï¼š æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨åˆ›å»ºçš„style.cssæ–‡ä»¶ä¸­å†™å…¥ç®€å•çš„æ ·å¼æ¥éªŒè¯webpackåŠ è½½CSSçš„åŠŸèƒ½123.hello&#123; color: red;&#125; åœ¨main.jsæ–‡ä»¶ä¸­å¼•å…¥style.cssæ–‡ä»¶1import './style.css'; å†æ¬¡ä½¿ç”¨$ webpackå‘½ä»¤æ‰“åŒ…åï¼Œæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€index.htmlæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°Welcome to your first webpack test!è¾“å‡ºä¸ºçº¢è‰²ã€‚ æŸ¥çœ‹é¡µé¢çš„headæ ‡ç­¾ï¼Œå¯ä»¥å‘ç°é¡µé¢å·²ç»åŒ…å«äº†æˆ‘ä»¬åœ¨main.jsæ–‡ä»¶ä¸­å¯¼å…¥çš„style.cssæ–‡ä»¶ã€‚ åŠ è½½å›¾ç‰‡ä½¿ç”¨ file-loaderï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å°†é¡µé¢ä¸­éœ€è¦çš„èƒŒæ™¯å›¾ç‰‡æˆ–è€…å›¾æ ‡æ··åˆåˆ° CSS ä¸­ï¼Œé¦–å…ˆè¿˜æ˜¯è¦å®‰è£…æ¨¡å—ä¾èµ–åŒ…ï¼š1$ cnpm install --save-dev file-loader åŒæ ·çš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨webpack.config.jsæ–‡ä»¶ä¸­é…ç½®åº”ç”¨è§„åˆ™ï¼š æ­¤æ®µè§„åˆ™è¡¨æ˜ç¨‹åºå¯ä»¥åŠ è½½ä»¥.png .svg .jpg .gifä¸ºåç¼€åçš„æ–‡ä»¶ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨style.cssæ–‡ä»¶ä¸­æ·»åŠ backgroundæ ·å¼æ¥å¼•å…¥å›¾ç‰‡ï¼Œä¸ºäº†è®©èƒŒæ™¯å›¾ç‰‡å®Œæ•´åœ°æ˜¾ç¤ºå‡ºæ¥ï¼Œæˆ‘ä»¬ä¸ºhelloè¿™ä¸ªdivè®¾ç½®äº†300pxçš„é«˜åº¦12345.hello&#123; height: 300px; color: red; background: url('./logo.png');&#125; é‡æ–°æ‰§è¡Œ$ webpackå‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é¡µé¢æ•ˆæœä¸ºï¼š å›¾ç‰‡ç¨€ç¼ºï¼Œå°±æ‹¿äº†ä¸€å¼ ä¹‹å‰å·¥ç¨‹ä¸­ç°æœ‰çš„vueæ¡†æ¶çš„logoæ¥ç”¨ï½å¦‚æœä½ æ£€æŸ¥imgå…ƒç´ ï¼Œä½ å°†çœ‹åˆ°å®é™…çš„æ–‡ä»¶åå·²æ›´æ”¹ä¸ºåƒ 82b9c7a5a3f405032b1db71a25f67021.png ä¸€æ ·ã€‚è¿™æ„å‘³ç€ webpack åœ¨ src æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°æˆ‘ä»¬çš„æ–‡ä»¶ï¼Œå¹¶æˆåŠŸå¤„ç†è¿‡å®ƒäº†ï¼ åŠ è½½å­—ä½“ åŠ è½½å­—ä½“ä¸åŠ è½½å›¾ç‰‡ç›¸åŒï¼Œä¹Ÿä½¿ç”¨çš„æ˜¯file-loaderæ¥åŠ è½½å­—ä½“æ–‡ä»¶ï¼ŒåŠ è½½å­—ä½“ä½¿ç”¨çš„æ­£åˆ™è§„åˆ™å¦‚ï¼š1test: /\.(woff|woff2|eot|ttf|otf)$/ ä¸åŠ è½½å›¾ç‰‡æ–‡ä»¶ç›¸åŒï¼ŒåŠ è½½å­—ä½“éœ€è¦åœ¨cssæ–‡ä»¶ä¸­å¼•å…¥å­—ä½“æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ª @font-face å£°æ˜å¼•å…¥ã€‚ç”¨æ³•å¦‚ä¸‹ï¼š åŠ è½½æ•°æ®åœ¨æˆ‘ä»¬å®é™…è¿ç”¨ä¸­ï¼Œä¸ä»…ä»…è¦åŠ è½½å›¾ç‰‡åŠå­—ä½“æ–‡ä»¶ï¼Œè¿˜å¯èƒ½éœ€è¦åŠ è½½æœ‰ç”¨çš„èµ„æºè¿˜æœ‰æ•°æ®ï¼Œå¦‚ JSON æ–‡ä»¶ï¼ŒCSVã€TSV å’Œ XMLã€‚JSON æ”¯æŒå®é™…ä¸Šæ˜¯å†…ç½®çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ import Data from â€˜./data.jsonâ€™ é»˜è®¤å°†æ­£å¸¸è¿è¡Œã€‚è€Œè¦å¯¼å…¥ CSVã€TSV å’Œ XMLç±»å‹çš„æ•°æ®ï¼Œå°±éœ€è¦æˆ‘ä»¬å®‰è£…csv-loaderå’Œxml-loaderæ¨¡å—æ¥è¿›è¡ŒåŠ è½½æ•°æ®ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦åœ¨é¡¹ç›®ä¸­å®‰è£…ç›¸å…³æ¨¡å—ï¼š1$ cnpm install --save-dev csv-loader xml-loader æ¥ç€ï¼Œæˆ‘ä»¬åŒæ ·éœ€è¦åœ¨webpack.config.jsæ–‡ä»¶ä¸­é…ç½®ç›¸å…³çš„åº”ç”¨è§„åˆ™ï¼Œè§„åˆ™å¦‚ä¸‹ï¼š12345678 &#123; test: /\.(csv|tsv)$/, use: ['csv-loader']&#125;,&#123; test: /\.xml$/, use: ['xml-loader']&#125; æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨srcç›®å½•ä¸‹æ·»åŠ åä¸ºdata.xmlçš„æ•°æ®æ–‡ä»¶ï¼Œdata.xmlå†…å®¹å¦‚ä¸‹ï¼š æˆ‘ä»¬åœ¨main.jsæ–‡ä»¶ä¸­è§£ædata.xmlæ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œä¸»è¦å¢åŠ ä»¥ä¸‹ä¸¤è¡Œä»£ç ï¼š12import Data from './data.xml';console.log(Data); å†æ¬¡æ‰§è¡Œ$ webpackå‘½ä»¤åï¼Œå†æ¬¡åœ¨æµè§ˆå™¨ä¸Šæ‰“å¼€index.htmlæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ§åˆ¶å°è¾“å‡ºäº†data.xmlæ–‡ä»¶è§£æåçš„æ•°æ®ï¼š å¼€å‘Source Mapå½“ webpack æ‰“åŒ…æºä»£ç æ—¶ï¼Œå¯èƒ½ä¼šå¾ˆéš¾è¿½è¸ªåˆ°é”™è¯¯å’Œè­¦å‘Šåœ¨æºä»£ç ä¸­çš„åŸå§‹ä½ç½®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå°†ä¸‰ä¸ªæºæ–‡ä»¶ï¼ˆa.js, b.js å’Œ c.jsï¼‰æ‰“åŒ…åˆ°ä¸€ä¸ª bundleï¼ˆbundle.jsï¼‰ä¸­ï¼Œè€Œå…¶ä¸­ä¸€ä¸ªæºæ–‡ä»¶åŒ…å«ä¸€ä¸ªé”™è¯¯ï¼Œé‚£ä¹ˆå †æ ˆè·Ÿè¸ªå°±ä¼šç®€å•åœ°æŒ‡å‘åˆ° bundle.jsã€‚è¿™å¹¶é€šå¸¸æ²¡æœ‰å¤ªå¤šå¸®åŠ©ï¼Œå› ä¸ºä½ å¯èƒ½éœ€è¦å‡†ç¡®åœ°çŸ¥é“é”™è¯¯æ¥è‡ªäºå“ªä¸ªæºæ–‡ä»¶ã€‚ä¸ºäº†æ›´å®¹æ˜“åœ°è¿½è¸ªé”™è¯¯å’Œè­¦å‘Šï¼ŒJavaScript æä¾›äº† source map åŠŸèƒ½ï¼Œå°†ç¼–è¯‘åçš„ä»£ç æ˜ å°„å›åŸå§‹æºä»£ç ã€‚å¦‚æœä¸€ä¸ªé”™è¯¯æ¥è‡ªäº b.jsï¼Œsource map å°±ä¼šæ˜ç¡®çš„å‘Šè¯‰ä½ ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨webpack.config.jsæ–‡ä»¶ä¸­å†™å…¥ä»¥ä¸‹ä»£ç ï¼š1devtool: 'inline-source-map' å°±å¯ä»¥è¿½è¸ªæºæ–‡ä»¶ä¸­é”™è¯¯å’Œè­¦å‘Šçš„åŠŸèƒ½ã€‚ ä½¿ç”¨è§‚å¯Ÿæ¨¡å¼æ ¹æ®æ­¤åšæ–‡ä¸€æ­¥ä¸€æ­¥æ„å»ºä¸‹æ¥çš„èŒå‹ä¼šå‘ç°ï¼Œæ¯æ¬¡ä¿®æ”¹æºæ–‡ä»¶åï¼Œéƒ½è¦é‡æ–°ä½¿ç”¨$ webpackå‘½ä»¤å¯¹æ–‡ä»¶é‡æ–°è¿›è¡Œæ‰“åŒ…æ„å»ºï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†æˆ‘ä»¬çš„é‡å¤å·¥ä½œã€‚ä½¿ç”¨è§‚å¯Ÿæ¨¡å¼ï¼Œä½ å¯ä»¥æŒ‡ç¤º webpack â€œwatchâ€ ä¾èµ–å›¾ä¸­çš„æ‰€æœ‰æ–‡ä»¶ä»¥è¿›è¡Œæ›´æ”¹ã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªæ–‡ä»¶è¢«æ›´æ–°ï¼Œä»£ç å°†è¢«é‡æ–°ç¼–è¯‘ï¼Œæ‰€ä»¥ä½ ä¸å¿…æ‰‹åŠ¨è¿è¡Œæ•´ä¸ªæ„å»ºã€‚ä½ éœ€è¦åœ¨package.jsonæ–‡ä»¶ä¸­å¼•å…¥æ‰§è¡Œå‘½ä»¤ï¼š æ¥ç€ï¼Œä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ1$ npm run watch æ‰§è¡ŒæˆåŠŸåï¼Œä½ ä¼šçœ‹åˆ° webpack ç¼–è¯‘ä»£ç ï¼Œç„¶è€Œå´ä¸ä¼šé€€å‡ºå‘½ä»¤è¡Œã€‚è¿™æ˜¯å› ä¸º script è„šæœ¬è¿˜åœ¨è§‚å¯Ÿæ–‡ä»¶ï¼Œæ­¤æ—¶ä¿®æ”¹main.jsæ–‡ä»¶çš„å†…å®¹ï¼Œä½ ä¼šå‘ç°ä¸éœ€è¦é‡æ–°æ‰‹åŠ¨æ„å»ºç¨‹åºï¼Œä»£ç å·²ç»è¢«é‡æ–°ç¼–è¯‘äº†ã€‚ ä½¿ç”¨webpack-dev-serverwebpack-dev-server æä¾›äº†ä¸€ä¸ªç®€å•çš„ web æœåŠ¡å™¨ï¼Œèƒ½å¤Ÿå®æ—¶é‡æ–°åŠ è½½ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸‹è½½å®‰è£…æ¨¡å—1$ cnpm install --save-dev webpack-dev-server å®‰è£…æˆåŠŸåï¼Œæˆ‘ä»¬éœ€è¦åœ¨webpack.config.jsæ–‡ä»¶ä¸­å‘Šè¯‰å¼€å‘æœåŠ¡å™¨ï¼Œå»å“ªé‡ŒåŠ è½½æ–‡ä»¶123devServer: &#123; contentBase: './dist'&#125; ä»¥ä¸Šé…ç½®å‘ŠçŸ¥ webpack-dev-serverï¼Œåœ¨ localhost:8080 ä¸‹å»ºç«‹æœåŠ¡ï¼Œå°† dist ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œä½œä¸ºå¯è®¿é—®æ–‡ä»¶ã€‚ æ¥ç€ï¼Œè®©æˆ‘ä»¬åœ¨package.jsonæ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ª script è„šæœ¬ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œå¼€å‘æœåŠ¡å™¨ï¼š 1"start": "webpack-dev-server --open" ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ$ npm startï¼Œå°±ä¼šçœ‹åˆ°æµè§ˆå™¨è‡ªåŠ¨åŠ è½½é¡µé¢ã€‚å¦‚æœç°åœ¨ä¿®æ”¹å’Œä¿å­˜ä»»æ„æºæ–‡ä»¶ï¼Œweb æœåŠ¡å™¨å°±ä¼šè‡ªåŠ¨é‡æ–°åŠ è½½ç¼–è¯‘åçš„ä»£ç ã€‚ æ€»ç»“webpackçš„å­¦ä¹ æ—¶é—´è·¨åº¦å¾ˆé•¿ï¼Œwebpackè¦å­¦ä¹ çš„ä¸œè¥¿å¾ˆå¤šï¼Œç»§ç»­åŠ æ²¹å§ï½]]></content>
      <categories>
        <category>æ‰“åŒ…å·¥å…·</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[webpackï¼Œä¸€ä¸ªå¹¿æ³›åº”ç”¨çš„æ¨¡å—æ‰“åŒ…å™¨ï¼ˆä¸€ï¼‰â€”â€”æ¦‚å¿µç¯‡]]></title>
    <url>%2F2017%2F11%2F03%2Fwebpack%2F</url>
    <content type="text"><![CDATA[é‰´äºæˆ‘åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä½¿ç”¨webpackçš„é¢‘ç‡è¾ƒé«˜ï¼Œæ‰€ä»¥æƒ³ç€è¦è®°å½•ä¸€ä¸‹webpackçš„ä¸€äº›æ ¸å¿ƒçš„çŸ¥è¯†ç‚¹ï¼Œæ­¤åšæ–‡æ¶‰åŠçš„çŸ¥è¯†ç‚¹å¯èƒ½ä¸æ·±ï¼Œä½†æ¶µç›–äº†webpackçš„ä¸»è¦å†…å®¹ï¼Œä¸»è¦ç›®çš„æ˜¯æƒ³å°†æ­¤æ¬¡çš„å­¦ä¹ è¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œä»¥ä¾¿è¿›è¡Œåç»­çš„æ·±å…¥å­¦ä¹ ï¼Œå¦‚æœåœ¨ç†è§£ä¸Šæœ‰åå·®çš„è¯ï¼Œè¿˜è¯·å¤§å®¶ä¸åèµæ•™ï½ æ¦‚å¿µç¯‡æ ¸å¿ƒæ¦‚å¿µwebpack æ˜¯ä¸€ä¸ªç°ä»£JavaScriptåº”ç”¨ç¨‹åºçš„æ¨¡å—æ‰“åŒ…å™¨ã€‚å½“webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾ï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆå°‘é‡çš„bundle - é€šå¸¸åªæœ‰ä¸€ä¸ªï¼Œç”±æµè§ˆå™¨åŠ è½½ã€‚åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç†è§£å››ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼šå…¥å£(entry)ã€è¾“å‡º(output)ã€loaderã€æ’ä»¶(plugins)ã€‚ å…¥å£(Entry)webpackåˆ›å»ºåº”ç”¨ç¨‹åºæ‰€ä¾èµ–çš„å…³ç³»å›¾æ—¶ï¼Œå›¾çš„èµ·ç‚¹å°±æ˜¯æˆ‘ä»¬çš„å…¥å£èµ·ç‚¹ã€‚å…¥å£èµ·ç‚¹å‘Šè¯‰webpackä»å“ªé‡Œå¼€å§‹ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯appçš„ç¬¬ä¸€ä¸ªå¯åŠ¨æ–‡ä»¶ã€‚ å•å…¥å£è¯­æ³•ï¼Œç”¨æ³•ï¼šentry: string|Array 123module.exports = &#123; entry: '.src/app.js' //å°†srcç›®å½•ä¸‹çš„app.jsæ–‡ä»¶ä½œä¸ºå…¥å£æ–‡ä»¶&#125; å¯¹è±¡è¯­æ³•ï¼Œç”¨æ³•ï¼šentry: {[entryChunkName: string]: string|Array}å¯¹è±¡è¯­æ³•å¸¸ç”¨äºï¼šå¤šé¡µé¢åº”ç”¨ç¨‹åºï¼Œå¦‚ 1234567module.exports = &#123; entry: &#123; pageOne: './src/pageOne/index.js', pageTwo: './src/pageTwo/index.js', pageThree: './src/pageThree/index.js' &#125;&#125; è¡¨é¢ä¸Šå‘Šè¯‰æˆ‘ä»¬ï¼Œwebpackéœ€è¦åˆ›å»º3ä¸ªä¾èµ–å›¾ï¼Œè¿™äº›ä¾èµ–å›¾å½¼æ­¤ä¹‹é—´å®Œæˆåˆ†ç¦»ï¼Œäº’ç›¸ç‹¬ç«‹çš„ã€‚ç”±äºå…¥å£èµ·ç‚¹å¢å¤šï¼Œå¤šé¡µåº”ç”¨èƒ½å¤Ÿå¤ç”¨å…¥å£èµ·ç‚¹ä¹‹é—´çš„å¤§é‡ä»£ç /æ¨¡å—ï¼Œä»è€Œå¯ä»¥æå¤§åœ°ä»è¿™äº›æŠ€æœ¯ä¸­å—ç›Šã€‚ å‡ºå£(Output)å°†æ‰€æœ‰æ–‡ä»¶å½’æ‹¢åï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰webpackå¦‚ä½•å¤„ç†è¿™äº›å½’æ‹¢åœ¨ä¸€èµ·çš„æ–‡ä»¶ã€‚123456789const path = require('path'); //å¼•å…¥pathå¯¹è±¡module.exports = &#123; entry: '.src/app.js', output: &#123; path: path.resolve(__dirname, 'dist'), filename: 'webpack.bundle.js' &#125;&#125;; å¤šä¸ªå…¥å£èµ·ç‚¹ï¼šå‡ºå£å¤„åº”è¯¥ä½¿ç”¨å ä½ç¬¦æ¥ç¡®ä¿æ¯ä¸ªæ–‡ä»¶å…·æœ‰å”¯ä¸€çš„åç§°ã€‚12345678910module.exports = &#123; entry: &#123; app: __dirname + '.src/app.js', search: __dirname + './src/search.js' &#125;, output: &#123; path: __dirname + '/dist', filename: 'bundle-[name].js' //distç›®å½•ä¸‹å°†ç”Ÿæˆ"bundle-app.js"å’Œ"bundle-search.js"æ–‡ä»¶ &#125;&#125;; æˆ‘ä»¬é€šè¿‡output.filenameå’Œoutput.pathå±æ€§ï¼Œæ¥å‘Šè¯‰è¾“å‡ºæ–‡ä»¶çš„åç§°ä»¥åŠè·¯å¾„ã€‚ LoaderwebpackæŠŠæ¯ä¸ªæ–‡ä»¶(.css, .html, .less, .scss, .jpgç­‰)éƒ½ä½œä¸ºæ¨¡å—å¤„ç†ï¼Œç„¶è€Œ webpack è‡ªèº«åªç†è§£ JavaScriptã€‚loader å¯ä»¥ä½¿ä½ åœ¨ import æˆ–â€åŠ è½½â€æ¨¡å—æ—¶é¢„å¤„ç†æ–‡ä»¶ã€‚loaderåœ¨æ–‡ä»¶è¢«æ·»åŠ åˆ°ä¾èµ–å›¾ä¸­æ—¶ï¼Œå°†æ–‡ä»¶è½¬æ¢ä¸ºæ¨¡å—ã€‚ è¯†åˆ«å‡ºåº”è¯¥è¢«å¯¹åº”çš„loaderè¿›è¡Œè½¬æ¢çš„æ–‡ä»¶ã€‚(testå±æ€§) è½¬æ¢è¿™äº›æ–‡ä»¶ï¼Œä»è€Œä½¿å…¶èƒ½å¤Ÿè¢«æ·»åŠ åˆ°ä¾èµ–å›¾ä¸­ï¼ˆå¹¶ä¸”æœ€ç»ˆæ·»åŠ åˆ° bundle ä¸­ï¼‰ã€‚(useå±æ€§) åœ¨ä½¿ç”¨å‰ï¼Œæˆ‘ä»¬éœ€è¦æå‰å®‰è£…ç›¸å¯¹åº”çš„loaderï¼Œå¦‚ï¼š1$ cnpm install --save-dev vue-loader 1234567891011121314const path = require('path'); //å¼•å…¥pathå¯¹è±¡module.exports = &#123; entry: '.src/app.js', output: &#123; path: path.resolve(__dirname, 'dist'), filename: 'webpack.bundle.js' &#125;, module: &#123; rules: [ &#123; test: /\.vue$/,loader: 'vue-loader' &#125; //ç”¨æ¥è§£ævueåç¼€çš„æ–‡ä»¶ ] &#125;&#125;; åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸‰ç§ä½¿ç”¨loaderçš„æ–¹æ³•ï¼š é…ç½®ï¼ˆæ¨èï¼‰ï¼šåœ¨webpack.config.jsæ–‡ä»¶ä¸­æŒ‡å®šloaderã€‚ å†…è”ï¼šåœ¨æ¯ä¸ª import è¯­å¥ä¸­æ˜¾å¼æŒ‡å®š loaderï¼Œå¦‚ï¼š 1import Styles from 'style-loader!css-loader?modules!./styles.css'; CLIï¼šåœ¨ shell å‘½ä»¤ä¸­æŒ‡å®šå®ƒä»¬ï¼Œå¦‚ï¼š 1webpack --module-bind jade-loader --module-bind 'css=style-loader!css-loader' æ’ä»¶(Plugins)ç”±äºloaderä»…åœ¨æ¯ä¸ªæ–‡ä»¶çš„åŸºç¡€ä¸Šæ‰§è¡Œè½¬æ¢ï¼Œè€Œæ’ä»¶æ›´å¸¸ç”¨äºï¼ˆä½†ä¸é™äºï¼‰åœ¨æ‰“åŒ…æ¨¡å—çš„ â€œcompilationâ€ å’Œ â€œchunkâ€ ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œæ“ä½œå’Œè‡ªå®šä¹‰åŠŸèƒ½ã€‚æƒ³è¦ä½¿ç”¨ä¸€ä¸ªæ’ä»¶ï¼Œä½ åªéœ€è¦ require() å®ƒï¼Œç„¶åæŠŠå®ƒæ·»åŠ åˆ° plugins æ•°ç»„ä¸­ï¼Œå¤šæ•°æ’ä»¶å¯ä»¥é€šè¿‡é€‰é¡¹(option)è‡ªå®šä¹‰ã€‚æ’ä»¶ç›®çš„åœ¨äºè§£å†³loaderæ— æ³•å®ç°çš„å…¶ä»–äº‹ã€‚ç”±äºæ’ä»¶å¯ä»¥æºå¸¦å‚æ•°/é€‰é¡¹ï¼Œä½ å¿…é¡»åœ¨webpacké…ç½®ä¸­ï¼Œå‘pluginså±æ€§ä¼ å…¥ new å®ä¾‹ã€‚1234567891011121314151617181920const HtmlWebpackPlugin = require('html-webpack-plugin'); //é€šè¿‡ npm å®‰è£…const webpack = require('webpack'); //è®¿é—®å†…ç½®çš„æ’ä»¶const path = require('path'); //å¼•å…¥pathå¯¹è±¡module.exports = &#123; entry: '.src/app.js', output: &#123; path: path.resolve(__dirname, 'dist'), filename: 'webpack.bundle.js' &#125;, module: &#123; rules: [ &#123; test: /\.vue$/,loader: 'vue-loader' &#125; //ç”¨æ¥è§£ævueåç¼€çš„æ–‡ä»¶ ] &#125;, plugins: [ new webpack.optimize.UglifyJsPlugin(), new HtmlWebpackPlugin(&#123;template: './src/index.html'&#125;) ]&#125;; æ¨¡å—(Modules)åœ¨æ¨¡å—åŒ–ç¼–ç¨‹ä¸­ï¼Œå¼€å‘è€…å°†ç¨‹åºåˆ†è§£æˆç¦»æ•£åŠŸèƒ½å—ï¼Œå¹¶ç§°ä¹‹ä¸ºæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—å…·æœ‰æ¯”å®Œæ•´ç¨‹åºæ›´å°çš„æ¥è§¦é¢ï¼Œä½¿å¾—æ ¡éªŒã€è°ƒè¯•ã€æµ‹è¯•è½»è€Œæ˜“ä¸¾ã€‚å¯¹æ¯”Node.jsæ¨¡å—ï¼Œwebpackæ¨¡å—èƒ½å¤Ÿä»¥å„ç§æ–¹å¼è¡¨è¾¾å®ƒä»¬çš„ä¾èµ–å…³ç³»ï¼Œå¦‚ï¼š ES2015 importè¯­å¥ CommonJS require()è¯­å¥ AMD defineå’Œrequireè¯­å¥ css/sass/less æ–‡ä»¶ä¸­çš„ @import è¯­å¥ æ ·å¼(url(â€¦))æˆ– HTML æ–‡ä»¶imgæ ‡ç­¾ä¸­çš„å›¾ç‰‡é“¾æ¥ webpack é€šè¿‡ loader å¯ä»¥æ”¯æŒå„ç§è¯­è¨€å’Œé¢„å¤„ç†å™¨ç¼–å†™æ¨¡å—ã€‚ æ¨¡å—è§£æresolveræ˜¯ä¸€ä¸ªåº“ï¼Œç”¨äºå¸®åŠ©æ‰¾åˆ°æ¨¡å—çš„ç»å¯¹è·¯å¾„ã€‚ä½¿ç”¨enhanced-resolveï¼Œwebpack èƒ½å¤Ÿè§£æä¸‰ç§æ–‡ä»¶è·¯å¾„ï¼š ç»å¯¹è·¯å¾„1import "C:\\Users\\user\\file"; ç”±äºæˆ‘ä»¬å·²ç»å–å¾—äº†æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œå› æ­¤ä¸éœ€è¦è¿›ä¸€æ­¥åœ¨åšè§£æã€‚ ç›¸å¯¹è·¯å¾„1import "../src/file1"; åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨importæˆ–requireçš„èµ„æºæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•è¢«è®¤ä¸ºæ˜¯ä¸Šä¸‹æ–‡ç›®å½•ï¼Œåœ¨import/requireä¸­ç»™å®šçš„ç›¸å¯¹è·¯å¾„ï¼Œä¼šæ·»åŠ æ­¤ä¸Šä¸‹æ–‡è·¯å¾„ï¼Œä»¥äº§ç”Ÿæ¨¡å—çš„ç»å¯¹è·¯å¾„ã€‚ æ¨¡å—è·¯å¾„1import "module/lib/file"; æ¨¡å—å°†åœ¨resolve.modulesä¸­æŒ‡å®šçš„æ‰€æœ‰ç›®å½•å†…æœç´¢ã€‚ æ„å»ºç›®æ ‡(Targets)å› ä¸ºæœåŠ¡å™¨å’Œæµè§ˆå™¨ä»£ç éƒ½å¯ä»¥ç”¨JavaScriptç¼–å†™ï¼Œæ‰€ä»¥webpackæä¾›äº†å¤šç§æ„å»ºç›®æ ‡ã€‚123module.exports = &#123; target: 'node' //webpackä¼šç¼–è¯‘ä¸ºç”¨äºã€Œç±»Node.jsã€ç¯å¢ƒ&#125;; å¤šä¸ªTargetï¼šå°½ç®¡webpackä¸æ”¯æŒå‘targetä¼ å…¥å¤šä¸ªå­—ç¬¦ä¸²ï¼Œä½ å¯ä»¥é€šè¿‡æ‰“åŒ…ä¸¤ä»½åˆ†ç¦»çš„é…ç½®æ¥åˆ›å»ºåŒæ„çš„åº“ï¼š1234567891011121314151617181920const path = require('path');const serverConfig = &#123; target: 'node', output: &#123; path: path.resolve(__dirname, 'dist'), filename: 'lib.node.js' &#125; //â€¦&#125;;const clientConfig = &#123; target: 'web', // é»˜è®¤æ˜¯ 'web'ï¼Œå¯çœç•¥ output: &#123; path: path.resolve(__dirname, 'dist'), filename: 'lib.js' &#125; //â€¦&#125;;module.exports = [ serverConfig, clientConfig ]; ä¸Šé¢çš„ä¾‹å­å°†åœ¨ä½ çš„distæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºlib.jså’Œlib.node.jsæ–‡ä»¶ã€‚ æ¨¡å—çƒ­æ›¿æ¢æ¨¡å—çƒ­æ›¿æ¢åŠŸèƒ½ä¼šåœ¨åº”ç”¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­æ›¿æ¢ã€æ·»åŠ æˆ–åˆ é™¤æ¨¡å—ï¼Œè€Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ã€‚ä¸»è¦æ˜¯é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼Œæ¥æ˜¾è‘—åŠ å¿«å¼€å‘é€Ÿåº¦ï¼š ä¿ç•™åœ¨å®Œå…¨é‡æ–°åŠ è½½é¡µé¢æ—¶ä¸¢å¤±çš„åº”ç”¨ç¨‹åºçŠ¶æ€ã€‚ åªæ›´æ–°å˜æ›´å†…å®¹ï¼Œä»¥èŠ‚çœå®è´µçš„å¼€å‘æ—¶é—´ã€‚ è°ƒæ•´æ ·å¼æ›´åŠ å¿«é€Ÿ - å‡ ä¹ç›¸å½“äºåœ¨æµè§ˆå™¨è°ƒè¯•å™¨ä¸­æ›´æ”¹æ ·å¼ã€‚ æ€»ç»“webpackæ¦‚å¿µç¯‡å°±å·®ä¸å¤šç»“æŸå•¦ï¼Œå…¶ä¸­åŒ…å«webpackä¸­æ ¸å¿ƒçš„å‡ ä¸ªæ¦‚å¿µä»¥åŠå„è‡ªçš„ç”¨æ³•ï¼Œæ¥ä¸‹æ¥æˆ‘å°†ç»§ç»­è®°å½•webpackç®¡ç†èµ„æºçš„ç›¸å…³çŸ¥è¯†ç‚¹ï¼Œå¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï½]]></content>
      <categories>
        <category>æ‰“åŒ…å·¥å…·</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[babelï¼Œä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„è½¬ç å™¨]]></title>
    <url>%2F2017%2F11%2F01%2Fbabel%2F</url>
    <content type="text"><![CDATA[éšç€JavaScriptçš„é£é€Ÿå‘å±•ï¼Œæµè§ˆå™¨çš„å‘å±•é€Ÿåº¦å´ä¸èƒ½ä¸ä¹‹ç›¸åŒ¹é…ï¼Œä¸ºäº†èƒ½å¤Ÿåœ¨ç°æœ‰çš„æµè§ˆå™¨ä¸Šä½¿ç”¨jsæ–°çš„è¯­æ³•å’Œæ–°çš„æ•°æ®ç±»å‹ï¼Œè¿™æ—¶æˆ‘ä»¬ä¾¿éœ€è¦ä¸€ä¸ªè½¬ç å™¨ã€‚Babelæ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„è½¬ç å™¨ï¼Œå¯ä»¥å°†ES6ä»£ç è½¬ä¸ºES5ä»£ç ã€‚Babelèƒ½å°†æœ€æ–°æ ‡å‡†çš„JavaScriptä»£ç å‘ä¸‹ç¼–è¯‘æˆæµè§ˆå™¨æ™®éæ”¯æŒçš„ç‰ˆæœ¬ï¼Œå®ç°äº†â€œæºç åˆ°æºç â€ç¼–è¯‘ã€‚æ¯”å¦‚ï¼ŒBabelèƒ½å°†æ–°çš„ES2015çš„ç®­å¤´å‡½æ•°è¯­æ³•ï¼š1const area = n =&gt; n * n; è½¬è¯‘ä¸º123const area = function area(n)&#123; return n * n;&#125;; å› ä¸ºåœ¨å­¦ä¹ Vueç­‰è¿‡ç¨‹ä¸­æ¶‰åŠåˆ°Babelçš„ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œæ‰€ä»¥æƒ³ç€å¤§æ¦‚äº†è§£ä¸€ä¸‹Babelçš„ä¸»è¦å†…å®¹ä»¥åŠåŸºæœ¬ç”¨æ³•ï¼Œæ–‡ç« å†…å®¹æ¶‰åŠä¸æ·±ï¼Œå¦‚æœåœ¨ç†è§£å’Œç”¨æ³•ä¸Šæœ‰åå·®çš„è¯ï¼Œè¿˜è¯·å¤§å®¶ä¸åèµæ•™ï½ å‰æœŸå‡†å¤‡åˆå§‹åŒ–é¡¹ç›®åœ¨ä¹ æƒ¯çš„å·¥ä½œç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæˆ‘å–åä¸ºbabel-blogï¼Œä½¿ç”¨å‘½ä»¤è¡Œè¿›å…¥babel-blogçš„å·¥ä½œç›®å½•ï¼Œæ‰§è¡Œ1$ npm init // åˆå§‹åŒ–å¹¶åˆ›å»ºpackage.jsonæ–‡ä»¶ å¯ä»¥çœ‹åˆ°åœ¨babel-blogé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºäº†åä¸ºpackage.jsonçš„æ–‡ä»¶ã€‚ å®‰è£…Babelå‘½ä»¤è¡Œå·¥å…·å®‰è£…babelçš„å‘½ä»¤è¡Œå·¥å…·çš„ç›®çš„æ˜¯ä¸ºäº†åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨babelã€‚babelå‘½ä»¤è¡Œå·¥å…·å¯ä»¥å…¨å±€å®‰è£…ä¹Ÿå¯ä»¥æœ¬åœ°å®‰è£…ï¼Œå®˜æ–¹æ–‡æ¡£æ¨èæœ¬åœ°å®‰è£…ï¼ŒåŸå› æœ‰2ç‚¹ï¼š æœ¬åœ°å®‰è£…ä¸åŒçš„é¡¹ç›®å¯ä»¥ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„babelï¼Œä½ ä¹Ÿå¯ä»¥å•ç‹¬å¯¹æŸä¸ªé¡¹ç›®çš„babelè¿›è¡Œå‡çº§ç­‰æ“ä½œ æ¯ä¸ªé¡¹ç›®å•ç‹¬å®‰è£…çš„æ„å‘³ç€å¯¹è®¡ç®—æœºç¯å¢ƒæ²¡æœ‰ä¾èµ–ï¼Œä¾¿äºç§»æ¤ è¿™é‡Œå»ºè®®å¤§å®¶å¯ä»¥ä¸‹è½½å®‰è£…ä¸€ä¸‹cnpmæ·˜å®npmé•œåƒï¼Œå› ä¸ºnpmå®‰è£…æ’ä»¶æ˜¯ä»å›½å¤–æœåŠ¡å™¨ä¸‹è½½ï¼Œå—ç½‘ç»œå½±å“å¤§ï¼Œå¯èƒ½å‡ºç°å¼‚å¸¸ï¼Œä½¿ç”¨cnpmçš„è¯å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜æˆ‘ä»¬æ¨¡å—çš„ä¸‹è½½å®‰è£…é€Ÿåº¦1$ npm install -g cnpm --registry=https://registry.npm.taobao.org æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨babel-blogé¡¹ç›®ä¸­å®‰è£…babelå‘½ä»¤è¡Œå·¥å…·1$ cnpm install --save-dev babel-cli å®‰è£…æˆåŠŸåï¼Œå¯ä»¥åœ¨package.jsonæ–‡ä»¶ä¸­çœ‹åˆ°åä¸ºbabel-cliçš„ä¾èµ–åŒ… æœ¬åœ°å®‰è£…çš„babelæ˜¯ä¸èƒ½å¤Ÿåœ¨ç›´æ¥å‘½ä»¤è¡Œä¸­è¿è¡Œçš„ï¼Œä¸ºäº†åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œbabelï¼Œæˆ‘ä»¬å¯ä»¥é…ç½®package.jsonæ–‡ä»¶ä¸‹çš„scripté€‰é¡¹1"build": "babel src -d lib" é…ç½®æˆåŠŸåï¼Œå½“æˆ‘ä»¬åœ¨ç»ˆç«¯è¿è¡Œnpm run buildæ—¶å°±ä¼šåœ¨å‘½ä»¤è¡Œæ‰§è¡Œbabel src -d libï¼Œè¿™ä¹Ÿæ„å‘³ç€æˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªåä¸ºsrcçš„æ–‡ä»¶å¤¹ï¼ˆpsï¼šå¦‚æœç°åœ¨æ‰§è¡Œçš„è¯ï¼Œé¡¹ç›®ä¼šæŠ¥é”™ï¼Œå®ƒä¼šæç¤ºæˆ‘ä»¬srcä¸å­˜åœ¨ï¼Œå› ä¸ºæˆ‘ä»¬é™¤äº†å®‰è£…äº†babel-cliå…¶ä»–éƒ½è¿˜æ²¡æœ‰åšå‘¢ï½ï¼‰ .babelrcé…ç½®æ–‡ä»¶Babelçš„é…ç½®æ–‡ä»¶æ˜¯.babelrcï¼Œå­˜æ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ã€‚ä½¿ç”¨Babelçš„ç¬¬ä¸€æ­¥ï¼Œå°±æ˜¯é…ç½®è¿™ä¸ªæ–‡ä»¶ã€‚è¯¥æ–‡ä»¶ç”¨æ¥è®¾ç½®è½¬ç è§„åˆ™å’Œæ’ä»¶ï¼ŒåŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š1234&#123; "presets": [], "plugins": []&#125; presetså­—æ®µè®¾å®šè½¬ç è§„åˆ™ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®ä¸­å®‰è£…ES2015çš„è½¬ç è§„åˆ™12# ES2015è½¬ç è§„åˆ™$ cnpm install --save-dev babel-preset-es2015 ç„¶åå°†å®‰è£…çš„è§„åˆ™åŠ å…¥.babelrcæ–‡ä»¶ä¸­1234&#123; "presets": ["es2015"], "plugins": [] &#125; æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºåä¸ºsrcçš„æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åˆ›å»ºä¸€ä¸ªåä¸ºindex.jsæ–‡ä»¶ï¼Œæˆ‘ä»¬å°±æ‹¿æœ€å¼€å§‹çš„areaç®­å¤´å‡½æ•°æ¥è¿›è¡Œæ¼”ç¤ºï¼š123const area = n =&gt; n * n;console.log(area(4)); æ¥ä¸‹æ¥ï¼Œä½ å°±å¯ä»¥åœ¨å‘½ä»¤è¡Œæ‰§è¡Œnpm run buildå‘½ä»¤äº†ï¼Œæ‰§è¡ŒæˆåŠŸåä½ å¯ä»¥å‘ç°ï¼Œåœ¨æ ¹ç›®å½•ä¸‹ç”Ÿæˆäº†ä¸€ä¸ªåä¸ºlibçš„æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªindex.jsæ–‡ä»¶ï¼Œå†…å®¹å°±æ˜¯srcä¸‹index.jsé€šè¿‡babelè½¬ç ç”Ÿæˆçš„ä»£ç  åˆ°è¿™é‡Œæˆ‘ä»¬å°±å·²ç»å­¦ä¼šäº†ä½¿ç”¨babelæ¥è¿›è¡Œç®€å•çš„è½¬ç åŠŸèƒ½ã€‚æ˜¯ä¸æ˜¯è§‰å¾—å¾ˆç®€å•å‘¢ï½ Babelæ‰©å±•Babelä¸­æœ‰å¾ˆå¤šåŒ…ï¼Œå¸¸ç”¨çš„åŒ…æœ‰babel-node, babel-register, babel-core, babel-polyfillç­‰ï¼Œè¿™äº›åœ¨å®é™…åº”ç”¨ä¸­ç”¨çš„é¢‘ç‡éƒ½æ˜¯å¾ˆé«˜çš„ã€‚ babel-nodebable-nodeæ˜¯babel-cliè‡ªå¸¦çš„å‘½ä»¤ï¼Œæä¾›äº†ä¸€ä¸ªæ”¯æŒES6çš„REPLç¯å¢ƒï¼Œå®ƒæ”¯æŒnodeçš„REPLç¯å¢ƒçš„æ‰€æœ‰åŠŸèƒ½ï¼Œè€Œä¸”å¯ä»¥ç›´æ¥è¿è¡ŒES6ä»£ç ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦å…¨å±€å®‰è£…babel-cliã€‚1$ cnpm install --save-dev -g babel-cli å®‰è£…æˆåŠŸåï¼Œè¾“å…¥babel-node,PEPLç¯å¢ƒæˆ–è€…ç›´æ¥æ‰§è¡Œjsæ–‡ä»¶1$ babel-node æ–‡ä»¶è·¯å¾„/æ–‡ä»¶å.åç¼€ babel-registerbabel-registeræ¨¡å—æ”¹å†™requireå‘½ä»¤ï¼Œä¸ºå®ƒåŠ ä¸Šä¸€ä¸ªé’©å­ã€‚æ­¤åï¼Œæ¯å½“ä½¿ç”¨requireåŠ è½½.jsã€.jsxã€.eså’Œ.es6åç¼€åçš„æ–‡ä»¶ï¼Œå°±ä¼šå…ˆç”¨Babelè¿›è¡Œè½¬ç ã€‚1$ cnpm install --save-dev babel-register ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ç›´æ¥åœ¨åˆšåˆšæ–°å»ºçš„babel-blogé¡¹ç›®ä¸­srcæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªregister.jsæ–‡ä»¶1console.log("Hello babel-register!"); å¦‚æœæˆ‘ä»¬ç”¨ node register.js æ¥è¿è¡Œå®ƒæ˜¯ä¸ä¼šä½¿ç”¨ Babel æ¥ç¼–è¯‘çš„ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦è®¾ç½® babel-registerï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºconsole.jsçš„æ–‡ä»¶ï¼Œå¹¶å¼•å…¥babel-registerä»¥åŠregister.jsæ–‡ä»¶12require("babel-register");require("./src/register"); æ­¤æ—¶æ‰§è¡Œ1$ node console.js å¯ä»¥å‘ç°å‘½ä»¤è¡Œè¾“å‡ºäº†register.jsæ–‡ä»¶ä¸­çš„å†…å®¹ â€œHello babel-register!â€ã€‚è¿™æ ·åšå¯ä»¥æŠŠ Babel æ³¨å†Œåˆ° Node çš„æ¨¡å—ç³»ç»Ÿä¸­å¹¶å¼€å§‹ç¼–è¯‘å…¶ä¸­ require çš„æ‰€æœ‰æ–‡ä»¶ã€‚ babel-coreå¦‚æœæŸäº›ä»£ç éœ€è¦è°ƒç”¨Babelçš„APIè¿›è¡Œè½¬ç ï¼Œå°±è¦ä½¿ç”¨babel-coreæ¨¡å—ã€‚å€Ÿç”¨é˜®ä¸€å³°è€å¸ˆçš„ä¾‹å­ï¼š(å­—ç¬¦ä¸²è½¬ç )transformæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºéœ€è¦è½¬æ¢çš„ES6ä»£ç ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è½¬æ¢çš„é…ç½®å¯¹è±¡ã€‚ babel-polyfillBabelé»˜è®¤åªè½¬æ¢æ–°çš„JavaScriptå¥æ³•ï¼ˆsyntaxï¼‰ï¼Œè€Œä¸è½¬æ¢æ–°çš„APIï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¿…é¡»è¦ä½¿ç”¨babel-polyfillï¼Œä¸ºå½“å‰ç¯å¢ƒæä¾›ä¸€ä¸ªå«ç‰‡ã€‚ Babelä¸å…¶ä»–å·¥å…·é›†æˆBabelå¯ä»¥ä¸å¾ˆå¤šæ„å»ºå·¥å…·ï¼ˆå¦‚ Browserifyã€Gruntã€Gulpã€Webpackç­‰ï¼‰è¿›è¡Œé›†æˆã€‚å…³äºbabelä¸Webpackæ„å»ºå·¥å…·çš„é›†æˆï¼Œåœ¨æˆ‘ä½¿ç”¨webpackæ­å»ºvueé¡¹ç›®â€”â€”å…¥é—¨åšå®¢ä¸­å°±æœ‰ä½¿ç”¨åˆ°ã€‚ é›†æˆWebpack babel-preset-envï¼Œè½¬è¯‘å™¨ï¼Œæœ€å¸¸ç”¨çš„è½¬è¯‘å™¨ã€‚é€šè¿‡åœ¨.babelrcä¸­é…ç½®envé€‰é¡¹ï¼Œå¯ä»¥è®©ä»£ç å…¼å®¹ä¸åŒç‰ˆæœ¬çš„æµè§ˆå™¨æˆ–è€…nodeã€‚ è¿™é‡Œæˆ‘å°†ä½¿ç”¨åŸå…ˆçš„babel-blogé¡¹ç›®ï¼Œå¹¶å°†libæ–‡ä»¶å¤¹ï¼Œsrcæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶åˆ é™¤ä»…ä¿ç•™å¼€å§‹çš„index.jsæ–‡ä»¶ï¼Œå½“å‰ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š è¿›å…¥é¡¹ç›®å·¥ä½œç›®å½•ï¼Œå®‰è£…webpackï¼Œbabel-preset-envå’Œbabel-loader123$ cnpm install --save-dev webpack$ cnpm install --save-dev babel-preset-env$ cnpm install --save-dev babel-loader å®‰è£…æˆåŠŸåï¼Œå¯ä»¥åœ¨package.jsonæ–‡ä»¶ä¸­çœ‹åˆ°ç›¸åº”çš„ä¾èµ–åŒ…ã€‚ æ¥ä¸‹æ¥åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºwebpack.config.jsæ–‡ä»¶ entryä¸ºå…¥å£æ–‡ä»¶ï¼Œæˆ‘ä»¬é€‰æ‹©å½“å‰ç›®å½•ä¸‹ï¼Œsrcæ–‡ä»¶å¤¹ä¸‹çš„index.jsæ–‡ä»¶ä½œä¸ºå…¥å£ã€‚outputä¸ºè¾“å‡ºé€‰é¡¹ï¼Œpathä¸ºè¾“å‡ºçš„ç›®å½•ï¼Œfilenameä¸ºè¾“å‡ºæ–‡ä»¶åã€‚æ„Ÿå…´è¶£çš„æœ‹å‹ä»¬å¯ä»¥æˆ³æˆ³Webpackä¸­æ–‡æ–‡æ¡£è¿›è¡Œå­¦ä¹ å“¦ï½ æœ€é‡è¦çš„ä¸€ç‚¹ï¼šæˆ‘ä»¬è¦è®°å¾—åœ¨.babelrcæ–‡ä»¶ä¸­è®¾å®šç›¸åº”çš„è½¬ç è§„åˆ™å“¦ åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ1$ webpack è¿è¡ŒæˆåŠŸåï¼Œå¯ä»¥å‘ç°åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºäº†åä¸ºpublicæ–‡ä»¶å¤¹ï¼Œä»¥åŠåä¸ºindex.output.jsè¾“å‡ºæ–‡ä»¶ é€šè¿‡é›†æˆwebpackæ„å»ºå·¥å…·ï¼Œå¯ä»¥å°†è½¬ç åçš„æ–‡ä»¶æ‰“åŒ…ã€‚ æ€»ç»“å†™è¿™ç¯‡åšæ–‡çš„é€»è¾‘æ€§å¯èƒ½ä¸æ˜¯å¾ˆå¼ºï¼Œä¸»è¦æ˜¯è¾¹å­¦ä¹ è¾¹è®°å½•ï¼ŒæŠŠBabelä¸»è¦çš„çŸ¥è¯†ç‚¹è®°å½•ä¸‹æ¥ï¼Œä½œä¸ºBabelçš„ä¸€ç¯‡å­¦ä¹ ç¬”è®°ï¼Œä»¥ä¾¿åç»­çš„æ·±å…¥å­¦ä¹ ï¼Œè¿™é‡Œæ¨èä¸€ä¸‹é˜®ä¸€å³°è€å¸ˆçš„ Babelå…¥é—¨æ¨èæ•™ç¨‹ï¼Œè¿™ç¯‡åšæ–‡é‡Œé¢å¾ˆå¤šçŸ¥è¯†ç‚¹éƒ½æ¥è‡ªé˜®ä¸€å³°è€å¸ˆçš„æ¨èè¯¾ç¨‹ï½ å¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï½]]></content>
      <categories>
        <category>è½¬ç å·¥å…·</category>
      </categories>
      <tags>
        <tag>babel</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨iconfontåˆ›å»ºé¡¹ç›®å›¾æ ‡]]></title>
    <url>%2F2017%2F10%2F31%2Ficonfont%2F</url>
    <content type="text"><![CDATA[åœ¨å­¦ä¹ ä»–äººç½‘ç«™ä»£ç æ—¶ï¼Œæˆ‘å¸¸å¸¸ä¼šå‘ç°å‰ç«¯å¼€å‘äººå‘˜ä¹ æƒ¯ä½¿ç”¨1&lt;i class="iconfont icon-time"&gt;&lt;/i&gt; æ¥ç”Ÿæˆé¡µé¢çš„å›¾æ ‡ï¼Œè¿™æ‰“ç ´äº†æˆ‘ä»¬ä¼ ç»Ÿçš„æ–¹å¼â€”â€”å°†iconå›¾æ ‡ä»¥pngç­‰å›¾ç‰‡çš„å½¢å¼ä¸‹è½½ä¸‹æ¥ï¼Œç„¶åé€šè¿‡imgæ ‡ç­¾å¼•å…¥é¡µé¢ä¸­ã€‚åœ¨åˆšå¼€å§‹æ¥è§¦åˆ°è¿™ç§æ–¹å¼æ—¶ï¼Œæˆ‘æ„Ÿåˆ°ä¸è§£ï¼Œæƒ³è¦è¯•å›¾åœ¨cssæ–‡ä»¶ä¸­æ‰¾åˆ°ç›¸åº”ç±»çš„æ ·å¼è®¾ç½®ï¼Œè®¤ä¸ºæ˜¯åœ¨cssä¸­è®¾ç½®äº†èƒŒæ™¯å›¾ï¼Œæ‰¾å¯»æ— æœâ€¦æœ€è¿‘æƒ³è¦å……å®ä¸€ä¸‹ä¸ªäººåšå®¢ï¼Œä¹Ÿå°±æƒ³ç€è¦æŠŠè¿™æ¬¡å­¦ä¹ çš„å¿ƒè·¯å†ç¨‹è®°å½•ä¸‹æ¥ï¼Œä»¥ä¾›åç»­çš„æ·±å…¥å­¦ä¹ ã€‚åˆæ¬¡å­¦ä¹ å¯èƒ½æœ‰äº›åœ°æ–¹è®²è§£çš„ä¸æ˜¯å¾ˆç»†è‡´ï¼Œè¿˜è¯·å„ä½ä¸åèµæ•™ï½ ä½¿ç”¨Iconfontçš„ä¼˜ç‚¹Iconfontå…¶å®å°±æ˜¯æŒ‡ç”¨å­—ä½“æ–‡ä»¶å–ä»£å›¾ç‰‡æ–‡ä»¶ï¼Œæ¥å±•ç¤ºå›¾æ ‡ã€ç‰¹æ®Šå­—ä½“ç­‰å…ƒç´ çš„ä¸€ç§æ–¹æ³•ã€‚ä¸»è¦æœ‰ä»¥ä¸‹4ä¸ªä¼˜ç‚¹ åŠ è½½æ–‡ä»¶ä½“ç§¯å°ï¼Œæé«˜åŠ è½½é€Ÿåº¦ å¯ä»¥ç›´æ¥é€šè¿‡cssçš„font-sizeï¼Œcolorä¿®æ”¹å®ƒçš„å¤§å°å’Œé¢œè‰²ï¼Œå¯ä»¥ç¼©æ”¾å¤šä¸ªå°ºå¯¸çš„å›¾æ ‡ï¼Œæé«˜å›¾æ ‡çš„å¯å¤ç”¨æ€§ æ”¯æŒä¸€äº›css3å¯¹æ–‡å­—çš„æ•ˆæœï¼Œä¾‹å¦‚ï¼šé˜´å½±ã€æ—‹è½¬ã€é€æ˜åº¦ç­‰ å…¼å®¹ä½ç‰ˆæœ¬æµè§ˆå™¨ç›¸å¯¹äºæˆ‘ä»¬ä¼ ç»Ÿçš„å°†iconä¸‹è½½ä¸ºå›¾ç‰‡çš„å½¢å¼ï¼Œä½¿ç”¨iconfontç¡®å®æ–¹ä¾¿ä¸å°‘ã€‚å½“æˆ‘ä»¬é¡¹ç›®è¦ä¿®æ”¹ä¸»è‰²è°ƒæ—¶ï¼Œiconfontåªéœ€è¦ä¿®æ”¹cssä¸­é¢œè‰²å±æ€§å³å¯ï¼Œè€Œä¼ ç»Ÿæ¨¡å¼åˆ™éœ€è¦ä½ é‡æ–°ä¸‹è½½ï¼Œè¿™æ ·ä¸ä»…å¢åŠ äº†æˆ‘ä»¬çš„å¼€å‘æ—¶é—´ï¼Œè€Œä¸”ä¼šè®©å‰ç«¯å¼€å‘å·¥ä½œå˜å¾—æ¯ç‡¥æ— å‘³ã€‚ Iconfontä½¿ç”¨æµç¨‹åœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°ç¬¬ä¸‰æ–¹Iconfontåœ¨çº¿æœåŠ¡ï¼ˆä¾‹å¦‚ï¼š é˜¿é‡Œå·´å·´Iconfontå¹³å° ï¼‰ï¼Œä¸ªäººæ¯”è¾ƒåå‘äºé˜¿é‡Œå·´å·´Iconfontå¹³å°ï¼Œè€Œåœ¨æ­¤æ–‡ä¸­ä¹Ÿæ˜¯åœ¨é˜¿é‡Œå·´å·´Iconfontå¹³å°ä¸Šè¿›è¡Œæ“ä½œçš„ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬æ‰“å¼€é˜¿é‡Œå·´å·´Iconfontå¹³å°ï¼ˆps:ä½¿ç”¨é˜¿é‡Œå·´å·´Iconfontå¹³å°éœ€è¦ä½ æœ‰githubè´¦å·æˆ–è€…å¾®åšè´¦å·ï¼‰ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æœç´¢æˆ‘ä»¬æƒ³è¦çš„å›¾æ ‡ï¼Œå»ºè®®ä½¿ç”¨è‹±æ–‡æœç´¢ï¼ŒåŒ¹é…çš„iconå¯èƒ½æ›´å¤šå“¦ï½ å›è½¦ä»¥åï¼Œä½ ä¼šçœ‹åˆ°å¾ˆå¤šæœ‰å…³äºtimeçš„iconå›¾æ ‡ï¼Œé€‰æ‹©ä½ éœ€è¦çš„é‚£ä¸ªï¼Œå¹¶æ·»åŠ è‡³è´­ç‰©è½¦ä¸­ï¼ˆå¦‚æœªç™»å½•çš„è¯ï¼Œæ­¤æ—¶ä¼šè¦æ±‚ä½ å…ˆç™»å½•ï¼‰åŠ å…¥æˆåŠŸåä½ å¯ä»¥åœ¨å³ä¸Šè§’è´­ç‰©è½¦å¤„çœ‹åˆ°ä½ æ‰€æ·»åŠ çš„icon ä¾æ­¤ï¼Œä½ å¯ä»¥åœ¨é¡¹ç›®ä¸­æ·»åŠ å¾ˆå¤šiconå›¾æ ‡ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€æ¼”ç¤ºäº† æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è´­ç‰©è½¦ä¸­æ‰€æœ‰çš„iconå›¾æ ‡æ‰“åŒ…åœ¨ä¸€ä¸ªæ–°å»ºçš„é¡¹ç›®ä¸­æ·»åŠ æˆåŠŸåï¼Œä½ å¯ä»¥çœ‹åˆ°ä½ åˆ›å»ºçš„é¡¹ç›®ä¸­æœ‰ä½ æ‰€æ·»åŠ çš„æ‰€æœ‰iconå›¾æ ‡ å»ºè®®ä½¿ç”¨ï¼šç”Ÿæˆåœ¨çº¿é“¾æ¥å¹¶åœ¨cssæ–‡ä»¶ä¸­é€šè¿‡1@import url('é“¾æ¥åœ°å€') å¼•å…¥èµ„æºä¹Ÿå¯ä»¥é€šè¿‡ç‚¹å‡»ä¸‹è½½è‡³æœ¬åœ°ï¼Œå°†zipæ–‡ä»¶è§£å‹åå…¶ä¸­çš„æ–‡ä»¶å¦‚ä¸‹ æ¥ä¸‹æ¥ï¼Œå°±æ˜¯å¦‚ä½•åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº†åœ¨åŸæ¥çš„htmlä¸­æˆ‘ä½¿ç”¨çš„æ˜¯ä¼ ç»Ÿæ–¹å¼ï¼Œå°†iconä»¥å›¾ç‰‡çš„å½¢å¼å¼•å…¥å¯ä»¥çœ‹åˆ°çš„æ•ˆæœå¦‚ä¸‹ â€”â€”â€”â€“ ä¸‹è½½è‡³æœ¬åœ°éœ€è¦è¿›è¡Œçš„ â€”â€”â€”â€“å°†åˆšåˆšè§£å‹çš„æ–‡ä»¶æ”¾ç½®åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œå¯ä»¥å¯¹æ–‡ä»¶è¿›è¡Œé‡å‘½åï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘é‡å‘½åä¸ºicon-fontsï¼Œå½“å‰é¡¹ç›®ç›®å½•å¦‚ä¸‹ æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨å¤´éƒ¨å¼•å…¥icon-fontsä¸­çš„iconfont.cssæ–‡ä»¶ â€”â€”â€”â€“ åä¸½ä¸½çš„åˆ†å‰²çº¿ â€”â€”â€”â€“ å¹¶ä½¿ç”¨iæ ‡ç­¾æ¥æ›¿æ¢ä¼ ç»Ÿæ–¹å¼ å…¶ä¸­iconfontæ˜¯å¿…é¡»çš„ç±»åï¼Œicon-timeæ˜¯ä½ åœ¨é˜¿é‡Œå·´å·´Iconfontå¹³å°åˆ›å»ºçš„é¡¹ç›®ä¸­å›¾æ ‡æ‰€å¯¹åº”çš„ç±»åï¼Œå¦‚ä¸‹å›¾imgæ˜¯æˆ‘è‡ªå·±åˆ›å»ºçš„ç”¨æ¥å®šä½çš„cssç±»ä½ ä¼šå‘ç°iconå·²ç»æˆåŠŸçš„è¢«æˆ‘ä»¬å¼•å…¥äº†ï¼Œå¹¶ä¸”æ›¿æ¢äº†ä¼ ç»Ÿçš„imgæ ‡ç­¾ ä½ å¯ä»¥åœ¨cssä¸­ä»»æ„è®¾ç½®iconå›¾æ ‡çš„å¤§å°ä»¥åŠé¢œè‰²ï¼Œå¦‚ä¸‹ï¼š æ€»ç»“å†™åˆ°è¿™é‡Œï¼Œä¹Ÿå·®ä¸å¤šç»“æŸäº†ï¼Œåœ¨è¿™ç¯‡æ–‡ç« é‡Œæˆ‘ç®€å•ä»‹ç»äº†iconfontåœ¨é¡¹ç›®ä¸­çš„ä½¿ç”¨ï¼Œåœ¨å®é™…è¿ç”¨ä¸­ï¼Œä½ å¯ä»¥æŠŠé¡¹ç›®ä¸­æ‰€éœ€è¦çš„å›¾æ ‡éƒ½ä»¥è¿™ç§æ–¹å¼å¼•å…¥ï¼Œè¿™æ ·åœ¨ç”¨æˆ·è¦æ±‚æ›´æ¢iconä¸»è‰²è°ƒæ—¶ï¼Œå°±ä»…éœ€è¦ç»Ÿä¸€ä¿®æ”¹iconå›¾æ ‡çš„é¢œè‰²å³å¯ï¼Œè€Œä¸éœ€è¦é‡æ–°ä¸‹è½½iconå›¾ç‰‡ï¼Œè¿™æ ·ä¹Ÿå°±åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘äº†é¡¹ç›®çš„å¼€å‘æ—¶é—´ï¼Œæé«˜äº†é¡¹ç›®çš„å¼€å‘è´¨é‡ï¼Œæ›´é‡è¦çš„æ˜¯å‰ç«¯å¼€å‘äººå‘˜ä¸ä¼šå› ä¸ºé‡å¤æ— ç”¨åŠŸå„¿æ„Ÿè§‰æ¯ç‡¥æ— å‘³ã€‚ è¿™äº›åªæ˜¯ä¸€äº›å°å°çš„åº”ç”¨ï¼Œå¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï½]]></content>
      <categories>
        <category>iconfontå›¾æ ‡</category>
      </categories>
      <tags>
        <tag>iconfont é¡¹ç›®å›¾æ ‡icon</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨webpackæ­å»ºvueé¡¹ç›®â€”â€”å…¥é—¨]]></title>
    <url>%2F2017%2F10%2F25%2Fwebpack-vue%2F</url>
    <content type="text"><![CDATA[vueä»¥æ•°æ®ä¸ºé©±åŠ¨ï¼Œæ˜¯è¿‘å¹´æ¥æ¯”è¾ƒç«çš„ä¸€ä¸ªè½»é‡çº§çš„å‰åç«¯åˆ†ç¦»çš„æ¡†æ¶ï¼Œå‰æ®µæ—¶é—´å­¦ä¹ äº†vueçš„ä¸€äº›åŸºæœ¬çŸ¥è¯†ï¼Œæ˜ç™½äº†vueä¸­æŒ‡ä»¤ç­‰çš„ä½¿ç”¨ï¼Œä¸ªäººè§‰å¾—è¾ƒéš¾çš„ä¸€éƒ¨åˆ†å½“å±äºä½¿ç”¨vueè¿›è¡Œç»„ä»¶åŒ–å¼€å‘ï¼Œåœ¨vue.jsä¸“ä¸šä¸­æ–‡å¼€å‘è€…ç¤¾åŒºä¸Šæœ‰ä¸å°‘å¤§ç‰›ä»¬ä½¿ç”¨vueé‡æ„çš„ä¸€äº›ä¾‹å­ï¼Œæ¯”å¦‚è±†ç“£ï¼Œé¥¿äº†ä¹ˆç­‰ï¼Œå¤§å®¶å¯ä»¥cloneä¸‹æ¥è‡ªå·±é‡æ„ä¸€ä¸‹ï¼Œå»ºè®®åˆå­¦è€…åœ¨è±†ç“£å’Œé¥¿äº†ä¹ˆä¸¤ä¸ªä¸­å…ˆé€‰æ‹©è±†ç“£çš„ä¾‹å­ï¼Œè±†ç“£çš„ä¾‹å­ä¼šç›¸å¯¹ç®€å•ç›´è§‚ä¸€äº›ã€‚æˆ‘åœ¨åˆšå­¦ä¹ ä½¿ç”¨vueè¿›è¡Œç»„ä»¶åŒ–å¼€å‘æ—¶ï¼Œå¸¸å¸¸ä¼šä½¿ç”¨ 1$ vue init webpack project-name æ¥åˆå§‹åŒ–ä¸€ä¸ªvueé¡¹ç›®ï¼Œæ¥ç€åœ¨è¿™ä¸ªåˆå§‹åŒ–å®Œæˆçš„é¡¹ç›®ä¸­è¿›è¡Œvueçš„ç»„ä»¶åŒ–å¼€å‘ã€‚æˆ‘ä»¬å¯èƒ½æ˜ç™½æ¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹ä¸­çš„ç›¸å…³å†…å®¹ï¼Œä½†ä½¿ç”¨webpackæ„å»ºvueé¡¹ç›®çš„è¿‡ç¨‹åˆæ˜¯æ€æ ·çš„ï¼Ÿè¿™å°±ä¸å¾—è€ŒçŸ¥äº†ã€‚éšç€åæ¥çš„å­¦ä¹ ï¼Œæˆ‘å¼€å§‹è‡ªå·±æ…¢æ…¢ä½¿ç”¨webpackä»é›¶æ„å»ºvueé¡¹ç›®ï¼Œè¸©äº†å¾ˆå¤šå‘ï¼Œå¯èƒ½ä¹Ÿä¸æ˜¯å¾ˆæ·±å…¥ï¼Œä½†æ˜¯æ€»æƒ³ç€èƒ½æŠŠè¿™æ¬¡è¿‡ç¨‹å†™ä¸‹æ¥ï¼Œä»¥ä¾¿åç»­çš„æ·±å…¥å­¦ä¹ ï¼Œåˆæ¬¡å­¦ä¹ å¯èƒ½ç†è§£ä»¥åŠæ­¥éª¤ä¸Šä¼šæœ‰åå·®ï¼Œè¿˜è¯·å„ä½ä¸åèµæ•™ï½ webpackæ„å»ºvueé¡¹ç›®æµç¨‹å®‰è£… é¦–å…ˆéœ€è¦ä½ å·²ä¸‹è½½å®‰è£…node.js è¿˜æ²¡æœ‰ä¸‹è½½å®‰è£…ï¼Ÿæˆ³è¿™é‡Œè¿›å…¥Node.jsä¸­æ–‡ç½‘è¿›è¡Œä¸‹è½½å®‰è£…åœ¨ä½ ä¹ æƒ¯ä½¿ç”¨çš„å·¥ä½œç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹ï¼Œåœ¨è¿™é‡Œæˆ‘æ–°å»ºäº†ä¸€ä¸ªåä¸ºwebpack-vue-blogçš„æ–‡ä»¶å¤¹ï¼ˆps:é¡¹ç›®åç§°ä¸­ä¸å¯ä»¥å«æœ‰ç©ºæ ¼ï¼Œè¿™åœ¨åˆå§‹åŒ–æ—¶ä¼šæŠ¥é”™çš„ï½å¤§å®¶æ³¨æ„ä¸€ä¸‹ï¼Œå»ºè®®ä½¿ç”¨-æˆ–_ä»£æ›¿ï¼‰ï¼Œæ‰“å¼€ä½ çš„ç»ˆç«¯ï¼Œè¿›å…¥åˆ°webpack-vue-blogçš„å·¥ä½œç›®å½•ï¼Œä½¿ç”¨1$ npm init //åˆå§‹åŒ–å¹¶è‡ªåŠ¨åˆ›å»ºpackage.jsonæ–‡ä»¶ï¼Œnpmæ˜¯node.jsçš„å‘½ä»¤ æ¥ä¸‹æ¥æ˜¯ä¸€äº›é¡¹ç›®çš„ç›¸å…³ä¿¡æ¯ï¼Œä¸€è·¯æŒ‰enteré”®å°±å¯ä»¥äº†ï¼Œä¹‹åä½ å¯ä»¥åœ¨package.jsonæ–‡ä»¶ä¸­çœ‹åˆ°é¡¹ç›®çš„ç›¸å…³ä¿¡æ¯ è¿™é‡Œå»ºè®®å¤§å®¶å¯ä»¥ä¸‹è½½å®‰è£…ä¸€ä¸‹cnpmæ·˜å®npmé•œåƒï¼Œå› ä¸ºnpmå®‰è£…æ’ä»¶æ˜¯ä»å›½å¤–æœåŠ¡å™¨ä¸‹è½½ï¼Œå—ç½‘ç»œå½±å“å¤§ï¼Œå¯èƒ½å‡ºç°å¼‚å¸¸ï¼Œä½¿ç”¨cnpmçš„è¯å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜æˆ‘ä»¬æ¨¡å—çš„ä¸‹è½½å®‰è£…é€Ÿåº¦1$ npm install -g cnpm --registry=https://registry.npm.taobao.org æ¥ä¸‹æ¥å°±è¦å®‰è£…vue webpackç­‰ç›¸å…³çš„æ¨¡å—ï¼Œåœ¨è¿™é‡Œå…ˆå¤§è‡´ä»‹ç»ä¸€ä¸‹ç›¸å…³çš„å‘½ä»¤ ä½¿ç”¨npmå®‰è£…æ’ä»¶ï¼šå‘½ä»¤æç¤ºç¬¦æ‰§è¡Œnpm(cnpm) install [-g] [â€“save-dev] -gï¼šå…¨å±€å®‰è£… â€“saveï¼šå°†ä¿å­˜é…ç½®ä¿¡æ¯è‡³package.jsonï¼ˆpackage.jsonæ˜¯nodejsé¡¹ç›®é…ç½®æ–‡ä»¶ï¼‰ -devï¼šä¿å­˜è‡³package.jsonçš„devDependenciesèŠ‚ç‚¹ï¼Œä¸æŒ‡å®š-devå°†ä¿å­˜è‡³dependenciesèŠ‚ç‚¹ 12345678910//å®‰è£…vue$ cnpm install --save vue //å®‰è£…webpackä»¥åŠwebpackæµ‹è¯•æœåŠ¡å™¨ï¼Œé»˜è®¤å®‰è£…æ˜¯1.0ç‰ˆæœ¬çš„ï¼Œæ‰€ä»¥å¿…é¡»æŒ‡å®šç‰ˆæœ¬å·$ cnpm install --save-dev webpack@^2.1.0-beta.25 webpack-dev-server@^2.1.0-beta.9 //å®‰è£…babelï¼Œä¸€èˆ¬çš„æµè§ˆå™¨æ˜¯ä¸è®¤è¯†es6è¯­æ³•çš„ï¼Œbabelçš„ä½œç”¨æ˜¯å°†ES6ä»£ç è½¬ä¸ºES5ä»£ç ï¼Œä»è€Œç¼–è¯‘æˆæµè§ˆå™¨è®¤è¯†çš„è¯­æ³•$ cnpm install --save-dev babel-core babel-loader babel-preset-es2015//ç”¨æ¥è§£ævueçš„ç»„ä»¶ï¼Œ.vueåç¼€çš„æ–‡ä»¶$ cnpm install --save-dev vue-loader vue-template-compiler//ç”¨æ¥è§£æcss$ cnpm install --save-dev css-loader file-loader éœ€è¦ç”¨åˆ°çš„æ¨¡å—æˆ‘ä»¬å·²ç»å®‰è£…å®Œä¹‹åï¼Œå°±å¯ä»¥å¼€å§‹åœ¨package.jsonçœ‹åˆ°æˆ‘ä»¬æ‰€å®‰è£…çš„ä¾èµ–åŒ…ï¼Œåœ¨webpack-vue-blogç›®å½•ä¸‹ä¹Ÿä¼šç”Ÿæˆåä¸ºnode_modulesçš„æ–‡ä»¶å¤¹ ç¼–ç å®‰è£…äº†è¿™ä¹ˆå¤šçš„ä¾èµ–åŒ…ï¼Œç»ˆäºè¦è¿›å…¥ç¼–ç çš„é˜¶æ®µäº†ï¼Œæ‰“å¼€ä½ çš„ç¼–è¾‘å™¨ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯VS Codeå·¥å…·è¿›è¡Œç¼–ç ï¼Œè¿™ä¸ªå·¥å…·æ¯”è¾ƒå°ï¼Œä½†æ˜¯è¦å®‰è£…ç›¸å…³çš„æ’ä»¶ï¼Œæˆ‘è¿™é‡Œä¸è¯¦ç»†ä»‹ç»äº†å“ˆï¼Œæ„Ÿå…´è¶£çš„èŒå‹ä»¬å¯ä»¥å®‰è£…ä½¿ç”¨ä¸€ä¸‹ã€‚ç°åœ¨æˆ‘ä»¬çš„webpack-vue-blogå·¥ç¨‹ç›®å½•ä¸‹åªæœ‰node_modulesæ–‡ä»¶å¤¹ä»¥åŠpackage.jsonæ–‡ä»¶æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºsrcæ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾æˆ‘ä»¬é¡¹ç›®çš„æºç ï¼Œåœ¨srcç›®å½•ä¸‹æ–°å»ºApp.vueä»¥åŠmain.jsæ–‡ä»¶ï¼Œå…¶ä¸­App.vueæ˜¯æˆ‘ä»¬çš„å…¥å£é¡µé¢ï¼Œmain.jsæ˜¯åº”ç”¨åˆå§‹åŒ–å…¥å£æ–‡ä»¶1234567891011121314151617181920//App.vue&lt;template&gt; &lt;div id="app"&gt; &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data () &#123; return &#123; msg: 'This is your first webpack-vue project!' &#125; &#125;&#125;&lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt; 123456789//main.jsimport Vue from 'vue'import App from './App.vue' // å°†åŒç›®å½•ä¸‹çš„App.vueå¯¼å…¥/* å®ä¾‹åŒ–ä¸€ä¸ªvue */new Vue(&#123; el: '#app', render: h =&gt; h(App)&#125;) renderå‡½æ•°æ˜¯æ¸²æŸ“ä¸€ä¸ªè§†å›¾ï¼Œç„¶åæä¾›ç»™elæŒ‚è½½ï¼Œå¦‚æœæ²¡æœ‰renderé‚£é¡µé¢ä»€ä¹ˆéƒ½ä¸ä¼šå‡ºæ¥ Vue2.0çš„æ¸²æŸ“è¿‡ç¨‹ï¼š Vueå®ä¾‹é€‰é¡¹å¯¹è±¡çš„ render æ–¹æ³•ä½œä¸ºä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—ä¼ å…¥çš„å‚æ•° h å‡½æ•°ï¼Œè¿”å› h(App) çš„å‡½æ•°è°ƒç”¨ç»“æœ Vue åœ¨åˆ›å»º Vue å®ä¾‹æ—¶ï¼Œé€šè¿‡è°ƒç”¨ render æ–¹æ³•æ¥æ¸²æŸ“å®ä¾‹çš„ DOM æ ‘ Vue åœ¨è°ƒç”¨ render æ–¹æ³•æ—¶ï¼Œä¼šä¼ å…¥ä¸€ä¸ª createElement å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„ h çš„å®å‚æ˜¯ createElement å‡½æ•°ï¼Œç„¶å createElement ä¼šä»¥ APP ä¸ºå‚æ•°è¿›è¡Œè°ƒç”¨ [å®˜æ–¹æ–‡æ¡£]:123456render: function (createElement) &#123; return createElement( 'h' + this.level, // tag name æ ‡ç­¾åç§° this.$slots.default // å­ç»„ä»¶ä¸­çš„é˜µåˆ— )&#125; æ¥ä¸‹æ¥æˆ‘ä»¬å°†è¿›å…¥webpackéƒ¨åˆ† æˆ³è¿›æ¥å­¦ä¹ webpackä¸­æ–‡æ–‡æ¡£ï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºåä¸ºwebpack.config.jsçš„æ–‡ä»¶ï¼Œç”¨æ¥è¿›è¡Œç›¸å…³çš„é…ç½® webpackå…¥å£å‡ºå£ç­‰æ ¸å¿ƒæ¦‚å¿µä¸­æ–‡æ–‡æ¡£ 123456789101112131415161718192021222324252627282930313233//webpack.config.jsvar path = require('path');var webpack = require('webpack');module.exports = &#123; /* å…¥å£æ–‡ä»¶ */ entry: './src/main.js', /* è¾“å‡º */ output: &#123; /* è¾“å‡ºç›®å½•ï¼Œæ²¡æœ‰åˆ™æ–°å»º é€šè¿‡__dirnameè·å¾—å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„å®Œæ•´ç›®å½•åï¼š*/ path: path.resolve(__dirname, './dist'), /* é™æ€ç›®å½•ï¼Œå¯ä»¥ç›´æ¥ä»è¿™é‡Œå–æ–‡ä»¶ */ publicPath: '/dist/', /* æ–‡ä»¶å */ filename: 'build.js' &#125;, module: &#123; rules: [ /* ç”¨æ¥è§£ævueåç¼€çš„æ–‡ä»¶ */ &#123; test: /\.vue$/, loader: 'vue-loader' &#125;, /* ç”¨babelæ¥è§£æjsæ–‡ä»¶å¹¶æŠŠes6çš„è¯­æ³•è½¬æ¢æˆæµè§ˆå™¨è®¤è¯†çš„è¯­æ³• */ &#123; test: /\.js$/, loader: 'babel-loader', /* æ’é™¤æ¨¡å—å®‰è£…ç›®å½•çš„æ–‡ä»¶ */ exclude: /node_modules/ &#125; ] &#125;&#125; æˆ‘ä»¬å½“å‰çš„é¡¹ç›®ç›®å½•ä¸ºï¼šæ¥ä¸‹æ¥æˆ‘ä»¬å°†è¿›è¡Œwebpackçš„æ ¸å¿ƒåŠŸèƒ½â€”â€”æ¨¡å—æ‰“åŒ…1$ cnpm install -g webpack@^2.1.0-beta.25 //å…¨å±€å®‰è£…webpackï¼Œä»¥ä¾¿ä½¿ç”¨webpackå‘½ä»¤è¿›è¡Œæ‰“åŒ…ç­‰ è¿›å…¥webpack-vue-blogç›®å½•ä¸‹å¹¶è¿è¡Œå‘½ä»¤1$ webpack æ‰§è¡Œå®Œæ¯•åä½ å¯ä»¥å‘ç°åœ¨æ ¹ç›®å½•ä¸‹æ–°å¢äº†ä¸€ä¸ªåä¸ºdistçš„æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­æœ‰ä¸ªbuild.jsæ–‡ä»¶ï¼Œè€Œè¿™è¾“å‡ºçš„æ–‡ä»¶å¤¹ååŠæ–‡ä»¶åæ­£æ˜¯æˆ‘ä»¬åœ¨webpack.config.jsä¸­é…ç½®å¥½çš„ã€‚è¿™ä¹ˆä¹…è¿˜ä¸èƒ½çœ‹æ•ˆæœï¼Œæ€¥æ­»äººäº†ï¼Œä¸è¦ç€æ€¥ï¼Œå·²ç»å¿«è¦æ¥è¿‘å°¾å£°å•¦ï¼ï¼æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºåä¸ºindex.htmlçš„æ–‡ä»¶ï¼Œå¹¶å¼•å…¥æˆ‘ä»¬åˆšåˆšç”Ÿæˆçš„build.jsæ–‡ä»¶12345678910111213//index.html&lt;!doctype html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"&gt; &lt;title&gt;webpack-vue-blog&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div id="app"&gt;&lt;/div&gt; &lt;script src="./dist/build.js"&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; æ¥ä¸‹æ¥è¿è¡Œå‘½ä»¤1$ webpack-dev-server ç¨å¾®ç­‰å¾…ä¸€ä¼šï¼Œå°±ä¼šæç¤ºä½ å·²ç»è¿è¡ŒæˆåŠŸå•¦ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡è®¿é—®localhost:8080æ¥è®¿é—®æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªä½¿ç”¨webpackæ„å»ºçš„vueé¡¹ç›®ã€‚è¿™æ ·æˆ‘ä»¬çš„ä½¿ç”¨webpackæ„å»ºçš„vueé¡¹ç›®ä¹Ÿç®—æ˜¯æ­å»ºå®Œæˆäº†ã€‚ ç»“è¯­è¿™æ˜¯è‡ªæ­å»ºä¸ªäººåšå®¢ç½‘ç«™ä»¥æ¥ç€æ‰‹å†™çš„ç¬¬ä¸€ç¯‡åšå®¢ï¼Œå½“ç„¶ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„é¡¹ç›®ï¼Œåœ¨åç»­æ·±å…¥å­¦ä¹ ä¸­ï¼Œä½ ä¼šå‘ç°ç¨‹åºå‘˜ä»¬ä¼šå°†babelçš„ç›¸å…³é…ç½®ä¿å­˜åœ¨.babelrcé…ç½®æ–‡ä»¶ä¸­ï¼Œæ¯”å¦‚ï¼šç›¸ä¿¡å¤§å®¶åœ¨å­¦ä¹ babelç›¸å…³æ•™ç¨‹æ—¶ä¼šäº†è§£åˆ° Babelå…¥é—¨æ¨èæ•™ç¨‹ å¸Œæœ›èƒ½å¯¹èŒå‹ä»¬æœ‰æ‰€å¸®åŠ©ï½]]></content>
      <categories>
        <category>å‰ç«¯æ¡†æ¶</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
</search>
